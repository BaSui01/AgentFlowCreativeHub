# ğŸš€ AgentFlowCreativeHub - å¿«é€Ÿå¯åŠ¨æŒ‡å—

> **æ›´æ–°æ—¥æœŸ**: 2025-11-28  
> **çŠ¶æ€**: Sprint 1 ä»»åŠ¡ 1.1 å®Œæˆ âœ…

---

## ğŸ¯ å¿«é€Ÿå‘½ä»¤é€ŸæŸ¥

### åç«¯ï¼ˆGoï¼‰

```bash
cd backend

# é¦–æ¬¡è¿è¡Œéœ€è¦åˆå§‹åŒ–æ¨¡å—å’Œä¸‹è½½ä¾èµ–
go mod init backend                 # åˆå§‹åŒ–æ¨¡å—ï¼ˆä»…é¦–æ¬¡ï¼‰
go mod tidy                         # ä¸‹è½½ä¾èµ–

# å¯åŠ¨/ç¼–è¯‘
go run cmd/server/main.go           # å¼€å‘æ¨¡å¼å¯åŠ¨
go build -o bin/server cmd/server/main.go  # ç¼–è¯‘æ‰“åŒ…
```

**æ•°æ®åº“è¿ç§»æ§åˆ¶**ï¼ˆ.envï¼‰ï¼š
```bash
APP_DATABASE_AUTO_MIGRATE=true   # é¦–æ¬¡å¯åŠ¨æˆ–æ›´æ–°è¡¨ç»“æ„æ—¶å¯ç”¨
APP_DATABASE_AUTO_MIGRATE=false  # æ—¥å¸¸å¯åŠ¨æ—¶ç¦ç”¨ï¼ˆåŠ å¿«å¯åŠ¨é€Ÿåº¦ï¼‰
```

### å‰ç«¯ï¼ˆReact + Viteï¼‰

```bash
cd frontend
npm install          # å®‰è£…ä¾èµ–
npm run dev          # å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆé»˜è®¤ 5173 ç«¯å£ï¼‰
npm run build        # ç”Ÿäº§æ„å»ºï¼ˆè¾“å‡ºåˆ° distï¼‰
npm run preview      # é¢„è§ˆç”Ÿäº§æ„å»º
npm run lint         # ä»£ç æ£€æŸ¥
npm run typecheck    # ç±»å‹æ£€æŸ¥
npm run test         # è¿è¡Œæµ‹è¯•
```

### Docker Composeï¼ˆä¸€é”®å¯åŠ¨åŸºç¡€è®¾æ–½ï¼‰

```bash
docker-compose up -d     # å¯åŠ¨ PostgreSQL/Redis/Qdrant/Prometheus/Grafana
docker-compose ps        # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose logs -f   # æŸ¥çœ‹æ—¥å¿—
docker-compose down      # åœæ­¢æ‰€æœ‰æœåŠ¡
```

### è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ |
|------|------|
| å‰ç«¯ï¼ˆVite Devï¼‰ | http://localhost:5173 |
| åç«¯ API | http://localhost:8080 |
| Swagger æ–‡æ¡£ | http://localhost:8080/swagger/index.html |
| Grafana | http://localhost:3000 (admin/admin) |
| Prometheus | http://localhost:9090 |
| PostgreSQL | localhost:5432 |
| Redis | localhost:6379 |
| Qdrant | localhost:6333 |

---

## ğŸ“‹ å‰ç½®è¦æ±‚

### å¿…éœ€è½¯ä»¶

1. **Go 1.21+**
   ```bash
   # æ£€æŸ¥ Go ç‰ˆæœ¬
   go version
   
   # Windows å®‰è£…ï¼šhttps://go.dev/dl/
   # ä¸‹è½½ go1.21.x.windows-amd64.msi å¹¶å®‰è£…
   ```

2. **PostgreSQL 14+**
   ```bash
   # Windows å®‰è£…ï¼šhttps://www.postgresql.org/download/windows/
   # æˆ–ä½¿ç”¨ Docker
   docker run -d \
     --name agentflow-postgres \
     -e POSTGRES_PASSWORD=postgres \
     -e POSTGRES_DB=agentflow_dev \
     -p 5432:5432 \
     postgres:14
   ```

3. **Redisï¼ˆå¯é€‰ï¼Œç”¨äºç¼“å­˜ï¼‰**
   ```bash
   # Docker å®‰è£…
   docker run -d \
     --name agentflow-redis \
     -p 6379:6379 \
     redis:7
   ```

---

## ğŸ”§ é…ç½®æ­¥éª¤

### 1. å®‰è£… Go ä¾èµ–

```bash
cd D:\code\AgentFlowCreativeHub\backend
go mod tidy
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶å¡«å†™å®é™…å€¼ï¼š

```bash
# å¤åˆ¶æ¨¡æ¿
copy .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å†™ä»¥ä¸‹é…ç½®
APP_ENV=dev
APP_DATABASE_HOST=localhost
APP_DATABASE_PORT=5432
APP_DATABASE_USER=postgres
APP_DATABASE_PASSWORD=postgres
APP_DATABASE_DBNAME=agentflow_dev

# OpenAI API Keyï¼ˆå¦‚æœéœ€è¦ï¼‰
OPENAI_API_KEY=sk-your-key-here

# Anthropic API Keyï¼ˆå¦‚æœéœ€è¦ï¼‰
ANTHROPIC_API_KEY=sk-ant-your-key-here
```

### 3. åˆ›å»ºæ•°æ®åº“

```sql
-- è¿æ¥ PostgreSQL
psql -U postgres

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE agentflow_dev;

-- é€€å‡º
\q
```

### 4. è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
# æ–¹æ³• 1: ä½¿ç”¨ psql æ‰§è¡Œè¿ç§»è„šæœ¬
cd D:\code\AgentFlowCreativeHub
psql -U postgres -d agentflow_dev -f db/migrations/0001_multi_tenant.sql
psql -U postgres -d agentflow_dev -f db/migrations/0002_rag_tool_system.sql
psql -U postgres -d agentflow_dev -f db/migrations/0003_add_soft_delete.sql
psql -U postgres -d agentflow_dev -f db/migrations/0004_add_triggers.sql

# æ–¹æ³• 2: ä½¿ç”¨ migrate å·¥å…·ï¼ˆæ¨èï¼‰
# å®‰è£… migrate
go install -tags 'postgres' github.com/golang-migrate/migrate/v4/cmd/migrate@latest

# æ‰§è¡Œè¿ç§»
migrate -path db/migrations -database "postgresql://postgres:postgres@localhost:5432/agentflow_dev?sslmode=disable" up
```

---

## â–¶ï¸ å¯åŠ¨åº”ç”¨

### å¼€å‘æ¨¡å¼

```bash
cd D:\code\AgentFlowCreativeHub\backend

# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆPowerShellï¼‰
$env:APP_ENV="dev"

# è¿è¡Œåº”ç”¨
go run cmd/server/main.go
```

### é¢„æœŸè¾“å‡º

```
2025-11-17T23:30:00.000+0800    INFO    logger/logger.go:50    åº”ç”¨å¯åŠ¨ä¸­...    {"env": "dev", "mode": "debug"}
2025-11-17T23:30:00.100+0800    INFO    infra/database.go:57   æ•°æ®åº“è¿æ¥æˆåŠŸ  {"host": "localhost", "port": 5432, "database": "agentflow_dev"}
2025-11-17T23:30:00.150+0800    INFO    main.go:75             HTTP æœåŠ¡å™¨å¯åŠ¨  {"port": 8080}
```

---

## âœ… éªŒè¯æœåŠ¡

### å¥åº·æ£€æŸ¥

```bash
# PowerShell
Invoke-WebRequest http://localhost:8080/health

# é¢„æœŸå“åº”
{
  "status": "healthy",
  "service": "AgentFlowCreativeHub"
}
```

### å°±ç»ªæ£€æŸ¥

```bash
# PowerShell
Invoke-WebRequest http://localhost:8080/ready

# é¢„æœŸå“åº”
{
  "status": "ready",
  "database": "connected"
}
```

### API æµ‹è¯•

```bash
# æµ‹è¯•ç§Ÿæˆ· APIï¼ˆå ä½ç¬¦ï¼‰
Invoke-WebRequest http://localhost:8080/api/tenants

# é¢„æœŸå“åº”
{
  "message": "List tenants - TODO"
}
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
AgentFlowCreativeHub/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ cmd/
â”‚   â”‚   â””â”€â”€ server/
â”‚   â”‚       â””â”€â”€ main.go           # ä¸»ç¨‹åºå…¥å£ âœ…
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ config.go         # é…ç½®ç®¡ç† âœ…
â”‚   â”‚   â”œâ”€â”€ logger/
â”‚   â”‚   â”‚   â””â”€â”€ logger.go         # æ—¥å¿—ç³»ç»Ÿ âœ…
â”‚   â”‚   â”œâ”€â”€ infra/
â”‚   â”‚   â”‚   â”œâ”€â”€ database.go       # æ•°æ®åº“è¿æ¥ âœ…
â”‚   â”‚   â”‚   â””â”€â”€ gorm_logger.go    # GORM æ—¥å¿—é€‚é…å™¨ âœ…
â”‚   â”‚   â”œâ”€â”€ tenant/               # ç§Ÿæˆ·æ¨¡å— âœ…
â”‚   â”‚   â”œâ”€â”€ workflow/             # å·¥ä½œæµæ¨¡å— âœ…
â”‚   â”‚   â”œâ”€â”€ agent/                # Agent æ¨¡å— âœ…
â”‚   â”‚   â”œâ”€â”€ template/             # æ¨¡æ¿æ¨¡å— âœ…
â”‚   â”‚   â””â”€â”€ models/               # AI æ¨¡å‹æ¨¡å— âœ…
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ setup.go              # è·¯ç”±è®¾ç½® âœ…
â”‚   â”‚   â””â”€â”€ router.go             # åŸæœ‰è·¯ç”±ï¼ˆç§Ÿæˆ·ï¼‰ âœ…
â”‚   â””â”€â”€ go.mod                    # Go ä¾èµ– âœ…
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ dev.yaml                  # å¼€å‘ç¯å¢ƒé…ç½® âœ…
â”‚   â””â”€â”€ prod.yaml                 # ç”Ÿäº§ç¯å¢ƒé…ç½® âœ…
â”œâ”€â”€ db/
â”‚   â””â”€â”€ migrations/               # æ•°æ®åº“è¿ç§»è„šæœ¬ âœ…
â”‚       â”œâ”€â”€ 0001_multi_tenant.sql
â”‚       â”œâ”€â”€ 0002_rag_tool_system.sql
â”‚       â”œâ”€â”€ 0003_add_soft_delete.sql
â”‚       â””â”€â”€ 0004_add_triggers.sql
â””â”€â”€ .env.example                  # ç¯å¢ƒå˜é‡æ¨¡æ¿ âœ…
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: go: command not found

**è§£å†³**ï¼šå®‰è£… Go 1.21+
- Windows: https://go.dev/dl/
- å®‰è£…åé‡å¯ç»ˆç«¯

### Q2: æ•°æ®åº“è¿æ¥å¤±è´¥

**æ£€æŸ¥**ï¼š
```bash
# æ£€æŸ¥ PostgreSQL æ˜¯å¦è¿è¡Œ
psql -U postgres -c "SELECT version();"

# æ£€æŸ¥è¿æ¥ä¿¡æ¯
# .env ä¸­çš„ APP_DATABASE_* é…ç½®æ˜¯å¦æ­£ç¡®
```

### Q3: ç«¯å£ 8080 è¢«å ç”¨

**è§£å†³**ï¼š
```yaml
# ä¿®æ”¹ config/dev.yaml
server:
  port: 8081  # æ”¹ä¸ºå…¶ä»–ç«¯å£
```

### Q4: è¿ç§»è„šæœ¬æ‰§è¡Œå¤±è´¥

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å·²åˆ›å»º
psql -U postgres -l | grep agentflow_dev

# æ‰‹åŠ¨åˆ›å»º
psql -U postgres -c "CREATE DATABASE agentflow_dev;"
```

---

## ğŸ“ ä¸‹ä¸€æ­¥

### âœ… å·²å®Œæˆï¼ˆSprint 1 - ä»»åŠ¡ 1.1ï¼‰

- âœ… Go ä¾èµ–ç®¡ç†ï¼ˆgo.modï¼‰
- âœ… é…ç½®ç®¡ç†ç³»ç»Ÿï¼ˆViperï¼‰
- âœ… æ—¥å¿—ç³»ç»Ÿï¼ˆZapï¼‰
- âœ… æ•°æ®åº“è¿æ¥ï¼ˆGORM + PostgreSQLï¼‰
- âœ… ä¸»ç¨‹åºå…¥å£ï¼ˆcmd/server/main.goï¼‰
- âœ… åŸºç¡€è·¯ç”±ï¼ˆå¥åº·æ£€æŸ¥ã€å ä½ç¬¦ APIï¼‰

### ğŸ”œ å¾…å®ç°ï¼ˆSprint 1 - ä»»åŠ¡ 1.2-1.3ï¼‰

1. **è¡¥å…¨ Service å±‚**ï¼ˆ2 å¤©ï¼‰
   - ModelService - AI æ¨¡å‹ç®¡ç†
   - TemplateService - Prompt æ¨¡æ¿ç®¡ç†
   - AgentService - Agent é…ç½®ç®¡ç†
   - WorkflowService - å·¥ä½œæµç®¡ç†

2. **è¡¥å…¨ API è·¯ç”±å±‚**ï¼ˆ1.5 å¤©ï¼‰
   - Models API
   - Templates API
   - Agents API
   - Workflows API

### ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®è®¡åˆ’æ–‡æ¡£](./é¡¹ç›®è®¡åˆ’æ–‡æ¡£.md)
- [æ•°æ®æ¨¡å‹è¡¥å……å®Œæˆæ€»ç»“](./æ•°æ®æ¨¡å‹è¡¥å……å®Œæˆæ€»ç»“.md)
- [ä¸‹ä¸€æ­¥å®æ–½è®¡åˆ’](../.factory/docs/2025-11-17-multiagent-creative-hub-v2.md)

---

## ğŸ‰ æ€»ç»“

Sprint 1 ä»»åŠ¡ 1.1 å·²å®Œæˆï¼ç°åœ¨ä½ å·²ç»æœ‰ï¼š

âœ… å®Œæ•´çš„é…ç½®ç®¡ç†ç³»ç»Ÿ  
âœ… ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ  
âœ… æ•°æ®åº“è¿æ¥å’Œè¿æ¥æ±   
âœ… å¯å¯åŠ¨çš„ HTTP æœåŠ¡å™¨  
âœ… å¥åº·æ£€æŸ¥å’Œå°±ç»ªæ£€æŸ¥  
âœ… åŸºç¡€è·¯ç”±æ¡†æ¶  

**æœåŠ¡å™¨å·²å¯ä»¥å¯åŠ¨å¹¶å“åº”è¯·æ±‚ï¼** ğŸš€

æ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ç°æ ¸å¿ƒ Service å±‚å’Œ API è·¯ç”±ï¼Œè®©ç³»ç»ŸçœŸæ­£å¯ç”¨ã€‚
