# ğŸ“‹ æ‰©å±•å…¶ä»– Agent ç±»å‹çš„ RAG æ”¯æŒ

## ğŸ¯ ç›®æ ‡

ä¸ºä»¥ä¸‹ **4 ç§ Agent ç±»å‹**æ·»åŠ å®Œæ•´çš„ RAG çŸ¥è¯†åº“æ”¯æŒï¼š
1. **Planner Agent** - ä»»åŠ¡è§„åˆ’ Agent
2. **Translator Agent** - å¤šè¯­è¨€ç¿»è¯‘ Agent  
3. **Analyzer Agent** - æ•°æ®åˆ†æ Agent
4. **Researcher Agent** - ä¿¡æ¯æ£€ç´¢ Agentï¼ˆåŸç”Ÿ RAG èƒ½åŠ›ï¼‰

---

## ğŸ“ æŠ€æœ¯æ–¹æ¡ˆ

### æ–¹æ¡ˆæ¦‚è¿°

é‡‡ç”¨ä¸ Writer/Reviewer/Formatter ä¸€è‡´çš„ RAG é›†æˆæ¨¡å¼ï¼š

```
1. åˆ›å»º Agent å®ç°æ–‡ä»¶ï¼ˆ*_agent.goï¼‰
2. æ·»åŠ  ragHelper å­—æ®µ
3. åœ¨ Execute/ExecuteStream ä¸­è°ƒç”¨ RAG å¢å¼º
4. åœ¨ buildMessages ä¸­æ³¨å…¥çŸ¥è¯†åº“ä¸Šä¸‹æ–‡
5. åœ¨ Registry ä¸­æ³¨å†Œ Agent ç±»å‹
```

---

## ğŸ¯ Planner Agent RAG é›†æˆ

### åŠŸèƒ½å®šä½

**èŒè´£**: ä»»åŠ¡è§„åˆ’ä¸åˆ†è§£
- å°†å¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡
- ç”Ÿæˆé¡¹ç›®å¤§çº²å’Œæ‰§è¡Œè®¡åˆ’
- è¯†åˆ«ä»»åŠ¡ä¾èµ–å…³ç³»å’Œä¼˜å…ˆçº§

### RAG åº”ç”¨åœºæ™¯

**çŸ¥è¯†åº“ç±»å‹**: é¡¹ç›®è§„åˆ’åº“
- å†å²é¡¹ç›®æ¡ˆä¾‹
- ä»»åŠ¡æ¨¡æ¿åº“
- æœ€ä½³å®è·µæ–‡æ¡£
- é¡¹ç›®ç®¡ç†æ–¹æ³•è®ºï¼ˆå¦‚ Agileã€Scrumï¼‰

**ä½¿ç”¨ç¤ºä¾‹**:
```
ç”¨æˆ·è¾“å…¥: "è§„åˆ’ä¸€ä¸ªç”µå•†ç½‘ç«™å¼€å‘é¡¹ç›®"
RAG æ£€ç´¢: "ç”µå•†é¡¹ç›®æ¡ˆä¾‹"ã€"ç½‘ç«™å¼€å‘ä»»åŠ¡æ¸…å•"ã€"Agile é¡¹ç›®è§„åˆ’"
AI è¾“å‡º: åŸºäºå†å²æ¡ˆä¾‹ç”Ÿæˆå®Œæ•´é¡¹ç›®è®¡åˆ’ï¼ˆéœ€æ±‚åˆ†æâ†’è®¾è®¡â†’å¼€å‘â†’æµ‹è¯•â†’ä¸Šçº¿ï¼‰
```

### å®ç°ç»†èŠ‚

**æ–‡ä»¶**: `backend/internal/agent/runtime/planner_agent.go`

**æ ¸å¿ƒç»“æ„**:
```go
type PlannerAgent struct {
    config      *AgentConfig
    modelClient ai.ModelClient
    ragHelper   *RAGHelper  // RAG æ”¯æŒ
    name        string
}

func NewPlannerAgent(config *AgentConfig, modelClient ai.ModelClient, ragHelper *RAGHelper) *PlannerAgent {
    return &PlannerAgent{
        config:      config,
        modelClient: modelClient,
        ragHelper:   ragHelper,
        name:        config.Name,
    }
}
```

**é»˜è®¤ç³»ç»Ÿ Prompt**:
```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é¡¹ç›®è§„åˆ’ä¸“å®¶ï¼Œæ“…é•¿å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„æ­¥éª¤ã€‚
ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. åˆ†æä»»åŠ¡ç›®æ ‡å’Œçº¦æŸæ¡ä»¶
2. è¯†åˆ«å…³é”®é‡Œç¨‹ç¢‘å’Œä¾èµ–å…³ç³»
3. ç”Ÿæˆè¯¦ç»†çš„æ‰§è¡Œè®¡åˆ’
4. è¯„ä¼°é£é™©å¹¶æä¾›ç¼“è§£æªæ–½
5. è¾“å‡ºç»“æ„åŒ–çš„ä»»åŠ¡æ¸…å•ï¼ˆJSON/Markdownï¼‰

è¯·åŸºäºå†å²æ¡ˆä¾‹å’Œæœ€ä½³å®è·µï¼Œç”Ÿæˆé«˜è´¨é‡çš„è§„åˆ’æ–¹æ¡ˆã€‚
```

**RAG å¢å¼ºæµç¨‹**:
```
1. æ¥æ”¶ç”¨æˆ·è§„åˆ’éœ€æ±‚
2. ä»çŸ¥è¯†åº“æ£€ç´¢ç›¸ä¼¼é¡¹ç›®æ¡ˆä¾‹
3. æå–å†å²è§„åˆ’æ¨¡æ¿å’Œç»éªŒ
4. æ³¨å…¥åˆ°ç³»ç»Ÿ Prompt
5. ç”Ÿæˆå®šåˆ¶åŒ–è§„åˆ’æ–¹æ¡ˆ
```

**è¾“å‡ºæ ¼å¼**:
```markdown
# é¡¹ç›®è§„åˆ’ï¼šç”µå•†ç½‘ç«™å¼€å‘

## é˜¶æ®µ 1: éœ€æ±‚åˆ†æï¼ˆ2 å‘¨ï¼‰
- [ ] ç”¨æˆ·éœ€æ±‚è°ƒç ”
- [ ] ç«å“åˆ†æ
- [ ] åŠŸèƒ½éœ€æ±‚æ–‡æ¡£

## é˜¶æ®µ 2: ç³»ç»Ÿè®¾è®¡ï¼ˆ2 å‘¨ï¼‰
- [ ] æ¶æ„è®¾è®¡
- [ ] æ•°æ®åº“è®¾è®¡
- [ ] API è®¾è®¡

## é˜¶æ®µ 3: å¼€å‘å®æ–½ï¼ˆ8 å‘¨ï¼‰
- [ ] å‰ç«¯å¼€å‘
- [ ] åç«¯å¼€å‘
- [ ] é›†æˆæµ‹è¯•

## é˜¶æ®µ 4: æµ‹è¯•ä¸Šçº¿ï¼ˆ2 å‘¨ï¼‰
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] å®‰å…¨æµ‹è¯•
- [ ] ç”Ÿäº§éƒ¨ç½²

## é£é™©è¯„ä¼°
- æŠ€æœ¯é£é™©: é«˜
- æ—¶é—´é£é™©: ä¸­
- èµ„æºé£é™©: ä¸­
```

---

## ğŸŒ Translator Agent RAG é›†æˆ

### åŠŸèƒ½å®šä½

**èŒè´£**: å¤šè¯­è¨€ç¿»è¯‘ä¸æœ¬åœ°åŒ–
- æ–‡æ¡£ç¿»è¯‘ï¼ˆä¸­è‹±ã€å¤šè¯­è¨€ï¼‰
- æœ¬åœ°åŒ–å†…å®¹é€‚é…
- æœ¯è¯­ä¸€è‡´æ€§ä¿è¯
- æ–‡åŒ–é€‚é…è°ƒæ•´

### RAG åº”ç”¨åœºæ™¯

**çŸ¥è¯†åº“ç±»å‹**: ç¿»è¯‘è®°å¿†åº“
- æœ¯è¯­è¯å…¸ï¼ˆæŠ€æœ¯æœ¯è¯­ã€è¡Œä¸šæœ¯è¯­ï¼‰
- ç¿»è¯‘è®°å¿†ï¼ˆTranslation Memoryï¼‰
- é£æ ¼æŒ‡å—ï¼ˆå„è¯­è¨€çš„è¡¨è¾¾ä¹ æƒ¯ï¼‰
- æœ¬åœ°åŒ–è§„èŒƒ

**ä½¿ç”¨ç¤ºä¾‹**:
```
ç”¨æˆ·è¾“å…¥: "ç¿»è¯‘è¿™ä»½æŠ€æœ¯æ–‡æ¡£åˆ°è‹±æ–‡"
RAG æ£€ç´¢: "æŠ€æœ¯æœ¯è¯­è¯å…¸"ã€"å·²ç¿»è¯‘æ–‡æ¡£ç¤ºä¾‹"ã€"è‹±æ–‡æŠ€æœ¯å†™ä½œé£æ ¼"
AI è¾“å‡º: æœ¯è¯­ç»Ÿä¸€ã€ç¬¦åˆè‹±æ–‡æŠ€æœ¯å†™ä½œä¹ æƒ¯çš„ç¿»è¯‘
```

### å®ç°ç»†èŠ‚

**æ–‡ä»¶**: `backend/internal/agent/runtime/translator_agent.go`

**æ ¸å¿ƒç»“æ„**:
```go
type TranslatorAgent struct {
    config      *AgentConfig
    modelClient ai.ModelClient
    ragHelper   *RAGHelper
    name        string
}

func NewTranslatorAgent(config *AgentConfig, modelClient ai.ModelClient, ragHelper *RAGHelper) *TranslatorAgent {
    return &TranslatorAgent{
        config:      config,
        modelClient: modelClient,
        ragHelper:   ragHelper,
        name:        config.Name,
    }
}
```

**é»˜è®¤ç³»ç»Ÿ Prompt**:
```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘ä¸“å®¶ï¼Œç²¾é€šå¤šè¯­è¨€ç¿»è¯‘å’Œæœ¬åœ°åŒ–ã€‚
ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. å‡†ç¡®ç¿»è¯‘æºè¯­è¨€å†…å®¹
2. ä¿æŒæœ¯è¯­ä¸€è‡´æ€§
3. é€‚åº”ç›®æ ‡è¯­è¨€çš„è¡¨è¾¾ä¹ æƒ¯
4. ä¿ç•™åŸæ–‡çš„è¯­æ°”å’Œé£æ ¼
5. æ³¨æ„æ–‡åŒ–å·®å¼‚å’Œæ•æ„Ÿè¯

è¯·åŸºäºæœ¯è¯­è¯å…¸å’Œç¿»è¯‘è®°å¿†ï¼Œæä¾›é«˜è´¨é‡çš„ç¿»è¯‘ã€‚
```

**RAG å¢å¼ºæµç¨‹**:
```
1. æ¥æ”¶ç¿»è¯‘éœ€æ±‚ï¼ˆæºè¯­è¨€â†’ç›®æ ‡è¯­è¨€ï¼‰
2. ä»çŸ¥è¯†åº“æ£€ç´¢æœ¯è¯­è¯å…¸
3. æ£€ç´¢ç›¸ä¼¼æ–‡æ¡£çš„ç¿»è¯‘ç¤ºä¾‹
4. æå–é£æ ¼æŒ‡å—å’Œæœ¬åœ°åŒ–è§„èŒƒ
5. ç”Ÿæˆæœ¯è¯­ç»Ÿä¸€çš„ç¿»è¯‘
```

**ç‰¹æ®Šå‚æ•°**:
```go
// ExtraParams
{
    "source_lang": "zh-CN",      // æºè¯­è¨€
    "target_lang": "en-US",      // ç›®æ ‡è¯­è¨€
    "domain": "technical",       // é¢†åŸŸï¼ˆtechnical/legal/marketingï¼‰
    "formality": "formal"        // æ­£å¼ç¨‹åº¦ï¼ˆformal/informalï¼‰
}
```

**è¾“å‡ºç¤ºä¾‹**:
```
åŸæ–‡: "æœ¬ç³»ç»Ÿé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œæ”¯æŒæ°´å¹³æ‰©å±•"
ç¿»è¯‘: "This system adopts a microservices architecture and supports horizontal scaling"

[æœ¯è¯­å¯¹ç…§]
- å¾®æœåŠ¡æ¶æ„: microservices architecture
- æ°´å¹³æ‰©å±•: horizontal scaling
```

---

## ğŸ“Š Analyzer Agent RAG é›†æˆ

### åŠŸèƒ½å®šä½

**èŒè´£**: å†…å®¹åˆ†æä¸è´¨é‡è¯„ä¼°
- å†…å®¹è´¨é‡è¯„åˆ†
- SEO åˆ†æ
- å¯è¯»æ€§è¯„ä¼°
- æ•°æ®æ´å¯Ÿæå–

### RAG åº”ç”¨åœºæ™¯

**çŸ¥è¯†åº“ç±»å‹**: åˆ†ææ ‡å‡†åº“
- è¯„ä¼°æ ‡å‡†æ–‡æ¡£
- è¡Œä¸šåŸºå‡†æ•°æ®
- æœ€ä½³å®è·µæ¡ˆä¾‹
- åˆ†ææ–¹æ³•è®º

**ä½¿ç”¨ç¤ºä¾‹**:
```
ç”¨æˆ·è¾“å…¥: "åˆ†æè¿™ç¯‡äº§å“æ–‡æ¡£çš„è´¨é‡"
RAG æ£€ç´¢: "äº§å“æ–‡æ¡£è¯„ä¼°æ ‡å‡†"ã€"è¡Œä¸šæœ€ä½³å®è·µ"ã€"è´¨é‡åŸºå‡†æ•°æ®"
AI è¾“å‡º: ç»¼åˆè¯„åˆ† + è¯¦ç»†åˆ†ææŠ¥å‘Š + æ”¹è¿›å»ºè®®
```

### å®ç°ç»†èŠ‚

**æ–‡ä»¶**: `backend/internal/agent/runtime/analyzer_agent.go`

**æ ¸å¿ƒç»“æ„**:
```go
type AnalyzerAgent struct {
    config      *AgentConfig
    modelClient ai.ModelClient
    ragHelper   *RAGHelper
    name        string
}

func NewAnalyzerAgent(config *AgentConfig, modelClient ai.ModelClient, ragHelper *RAGHelper) *AnalyzerAgent {
    return &AnalyzerAgent{
        config:      config,
        modelClient: modelClient,
        ragHelper:   ragHelper,
        name:        config.Name,
    }
}
```

**é»˜è®¤ç³»ç»Ÿ Prompt**:
```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å†…å®¹åˆ†æä¸“å®¶ï¼Œæ“…é•¿è¯„ä¼°å†…å®¹è´¨é‡å’Œæä¾›æ•°æ®æ´å¯Ÿã€‚
ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. è¯„ä¼°å†…å®¹çš„å®Œæ•´æ€§ã€å‡†ç¡®æ€§ã€å¯è¯»æ€§
2. è¯†åˆ«å†…å®¹çš„ä¼˜åŠ¿å’Œä¸è¶³
3. æä¾›é‡åŒ–çš„è¯„åˆ†ï¼ˆ0-100ï¼‰
4. ç»™å‡ºå…·ä½“çš„æ”¹è¿›å»ºè®®
5. å¯¹æ¯”è¡Œä¸šæ ‡å‡†å’Œæœ€ä½³å®è·µ

è¯·åŸºäºè¯„ä¼°æ ‡å‡†å’ŒåŸºå‡†æ•°æ®ï¼Œæä¾›å®¢è§‚çš„åˆ†ææŠ¥å‘Šã€‚
```

**RAG å¢å¼ºæµç¨‹**:
```
1. æ¥æ”¶åˆ†æç›®æ ‡å†…å®¹
2. ä»çŸ¥è¯†åº“æ£€ç´¢è¯„ä¼°æ ‡å‡†
3. æ£€ç´¢è¡Œä¸šåŸºå‡†æ•°æ®
4. æå–æœ€ä½³å®è·µæ¡ˆä¾‹
5. ç”Ÿæˆç»¼åˆåˆ†ææŠ¥å‘Š
```

**è¾“å‡ºæ ¼å¼**:
```json
{
  "overall_score": 82,
  "dimensions": {
    "completeness": 85,
    "accuracy": 90,
    "readability": 75,
    "structure": 80,
    "seo": 70
  },
  "strengths": [
    "å†…å®¹å‡†ç¡®æ€§é«˜ï¼Œæ•°æ®æ¥æºå¯é ",
    "ç»“æ„æ¸…æ™°ï¼Œå±‚æ¬¡åˆ†æ˜"
  ],
  "weaknesses": [
    "å¯è¯»æ€§æœ‰å¾…æå‡ï¼Œå¥å­è¿‡é•¿",
    "SEO å…³é”®è¯å¯†åº¦ä¸è¶³"
  ],
  "recommendations": [
    "ä¼˜åŒ–æ®µè½é•¿åº¦ï¼Œæ¯æ®µä¸è¶…è¿‡ 5 å¥",
    "å¢åŠ æ ¸å¿ƒå…³é”®è¯å‡ºç°é¢‘ç‡ï¼ˆç›®æ ‡ï¼š2-3%ï¼‰",
    "æ·»åŠ å†…éƒ¨é“¾æ¥å’Œå¤–éƒ¨å¼•ç”¨"
  ],
  "benchmark": {
    "industry_average": 75,
    "top_10_percent": 90,
    "your_ranking": "Top 30%"
  }
}
```

---

## ğŸ” Researcher Agent RAG é›†æˆ

### åŠŸèƒ½å®šä½

**èŒè´£**: ä¿¡æ¯æ£€ç´¢ä¸ç ”ç©¶
- çŸ¥è¯†åº“æŸ¥è¯¢
- æ–‡çŒ®æ£€ç´¢
- ä¿¡æ¯æ±‡æ€»
- ç­”æ¡ˆç”Ÿæˆ

### RAG åº”ç”¨åœºæ™¯

**çŸ¥è¯†åº“ç±»å‹**: å…¨ç±»å‹çŸ¥è¯†åº“
- ä¼ä¸šæ–‡æ¡£åº“
- æŠ€æœ¯æ–‡æ¡£
- ç ”ç©¶æŠ¥å‘Š
- ç™¾ç§‘çŸ¥è¯†

**ä½¿ç”¨ç¤ºä¾‹**:
```
ç”¨æˆ·è¾“å…¥: "ä»€ä¹ˆæ˜¯ RAG æŠ€æœ¯ï¼Ÿ"
RAG æ£€ç´¢: "RAG æŠ€æœ¯ä»‹ç»"ã€"æ£€ç´¢å¢å¼ºç”Ÿæˆè®ºæ–‡"ã€"RAG åº”ç”¨æ¡ˆä¾‹"
AI è¾“å‡º: åŸºäºå¤šä¸ªæ¥æºçš„ç»¼åˆå›ç­” + å¼•ç”¨æ¥æº
```

### å®ç°ç»†èŠ‚

**æ–‡ä»¶**: `backend/internal/agent/runtime/researcher_agent.go`

**æ ¸å¿ƒç»“æ„**:
```go
type ResearcherAgent struct {
    config      *AgentConfig
    modelClient ai.ModelClient
    ragHelper   *RAGHelper  // åŸç”Ÿ RAG èƒ½åŠ›
    name        string
}

func NewResearcherAgent(config *AgentConfig, modelClient ai.ModelClient, ragHelper *RAGHelper) *ResearcherAgent {
    return &ResearcherAgent{
        config:      config,
        modelClient: modelClient,
        ragHelper:   ragHelper,
        name:        config.Name,
    }
}
```

**é»˜è®¤ç³»ç»Ÿ Prompt**:
```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç ”ç©¶åŠ©æ‰‹ï¼Œæ“…é•¿ä¿¡æ¯æ£€ç´¢å’ŒçŸ¥è¯†æ±‡æ€»ã€‚
ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯
2. ç»¼åˆå¤šä¸ªæ¥æºæä¾›å…¨é¢ç­”æ¡ˆ
3. æ ‡æ³¨ä¿¡æ¯æ¥æºå’Œå¯é æ€§
4. è¯†åˆ«ä¿¡æ¯å†²çªå¹¶è¯´æ˜
5. æä¾›å»¶ä¼¸é˜…è¯»å»ºè®®

è¯·åŸºäºæ£€ç´¢åˆ°çš„ä¿¡æ¯ï¼Œæä¾›å‡†ç¡®ã€å…¨é¢çš„å›ç­”ã€‚
```

**RAG å¢å¼ºæµç¨‹**:
```
1. æ¥æ”¶ç”¨æˆ·é—®é¢˜
2. ä»çŸ¥è¯†åº“æ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼ˆTopK=5-10ï¼‰
3. ç»¼åˆå¤šä¸ªæ¥æºçš„ä¿¡æ¯
4. ç”Ÿæˆç»“æ„åŒ–å›ç­”
5. æ ‡æ³¨ä¿¡æ¯æ¥æº
```

**ç‰¹æ®Šèƒ½åŠ›**: 
- **å¤šçŸ¥è¯†åº“è”åˆæ£€ç´¢** - å¯ä»¥åŒæ—¶æŸ¥è¯¢å¤šä¸ªçŸ¥è¯†åº“
- **æ¥æºè¿½æº¯** - æ¯ä¸ªä¿¡æ¯ç‚¹æ ‡æ³¨æ¥æº
- **ç½®ä¿¡åº¦è¯„ä¼°** - è¯„ä¼°ç­”æ¡ˆçš„å¯é æ€§

**è¾“å‡ºæ ¼å¼**:
```markdown
# ä»€ä¹ˆæ˜¯ RAG æŠ€æœ¯ï¼Ÿ

## å®šä¹‰
RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ˜¯ä¸€ç§å°†ä¿¡æ¯æ£€ç´¢ä¸è¯­è¨€ç”Ÿæˆç›¸ç»“åˆçš„ AI æŠ€æœ¯ã€‚[æ¥æº: RAGæŠ€æœ¯ç™½çš®ä¹¦, ç½®ä¿¡åº¦: 95%]

## æ ¸å¿ƒåŸç†
1. **æ£€ç´¢é˜¶æ®µ**: ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³æ–‡æ¡£ç‰‡æ®µ
2. **å¢å¼ºé˜¶æ®µ**: å°†æ£€ç´¢ç»“æœä½œä¸ºä¸Šä¸‹æ–‡æ³¨å…¥åˆ° Prompt
3. **ç”Ÿæˆé˜¶æ®µ**: åŸºäºå¢å¼ºçš„ä¸Šä¸‹æ–‡ç”Ÿæˆå›ç­”

[æ¥æº: AIæŠ€æœ¯è®ºæ–‡é›†, ç½®ä¿¡åº¦: 90%]

## åº”ç”¨åœºæ™¯
- ä¼ä¸šçŸ¥è¯†åº“é—®ç­”
- æŠ€æœ¯æ–‡æ¡£åŠ©æ‰‹
- å®¢æœæœºå™¨äºº
- ç ”ç©¶åŠ©æ‰‹

[æ¥æº: RAGåº”ç”¨æ¡ˆä¾‹é›†, ç½®ä¿¡åº¦: 85%]

## å»¶ä¼¸é˜…è¯»
- [1] "Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks" (è®ºæ–‡)
- [2] "RAG æŠ€æœ¯åœ¨ä¼ä¸šä¸­çš„åº”ç”¨" (æŠ€æœ¯åšå®¢)
- [3] "pgvector: PostgreSQL å‘é‡æ‰©å±•" (æ–‡æ¡£)
```

---

## ğŸ”„ Registry é›†æˆ

### ä¿®æ”¹ Registry.createAgent()

**æ–‡ä»¶**: `backend/internal/agent/runtime/registry.go`

**å½“å‰å®ç°**:
```go
switch config.AgentType {
case "writer":
    return NewWriterAgent(agentConfig, modelClient, r.ragHelper), nil
case "reviewer":
    return NewReviewerAgent(agentConfig, modelClient, r.ragHelper), nil
case "formatter":
    return NewFormatterAgent(agentConfig, modelClient, r.ragHelper), nil
default:
    return nil, fmt.Errorf("ä¸æ”¯æŒçš„ Agent ç±»å‹: %s", config.AgentType)
}
```

**æ‰©å±•å**:
```go
switch config.AgentType {
case "writer":
    return NewWriterAgent(agentConfig, modelClient, r.ragHelper), nil
case "reviewer":
    return NewReviewerAgent(agentConfig, modelClient, r.ragHelper), nil
case "formatter":
    return NewFormatterAgent(agentConfig, modelClient, r.ragHelper), nil
case "planner":
    return NewPlannerAgent(agentConfig, modelClient, r.ragHelper), nil
case "translator":
    return NewTranslatorAgent(agentConfig, modelClient, r.ragHelper), nil
case "analyzer":
    return NewAnalyzerAgent(agentConfig, modelClient, r.ragHelper), nil
case "researcher":
    return NewResearcherAgent(agentConfig, modelClient, r.ragHelper), nil
default:
    return nil, fmt.Errorf("ä¸æ”¯æŒçš„ Agent ç±»å‹: %s", config.AgentType)
}
```

---

## ğŸ“ å®æ–½æ­¥éª¤

### é˜¶æ®µ 1: Planner Agent (é¢„è®¡ 1 å°æ—¶)

1. **åˆ›å»ºæ–‡ä»¶**: `planner_agent.go` (çº¦ 180 è¡Œ)
   - å®šä¹‰ PlannerAgent ç»“æ„
   - å®ç° Execute å’Œ ExecuteStream æ–¹æ³•
   - æ·»åŠ  RAG å¢å¼ºé€»è¾‘
   - ç¼–å†™ buildMessages æ–¹æ³•

2. **æµ‹è¯•åœºæ™¯**:
   - åˆ›å»ºé¡¹ç›®è§„åˆ’çŸ¥è¯†åº“
   - ä¸Šä¼ å†å²é¡¹ç›®æ¡ˆä¾‹æ–‡æ¡£
   - æµ‹è¯•è§„åˆ’ä»»åŠ¡ç”Ÿæˆ

### é˜¶æ®µ 2: Translator Agent (é¢„è®¡ 1 å°æ—¶)

1. **åˆ›å»ºæ–‡ä»¶**: `translator_agent.go` (çº¦ 200 è¡Œ)
   - å®šä¹‰ TranslatorAgent ç»“æ„
   - å®ç° Execute å’Œ ExecuteStream æ–¹æ³•
   - æ·»åŠ  RAG å¢å¼ºé€»è¾‘ï¼ˆæœ¯è¯­ä¸€è‡´æ€§ï¼‰
   - æ”¯æŒæºè¯­è¨€/ç›®æ ‡è¯­è¨€å‚æ•°

2. **æµ‹è¯•åœºæ™¯**:
   - åˆ›å»ºæœ¯è¯­è¯å…¸çŸ¥è¯†åº“
   - ä¸Šä¼ æŠ€æœ¯æœ¯è¯­å¯¹ç…§è¡¨
   - æµ‹è¯•æŠ€æœ¯æ–‡æ¡£ç¿»è¯‘

### é˜¶æ®µ 3: Analyzer Agent (é¢„è®¡ 1 å°æ—¶)

1. **åˆ›å»ºæ–‡ä»¶**: `analyzer_agent.go` (çº¦ 220 è¡Œ)
   - å®šä¹‰ AnalyzerAgent ç»“æ„
   - å®ç° Execute å’Œ ExecuteStream æ–¹æ³•
   - æ·»åŠ  RAG å¢å¼ºé€»è¾‘ï¼ˆè¯„ä¼°æ ‡å‡†ï¼‰
   - è¾“å‡ºç»“æ„åŒ–åˆ†ææŠ¥å‘Šï¼ˆJSONï¼‰

2. **æµ‹è¯•åœºæ™¯**:
   - åˆ›å»ºè¯„ä¼°æ ‡å‡†çŸ¥è¯†åº“
   - ä¸Šä¼ è¡Œä¸šæœ€ä½³å®è·µæ–‡æ¡£
   - æµ‹è¯•å†…å®¹è´¨é‡åˆ†æ

### é˜¶æ®µ 4: Researcher Agent (é¢„è®¡ 1 å°æ—¶)

1. **åˆ›å»ºæ–‡ä»¶**: `researcher_agent.go` (çº¦ 200 è¡Œ)
   - å®šä¹‰ ResearcherAgent ç»“æ„
   - å®ç° Execute å’Œ ExecuteStream æ–¹æ³•
   - å¢å¼º RAG èƒ½åŠ›ï¼ˆå¤šçŸ¥è¯†åº“æ£€ç´¢ï¼‰
   - æ·»åŠ æ¥æºè¿½æº¯åŠŸèƒ½

2. **æµ‹è¯•åœºæ™¯**:
   - ä½¿ç”¨ç°æœ‰çŸ¥è¯†åº“
   - æµ‹è¯•å¤šçŸ¥è¯†åº“è”åˆæ£€ç´¢
   - éªŒè¯æ¥æºæ ‡æ³¨åŠŸèƒ½

### é˜¶æ®µ 5: Registry é›†æˆ (é¢„è®¡ 30 åˆ†é’Ÿ)

1. **ä¿®æ”¹ Registry**:
   - åœ¨ `createAgent()` ä¸­æ·»åŠ  4 ç§æ–° Agent
   - ç¡®ä¿æ‰€æœ‰ Agent ä¼ é€’ ragHelper

2. **éªŒè¯**:
   - æµ‹è¯•æ‰€æœ‰ 7 ç§ Agent ç±»å‹çš„åˆ›å»º
   - éªŒè¯ RAG é…ç½®ç”Ÿæ•ˆ

### é˜¶æ®µ 6: æ–‡æ¡£æ›´æ–° (é¢„è®¡ 30 åˆ†é’Ÿ)

1. **æ›´æ–°éœ€æ±‚æ–‡æ¡£**:
   - æ›´æ–° Agent ç±»å‹åˆ—è¡¨ï¼ˆæ ‡è®°å·²å®Œæˆï¼‰
   - æ·»åŠ  4 ç§æ–° Agent çš„ä½¿ç”¨ç¤ºä¾‹
   
2. **æ›´æ–° README**:
   - æ›´æ–° Agent èƒ½åŠ›çŸ©é˜µ
   - æ ‡è®° RAG æ”¯æŒçŠ¶æ€

---

## ğŸ“Š é¢„æœŸæˆæœ

### ä»£ç å˜æ›´

**æ–°å¢æ–‡ä»¶** (4 ä¸ª):
```
backend/internal/agent/runtime/
â”œâ”€â”€ planner_agent.go      # 180 è¡Œ
â”œâ”€â”€ translator_agent.go   # 200 è¡Œ
â”œâ”€â”€ analyzer_agent.go     # 220 è¡Œ
â””â”€â”€ researcher_agent.go   # 200 è¡Œ
```

**ä¿®æ”¹æ–‡ä»¶** (1 ä¸ª):
```
backend/internal/agent/runtime/
â””â”€â”€ registry.go          # +4 case åˆ†æ”¯
```

**ä»£ç ç»Ÿè®¡**:
- æ–°å¢æ–‡ä»¶: 4 ä¸ª
- æ–°å¢ä»£ç : ~800 è¡Œ
- ä¿®æ”¹ä»£ç : ~20 è¡Œ

### åŠŸèƒ½å®Œæˆåº¦

**Agent RAG æ”¯æŒçŸ©é˜µ**:
| Agent ç±»å‹ | RAG æ”¯æŒ | çŸ¥è¯†åº“ç±»å‹ | ä½¿ç”¨åœºæ™¯ |
|-----------|---------|-----------|---------|
| Writer | âœ… å®Œæˆ | æŠ€æœ¯æ–‡æ¡£ã€å†™ä½œæŒ‡å— | åŸºäºçŸ¥è¯†åˆ›ä½œ |
| Reviewer | âœ… å®Œæˆ | å®¡æ ¡è§„èŒƒã€æœ¯è¯­è¯å…¸ | åŸºäºæ ‡å‡†å®¡æ ¡ |
| Formatter | âœ… å®Œæˆ | æ ¼å¼è§„èŒƒã€æ–‡æ¡£æ¨¡æ¿ | åŸºäºæ¨¡æ¿æ ¼å¼åŒ– |
| **Planner** | âœ… å¾…å®Œæˆ | é¡¹ç›®æ¡ˆä¾‹ã€ä»»åŠ¡æ¨¡æ¿ | åŸºäºæ¡ˆä¾‹è§„åˆ’ |
| **Translator** | âœ… å¾…å®Œæˆ | æœ¯è¯­è¯å…¸ã€ç¿»è¯‘è®°å¿† | åŸºäºè¯å…¸ç¿»è¯‘ |
| **Analyzer** | âœ… å¾…å®Œæˆ | è¯„ä¼°æ ‡å‡†ã€åŸºå‡†æ•°æ® | åŸºäºæ ‡å‡†åˆ†æ |
| **Researcher** | âœ… å¾…å®Œæˆ | å…¨ç±»å‹çŸ¥è¯†åº“ | çŸ¥è¯†æ£€ç´¢é—®ç­” |

å®Œæˆå: **7/7 Agent ç±»å‹æ”¯æŒ RAG** ğŸ‰

---

## ğŸ¯ éªŒæ”¶æ ‡å‡†

### ä»£ç å±‚é¢
1. âœ… æ‰€æœ‰ 4 ç§ Agent éƒ½æœ‰ `ragHelper *RAGHelper` å­—æ®µ
2. âœ… æ‰€æœ‰ Agent çš„ Execute æ–¹æ³•è°ƒç”¨ `EnrichWithKnowledge()`
3. âœ… æ‰€æœ‰ Agent çš„ buildMessages æ–¹æ³•è°ƒç”¨ `InjectKnowledgeIntoPrompt()`
4. âœ… Registry æ­£ç¡®æ³¨å†Œæ‰€æœ‰ 7 ç§ Agent ç±»å‹
5. âœ… ä»£ç é£æ ¼ä¸ç°æœ‰ Agent ä¿æŒä¸€è‡´

### åŠŸèƒ½å±‚é¢
1. âœ… å¯ä»¥ä¸ºæ¯ç§ Agent é…ç½®ç‹¬ç«‹çš„çŸ¥è¯†åº“
2. âœ… Planner Agent èƒ½åŸºäºå†å²æ¡ˆä¾‹ç”Ÿæˆè§„åˆ’
3. âœ… Translator Agent èƒ½ä¿æŒæœ¯è¯­ä¸€è‡´æ€§
4. âœ… Analyzer Agent èƒ½è¾“å‡ºç»“æ„åŒ–åˆ†ææŠ¥å‘Š
5. âœ… Researcher Agent èƒ½æ ‡æ³¨ä¿¡æ¯æ¥æº
6. âœ… RAG å¤±è´¥ä¸å½±å“ Agent æ­£å¸¸æ‰§è¡Œï¼ˆé™çº§ï¼‰

### æµ‹è¯•å±‚é¢
1. âœ… æ¯ç§ Agent éƒ½æœ‰å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹
2. âœ… æµ‹è¯• RAG å¯ç”¨å’Œç¦ç”¨ä¸¤ç§æ¨¡å¼
3. âœ… æµ‹è¯•çŸ¥è¯†åº“æ£€ç´¢å‡†ç¡®æ€§
4. âœ… æµ‹è¯•å¤šçŸ¥è¯†åº“åœºæ™¯ï¼ˆResearcherï¼‰

---

## ğŸ’¡ æ ¸å¿ƒä»·å€¼

### å¯¹ Planner Agent
- âœ… **åŸºäºå†å²æ¡ˆä¾‹çš„è§„åˆ’** - å‚è€ƒæˆåŠŸé¡¹ç›®ç»éªŒ
- âœ… **ä»»åŠ¡æ¨¡æ¿å¤ç”¨** - å¿«é€Ÿç”Ÿæˆæ ‡å‡†åŒ–è§„åˆ’
- âœ… **æœ€ä½³å®è·µåº”ç”¨** - è‡ªåŠ¨åº”ç”¨é¡¹ç›®ç®¡ç†æ–¹æ³•è®º

### å¯¹ Translator Agent
- âœ… **æœ¯è¯­ä¸€è‡´æ€§** - åŸºäºæœ¯è¯­è¯å…¸ç»Ÿä¸€ç¿»è¯‘
- âœ… **ç¿»è¯‘è®°å¿†** - å¤ç”¨å·²ç¿»è¯‘å†…å®¹
- âœ… **é£æ ¼ç»Ÿä¸€** - ç¬¦åˆç›®æ ‡è¯­è¨€è¡¨è¾¾ä¹ æƒ¯

### å¯¹ Analyzer Agent
- âœ… **æ ‡å‡†åŒ–è¯„ä¼°** - åŸºäºè¡Œä¸šæ ‡å‡†è¯„åˆ†
- âœ… **åŸºå‡†å¯¹æ¯”** - ä¸æœ€ä½³å®è·µå¯¹æ¯”
- âœ… **å¯æ“ä½œå»ºè®®** - æä¾›å…·ä½“æ”¹è¿›æ–¹å‘

### å¯¹ Researcher Agent
- âœ… **å‡†ç¡®æ£€ç´¢** - ä»ä¼ä¸šçŸ¥è¯†åº“ç²¾å‡†æŸ¥æ‰¾
- âœ… **ç»¼åˆå›ç­”** - æ•´åˆå¤šä¸ªæ¥æºä¿¡æ¯
- âœ… **æ¥æºå¯è¿½æº¯** - æ ‡æ³¨æ¯ä¸ªä¿¡æ¯ç‚¹çš„æ¥æº

### å¯¹æ•´ä½“é¡¹ç›®
- âœ… **å®Œæ•´ Agent ç”Ÿæ€** - 7 ç§ Agent å…¨éƒ¨æ”¯æŒ RAG
- âœ… **ä¼ä¸šçº§èƒ½åŠ›** - åŸºäºä¼ä¸šçŸ¥è¯†çš„æ™ºèƒ½åŒ–
- âœ… **ç»Ÿä¸€æ¶æ„** - ä¸€è‡´çš„ RAG é›†æˆæ¨¡å¼

---

## ğŸ“ æ—¶é—´ä¼°ç®—

- **Planner Agent**: 1 å°æ—¶
- **Translator Agent**: 1 å°æ—¶
- **Analyzer Agent**: 1 å°æ—¶
- **Researcher Agent**: 1 å°æ—¶
- **Registry é›†æˆ**: 30 åˆ†é’Ÿ
- **æ–‡æ¡£æ›´æ–°**: 30 åˆ†é’Ÿ

**æ€»è®¡**: çº¦ **5 å°æ—¶**

---

## ğŸ”„ å®æ–½ä¼˜å…ˆçº§å»ºè®®

### ä¼˜å…ˆçº§ 1 (é«˜ä¼˜å…ˆçº§)
1. **Researcher Agent** - åŸç”Ÿ RAG èƒ½åŠ›ï¼Œæœ€æœ‰ä»·å€¼
2. **Planner Agent** - é¡¹ç›®è§„åˆ’éœ€æ±‚å¼ºçƒˆ

### ä¼˜å…ˆçº§ 2 (ä¸­ä¼˜å…ˆçº§)
3. **Analyzer Agent** - å†…å®¹è´¨é‡è¯„ä¼°éœ€æ±‚
4. **Translator Agent** - å›½é™…åŒ–éœ€æ±‚

### å¯é€‰å®æ–½é¡ºåº

**æ–¹æ¡ˆ A (ä»·å€¼ä¼˜å…ˆ)**:
```
Researcher â†’ Planner â†’ Analyzer â†’ Translator
```

**æ–¹æ¡ˆ B (å¤æ‚åº¦ä¼˜å…ˆï¼Œå…ˆæ˜“åéš¾)**:
```
Planner â†’ Researcher â†’ Translator â†’ Analyzer
```

**æ–¹æ¡ˆ C (å…¨é‡å¹¶è¡Œï¼Œå¿«é€Ÿå®Œæˆ)**:
```
åŒæ—¶å®æ–½ 4 ç§ Agentï¼ˆçº¦ 5 å°æ—¶ï¼‰
```

---

å‡†å¤‡å¥½å¼€å§‹å®æ–½äº†å—ï¼Ÿæˆ‘å»ºè®®ï¼š
1. å…ˆå®æ–½ **Researcher Agent**ï¼ˆä¿¡æ¯æ£€ç´¢ï¼Œæœ€èƒ½ä½“ç° RAG ä»·å€¼ï¼‰
2. å†å®æ–½ **Planner Agent**ï¼ˆé¡¹ç›®è§„åˆ’ï¼Œå®ç”¨æ€§å¼ºï¼‰
3. ç„¶åæ ¹æ®éœ€æ±‚å®æ–½ Analyzer å’Œ Translator

æˆ–è€…ä¸€æ¬¡æ€§å®Œæˆæ‰€æœ‰ 4 ç§ Agentï¼Œæ„å»ºå®Œæ•´çš„ Agent ç”Ÿæ€ç³»ç»Ÿï¼

æ‚¨å¸Œæœ›å¦‚ä½•è¿›è¡Œï¼Ÿ