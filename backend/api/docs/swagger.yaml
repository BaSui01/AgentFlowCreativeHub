basePath: /
definitions:
  api.HealthResponse:
    properties:
      service:
        type: string
      status:
        type: string
    type: object
  api.ReadinessResponse:
    properties:
      database:
        type: string
      reason:
        type: string
      status:
        type: string
    type: object
  api_handlers_agents.AgentAsyncResponse:
    properties:
      run_id:
        type: string
      status:
        type: string
      trace_id:
        type: string
    type: object
  api_handlers_agents.AgentExecuteResponse:
    properties:
      result:
        $ref: '#/definitions/backend_internal_agent_runtime.AgentResult'
      trace_id:
        type: string
    type: object
  api_handlers_agents.ExecuteAgentRequest:
    properties:
      content:
        type: string
      extra_params:
        additionalProperties: {}
        type: object
      session_id:
        type: string
      variables:
        additionalProperties: {}
        type: object
    required:
    - content
    type: object
  api_handlers_agents.createAgentConfigRequest:
    properties:
      agentType:
        type: string
      analysisModelId:
        description: 分析任务模型
        type: string
      autoToolUse:
        description: 是否允许模型自主调用工具
        type: boolean
      creativeModelId:
        description: 创作任务模型
        type: string
      description:
        type: string
      extraConfig:
        additionalProperties: {}
        description: 扩展配置
        type: object
      fallbackStrategy:
        description: '降级策略: auto, immediate, after_retry, manual'
        type: string
      fallbackTimeoutMs:
        description: 降级超时(毫秒)
        type: integer
      knowledgeBaseIds:
        description: RAG 配置
        items:
          type: string
        type: array
      maxTokens:
        type: integer
      modelId:
        description: 模型配置（主/备用）
        type: string
      modelRouting:
        additionalProperties:
          type: string
        description: 自定义任务类型路由
        type: object
      name:
        type: string
      promptTemplateId:
        description: Prompt 配置
        type: string
      ragEnabled:
        description: 是否启用 RAG
        type: boolean
      ragMinScore:
        description: RAG 最小相似度
        type: number
      ragTopK:
        description: RAG 检索数量
        type: integer
      secondaryModelId:
        description: 备用模型
        type: string
      status:
        description: 状态
        type: string
      summaryModelId:
        description: 摘要任务模型
        type: string
      systemPrompt:
        type: string
      temperature:
        description: 参数配置
        type: number
      toolModelId:
        description: 任务专用模型
        type: string
      tools:
        description: 工具配置
        items:
          type: string
        type: array
    required:
    - agentType
    - modelId
    - name
    type: object
  api_handlers_agents.updateAgentConfigRequest:
    properties:
      analysisModelId:
        type: string
      autoToolUse:
        type: boolean
      creativeModelId:
        type: string
      description:
        type: string
      extraConfig:
        additionalProperties: {}
        description: 扩展配置
        type: object
      fallbackStrategy:
        type: string
      fallbackTimeoutMs:
        type: integer
      knowledgeBaseIds:
        description: RAG 配置
        items:
          type: string
        type: array
      maxTokens:
        type: integer
      modelId:
        description: 模型配置
        type: string
      modelRouting:
        additionalProperties:
          type: string
        type: object
      name:
        type: string
      promptTemplateId:
        description: Prompt 配置
        type: string
      ragEnabled:
        type: boolean
      ragMinScore:
        type: number
      ragTopK:
        type: integer
      secondaryModelId:
        type: string
      status:
        description: 状态
        type: string
      summaryModelId:
        type: string
      systemPrompt:
        type: string
      temperature:
        description: 参数配置
        type: number
      toolModelId:
        description: 任务专用模型
        type: string
      tools:
        description: 工具配置
        items:
          type: string
        type: array
    type: object
  api_handlers_analytics.DateRange:
    properties:
      end:
        description: YYYY-MM-DD
        type: string
      start:
        description: YYYY-MM-DD
        type: string
    required:
    - end
    - start
    type: object
  api_handlers_analytics.ExportReportRequest:
    properties:
      date_range:
        $ref: '#/definitions/api_handlers_analytics.DateRange'
      format:
        enum:
        - csv
        - excel
        - pdf
        type: string
      report_type:
        enum:
        - writing_efficiency
        - content_performance
        - user_engagement
        type: string
    required:
    - date_range
    - format
    - report_type
    type: object
  api_handlers_audit.QueryLogsRequest:
    properties:
      end_time:
        description: ISO 8601 格式
        type: string
      event_category:
        type: string
      event_level:
        type: string
      event_types:
        items:
          type: string
        type: array
      ip_address:
        type: string
      page:
        type: integer
      page_size:
        type: integer
      request_path:
        type: string
      start_time:
        description: ISO 8601 格式
        type: string
      user_id:
        type: string
    type: object
  api_handlers_auth.ForgotPasswordRequest:
    properties:
      email:
        type: string
    required:
    - email
    type: object
  api_handlers_auth.LoginRequest:
    properties:
      email:
        type: string
      password:
        minLength: 6
        type: string
    required:
    - email
    - password
    type: object
  api_handlers_auth.LoginResponse:
    properties:
      access_token:
        type: string
      expires_in:
        description: 秒
        type: integer
      refresh_token:
        type: string
      token_type:
        type: string
      user:
        $ref: '#/definitions/api_handlers_auth.UserInfo'
    type: object
  api_handlers_auth.RefreshRequest:
    properties:
      refresh_token:
        type: string
    required:
    - refresh_token
    type: object
  api_handlers_auth.RegisterRequest:
    properties:
      email:
        type: string
      full_name:
        type: string
      password:
        minLength: 6
        type: string
      username:
        maxLength: 50
        minLength: 3
        type: string
    required:
    - email
    - password
    - username
    type: object
  api_handlers_auth.ResetPasswordRequest:
    properties:
      new_password:
        minLength: 6
        type: string
      token:
        type: string
    required:
    - new_password
    - token
    type: object
  api_handlers_auth.UserInfo:
    properties:
      email:
        type: string
      id:
        type: string
      name:
        type: string
      roles:
        items:
          type: string
        type: array
      tenant_id:
        type: string
    type: object
  api_handlers_codesearch.BuildIndexRequest:
    properties:
      force_refresh:
        type: boolean
    type: object
  api_handlers_codesearch.FindDefinitionRequest:
    properties:
      context_file:
        type: string
      symbol_name:
        type: string
    required:
    - symbol_name
    type: object
  api_handlers_codesearch.FindReferencesRequest:
    properties:
      max_results:
        type: integer
      symbol_name:
        type: string
    required:
    - symbol_name
    type: object
  api_handlers_codesearch.SemanticSearchRequest:
    properties:
      query:
        type: string
      top_n:
        type: integer
    required:
    - query
    type: object
  api_handlers_codesearch.SymbolSearchRequest:
    properties:
      language:
        type: string
      max_results:
        type: integer
      query:
        type: string
      symbol_type:
        type: string
    required:
    - query
    type: object
  api_handlers_codesearch.TextSearchRequest:
    properties:
      case_sensitive:
        type: boolean
      file_glob:
        type: string
      is_regex:
        type: boolean
      max_results:
        type: integer
      pattern:
        type: string
    required:
    - pattern
    type: object
  api_handlers_commands.executeCommandDTO:
    properties:
      agentId:
        type: string
      commandType:
        type: string
      content:
        type: string
      contextNodeIds:
        items:
          type: string
        type: array
      deadlineMs:
        type: integer
      notes:
        type: string
      sessionId:
        type: string
    required:
    - agentId
    - content
    type: object
  api_handlers_credits.giftDTO:
    properties:
      amount:
        type: integer
      description:
        type: string
      type:
        description: register, activity, gift
        type: string
      userId:
        type: string
    required:
    - amount
    - userId
    type: object
  api_handlers_credits.rechargeDTO:
    properties:
      amount:
        type: integer
      remark:
        type: string
      userId:
        type: string
    required:
    - amount
    - userId
    type: object
  api_handlers_credits.updateThresholdDTO:
    properties:
      threshold:
        minimum: 0
        type: integer
    required:
    - threshold
    type: object
  api_handlers_files.completeUploadDTO:
    properties:
      parentId:
        type: string
    type: object
  api_handlers_files.initiateUploadDTO:
    properties:
      chunkSize:
        type: integer
      fileName:
        type: string
      fileSize:
        type: integer
      mimeType:
        type: string
      parentId:
        type: string
    required:
    - fileName
    - fileSize
    type: object
  api_handlers_files.patchFileDTO:
    properties:
      name:
        type: string
      nodeId:
        type: string
      parentId:
        type: string
    required:
    - nodeId
    type: object
  api_handlers_files.revertFileDTO:
    properties:
      nodeId:
        type: string
      versionId:
        type: string
    required:
    - nodeId
    - versionId
    type: object
  api_handlers_files.saveFileDTO:
    properties:
      agentId:
        type: string
      category:
        type: string
      content:
        type: string
      metadata:
        type: string
      name:
        type: string
      nodeId:
        type: string
      parentId:
        type: string
      summary:
        type: string
      toolName:
        type: string
    required:
    - content
    type: object
  api_handlers_files.searchFileDTO:
    properties:
      limit:
        type: integer
      offset:
        type: integer
      query:
        type: string
    type: object
  api_handlers_knowledge.CreateRequest:
    properties:
      config:
        additionalProperties: true
        type: object
      description:
        type: string
      metadata:
        additionalProperties: true
        type: object
      name:
        maxLength: 200
        minLength: 1
        type: string
      type:
        enum:
        - document
        - url
        - api
        - database
        type: string
    required:
    - name
    - type
    type: object
  api_handlers_knowledge.CreateTextDocumentRequest:
    properties:
      content:
        minLength: 1
        type: string
      content_type:
        type: string
      title:
        maxLength: 500
        minLength: 1
        type: string
    required:
    - content
    - title
    type: object
  api_handlers_knowledge.GetContextRequest:
    properties:
      max_chunks:
        type: integer
      query:
        minLength: 1
        type: string
    required:
    - query
    type: object
  api_handlers_knowledge.SearchRequest:
    properties:
      query:
        minLength: 1
        type: string
      top_k:
        type: integer
    required:
    - query
    type: object
  api_handlers_knowledge.UpdateRequest:
    properties:
      config:
        additionalProperties: true
        type: object
      description:
        type: string
      metadata:
        additionalProperties: true
        type: object
      name:
        maxLength: 200
        minLength: 1
        type: string
      status:
        enum:
        - active
        - inactive
        type: string
    type: object
  api_handlers_models.createCredentialRequest:
    properties:
      apiKey:
        type: string
      baseUrl:
        type: string
      extraHeaders:
        additionalProperties: {}
        type: object
      name:
        type: string
      provider:
        type: string
      setAsDefault:
        type: boolean
    required:
    - apiKey
    - name
    type: object
  api_handlers_notifications.BatchDeleteMessagesRequest:
    properties:
      message_ids:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - message_ids
    type: object
  api_handlers_notifications.BatchMarkAsReadRequest:
    properties:
      message_ids:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - message_ids
    type: object
  api_handlers_notifications.MarkAllAsReadRequest:
    properties:
      category:
        $ref: '#/definitions/backend_internal_notification.NotificationCategory'
    type: object
  api_handlers_notifications.RegisterEndpointRequest:
    properties:
      events:
        description: 订阅的事件类型，空表示所有
        items:
          type: string
        type: array
      headers:
        additionalProperties:
          type: string
        type: object
      name:
        type: string
      secret:
        type: string
      url:
        type: string
    required:
    - name
    - url
    type: object
  api_handlers_notifications.TestWebhookRequest:
    properties:
      event_type:
        type: string
      payload:
        additionalProperties: {}
        type: object
    required:
    - event_type
    type: object
  api_handlers_notifications.UpdateEndpointRequest:
    properties:
      events:
        items:
          type: string
        type: array
      headers:
        additionalProperties:
          type: string
        type: object
      name:
        type: string
      secret:
        type: string
      url:
        type: string
    type: object
  api_handlers_tenant.createRoleRequest:
    properties:
      description:
        type: string
      name:
        type: string
      permissionIds:
        items:
          type: string
        type: array
    required:
    - name
    type: object
  api_handlers_tenant.createTenantRequest:
    properties:
      adminEmail:
        type: string
      adminPassword:
        type: string
      adminUsername:
        type: string
      name:
        type: string
      slug:
        type: string
    required:
    - adminEmail
    - adminPassword
    - adminUsername
    - name
    - slug
    type: object
  api_handlers_tenant.createUserRequest:
    properties:
      email:
        type: string
      password:
        type: string
      username:
        type: string
    required:
    - email
    - password
    - username
    type: object
  api_handlers_tenant.updateConfigRequest:
    properties:
      approvalSettings:
        $ref: '#/definitions/backend_internal_tenant.ApprovalSettings'
      description:
        type: string
      displayName:
        type: string
      featureFlags:
        additionalProperties:
          type: boolean
        type: object
      language:
        type: string
      logoUrl:
        type: string
      timeZone:
        type: string
    type: object
  api_handlers_tenant.updateRoleRequest:
    properties:
      description:
        type: string
      id:
        type: string
      name:
        type: string
      permissionIds:
        items:
          type: string
        type: array
    required:
    - id
    - name
    type: object
  api_handlers_tenant.updateTenantRequest:
    properties:
      name:
        type: string
      slug:
        type: string
      status:
        type: string
    type: object
  api_handlers_tools.RegisterToolRequest:
    properties:
      category:
        type: string
      description:
        type: string
      displayName:
        type: string
      httpConfig:
        $ref: '#/definitions/backend_internal_tools.HTTPToolConfig'
      maxRetries:
        type: integer
      name:
        type: string
      parameters:
        additionalProperties: {}
        type: object
      requireAuth:
        type: boolean
      scopes:
        items:
          type: string
        type: array
      timeout:
        type: integer
      type:
        type: string
    required:
    - category
    - description
    - displayName
    - name
    - type
    type: object
  api_handlers_tools.toolExecuteRequest:
    properties:
      input:
        additionalProperties: {}
        type: object
    required:
    - input
    type: object
  api_handlers_tools.toolExecuteResponse:
    properties:
      duration_ms:
        type: integer
      execution_id:
        type: string
      output:
        additionalProperties: {}
        type: object
      tool_name:
        type: string
    type: object
  api_handlers_tools.toolsExecutionListResponse:
    properties:
      executions:
        items:
          $ref: '#/definitions/backend_internal_tools.ToolExecution'
        type: array
      pagination:
        $ref: '#/definitions/backend_api_handlers_common.PaginationMeta'
    type: object
  api_handlers_workflows.ExecuteWorkflowRequest:
    properties:
      input:
        additionalProperties: {}
        type: object
    required:
    - input
    type: object
  api_handlers_workflows.WorkflowExecutionDetailResponse:
    properties:
      execution:
        $ref: '#/definitions/backend_internal_workflow.WorkflowExecution'
      tasks:
        items:
          $ref: '#/definitions/backend_internal_workflow.WorkflowTask'
        type: array
    type: object
  api_handlers_workflows.WorkflowExecutionListResponse:
    properties:
      executions:
        items:
          $ref: '#/definitions/backend_internal_workflow.WorkflowExecution'
        type: array
      pagination:
        $ref: '#/definitions/backend_api_handlers_common.PaginationMeta'
    type: object
  api_handlers_workflows.WorkflowExecutionResponse:
    properties:
      completed_at:
        type: string
      duration_ms:
        type: integer
      execution_id:
        type: string
      input:
        additionalProperties: {}
        type: object
      meta:
        additionalProperties: true
        type: object
      output:
        additionalProperties: {}
        type: object
      started_at:
        type: string
      status:
        type: string
      workflow_id:
        type: string
    type: object
  api_handlers_workflows.workflowValidateRequest:
    properties:
      definition:
        additionalProperties: {}
        type: object
    required:
    - definition
    type: object
  api_handlers_workspace.ExportWorkspaceRequest:
    properties:
      format:
        enum:
        - zip
        - json
        type: string
      include_version_history:
        type: boolean
      workspace_id:
        type: string
    required:
    - format
    - workspace_id
    type: object
  api_handlers_workspace.autoSaveDTO:
    properties:
      content:
        type: string
      nodeId:
        type: string
      sessionId:
        type: string
    required:
    - content
    - nodeId
    type: object
  api_handlers_workspace.batchCopyDTO:
    properties:
      newParentId:
        type: string
      nodeIds:
        items:
          type: string
        type: array
    required:
    - nodeIds
    type: object
  api_handlers_workspace.batchDeleteDTO:
    properties:
      nodeIds:
        items:
          type: string
        type: array
    required:
    - nodeIds
    type: object
  api_handlers_workspace.batchMoveDTO:
    properties:
      newParentId:
        type: string
      nodeIds:
        items:
          type: string
        type: array
    required:
    - nodeIds
    type: object
  api_handlers_workspace.batchSortDTO:
    properties:
      updates:
        items:
          $ref: '#/definitions/backend_internal_workspace.SortOrderUpdate'
        type: array
    required:
    - updates
    type: object
  api_handlers_workspace.createArtifactDTO:
    properties:
      agentId:
        type: string
      agentName:
        type: string
      content:
        type: string
      metadata:
        type: string
      sessionId:
        type: string
      summary:
        type: string
      taskType:
        type: string
      titleHint:
        type: string
      toolName:
        type: string
    required:
    - agentId
    - agentName
    - content
    - taskType
    type: object
  api_handlers_workspace.ensureAgentWorkspaceDTO:
    properties:
      agentId:
        type: string
      agentName:
        type: string
    required:
    - agentId
    - agentName
    type: object
  api_handlers_workspace.ensureSessionWorkspaceDTO:
    properties:
      sessionId:
        type: string
    required:
    - sessionId
    type: object
  api_handlers_workspace.importTextDTO:
    properties:
      autoDetect:
        type: boolean
      content:
        type: string
      fileName:
        type: string
      parentId:
        type: string
    required:
    - content
    type: object
  backend_api_handlers_common.APIResponse:
    properties:
      data: {}
      error:
        type: string
      message:
        type: string
      success:
        type: boolean
    type: object
  backend_api_handlers_common.ErrorResponse:
    properties:
      code:
        type: string
      message:
        type: string
      success:
        type: boolean
    type: object
  backend_api_handlers_common.ListResponse:
    properties:
      items: {}
      pagination:
        $ref: '#/definitions/backend_api_handlers_common.PaginationMeta'
    type: object
  backend_api_handlers_common.PagedResponse:
    properties:
      data: {}
      pagination:
        $ref: '#/definitions/backend_api_handlers_common.PaginationMeta'
      success:
        type: boolean
    type: object
  backend_api_handlers_common.PaginationMeta:
    properties:
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
      total_page:
        type: integer
    type: object
  backend_api_handlers_common.Response:
    properties:
      data: {}
      error:
        type: string
      message:
        type: string
      success:
        type: boolean
    type: object
  backend_internal_agent.AgentComparisonStats:
    properties:
      agent_id:
        type: string
      agent_type:
        type: string
      avg_cost:
        type: number
      avg_latency_ms:
        type: number
      success_rate:
        type: number
      total_runs:
        type: integer
      total_tokens:
        type: integer
    type: object
  backend_internal_agent.AgentConfig:
    properties:
      activeModelId:
        type: string
      agentType:
        description: Agent 信息
        type: string
      allowedTools:
        description: 工具配置
        items:
          type: string
        type: array
      analysisModelId:
        description: 分析任务：强逻辑
        type: string
      autoToolUse:
        description: 是否允许模型自主调用工具
        type: boolean
      createdAt:
        description: 时间戳
        type: string
      creativeModelId:
        description: 创作任务：擅长写作
        type: string
      deletedAt:
        type: string
      description:
        type: string
      extraConfig:
        additionalProperties: {}
        description: 扩展配置
        type: object
      fallbackActive:
        type: boolean
      fallbackStrategy:
        type: string
      fallbackTimeoutMs:
        type: integer
      id:
        type: string
      knowledgeBaseId:
        description: RAG 配置（Sprint 6）
        type: string
      lastFallbackAt:
        type: string
      maxTokens:
        type: integer
      modelId:
        description: 计算字段（不存储）
        type: string
      modelRouting:
        additionalProperties:
          type: string
        description: 灵活模型路由配置（支持自定义任务类型）
        type: object
      name:
        type: string
      primaryModelId:
        description: 模型配置（主/备用）
        type: string
      promptTemplateId:
        type: string
      ragEnabled:
        description: 是否启用 RAG
        type: boolean
      ragMinScore:
        description: RAG 最小相似度
        type: number
      ragTopK:
        description: RAG 检索数量
        type: integer
      secondaryModelId:
        type: string
      status:
        description: 状态
        type: string
      summaryModelId:
        description: 摘要任务：性价比高
        type: string
      systemPrompt:
        description: 系统提示词
        type: string
      temperature:
        description: 参数
        type: number
      tenantId:
        type: string
      toolModelId:
        description: 任务专用模型（按任务类型路由）
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_agent.AgentDailyStats:
    properties:
      avg_latency_ms:
        type: number
      date:
        type: string
      failed_runs:
        type: integer
      success_runs:
        type: integer
      total_runs:
        type: integer
      total_tokens:
        type: integer
    type: object
  backend_internal_agent.AgentPerformanceStats:
    properties:
      agent_id:
        type: string
      agent_type:
        type: string
      avg_latency_ms:
        type: number
      avg_tokens_per_run:
        type: number
      failed_runs:
        type: integer
      max_latency_ms:
        type: integer
      min_latency_ms:
        type: integer
      p50_latency_ms:
        type: number
      p95_latency_ms:
        type: number
      p99_latency_ms:
        type: number
      success_rate:
        type: number
      success_runs:
        type: integer
      total_runs:
        type: integer
      total_tokens:
        type: integer
    type: object
  backend_internal_agent.ListAgentConfigsResponse:
    properties:
      agents:
        items:
          $ref: '#/definitions/backend_internal_agent.AgentConfig'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  backend_internal_agent.PerformanceSummary:
    properties:
      avg_latency_ms:
        type: number
      daily_trend:
        items:
          $ref: '#/definitions/backend_internal_agent.AgentDailyStats'
        type: array
      recent_failures:
        type: integer
      success_rate:
        type: number
      top_agents:
        items:
          $ref: '#/definitions/backend_internal_agent.AgentComparisonStats'
        type: array
      total_runs:
        type: integer
      total_tokens:
        type: integer
    type: object
  backend_internal_agent_runtime.AgentResult:
    properties:
      cost:
        description: Cost 成本
        type: number
      error:
        description: Error 错误信息（如果失败）
        type: string
      latency_ms:
        description: LatencyMs 延迟（毫秒）
        type: integer
      metadata:
        additionalProperties: {}
        description: Metadata 元数据
        type: object
      output:
        description: Output 输出内容
        type: string
      status:
        description: Status 状态（success, failed, partial）
        type: string
      structured_output:
        description: StructuredOutput 结构化输出 (新增)
      usage:
        allOf:
        - $ref: '#/definitions/backend_internal_agent_runtime.Usage'
        description: Usage Token 使用情况
    type: object
  backend_internal_agent_runtime.Usage:
    properties:
      completion_tokens:
        type: integer
      prompt_tokens:
        type: integer
      total_tokens:
        type: integer
    type: object
  backend_internal_analytics.AuthorDashboard:
    properties:
      consecutive_writing_days:
        description: 连续写作天数
        type: integer
      first_writing_date:
        description: 首次写作日期
        type: string
      period_end:
        type: string
      period_start:
        description: 时间范围
        type: string
      tenant_id:
        type: string
      total_chinese_chars:
        description: 中文字符数
        type: integer
      total_cost:
        description: 总成本
        type: number
      total_documents:
        description: 总文档数
        type: integer
      total_english_words:
        description: 英文单词数
        type: integer
      total_tokens:
        description: Token 消耗
        type: integer
      total_versions:
        description: 总版本数
        type: integer
      total_word_count:
        description: 写作统计
        type: integer
      total_writing_days:
        description: 写作天数统计
        type: integer
      user_id:
        type: string
    type: object
  backend_internal_analytics.DailyWordCount:
    properties:
      date:
        description: 日期 YYYY-MM-DD
        type: string
      documents:
        description: 文档数
        type: integer
      word_count:
        description: 字数
        type: integer
    type: object
  backend_internal_analytics.FeatureUsage:
    properties:
      call_count:
        description: 调用次数
        type: integer
      feature_name:
        description: 功能名称（Agent类型）
        type: string
      percentage:
        description: 占比
        type: number
      tokens_used:
        description: Token 消耗
        type: integer
    type: object
  backend_internal_analytics.HourlyActivity:
    properties:
      activities:
        description: 活动次数
        type: integer
      hour:
        description: 0-23
        type: integer
      word_count:
        description: 字数
        type: integer
    type: object
  backend_internal_analytics.ModelPreference:
    properties:
      call_count:
        description: 调用次数
        type: integer
      model_name:
        description: 模型名称
        type: string
      percentage:
        description: 占比
        type: number
      provider:
        description: 提供商
        type: string
      tokens_used:
        description: Token 消耗
        type: integer
    type: object
  backend_internal_analytics.MonthlyReport:
    properties:
      active_writing_days:
        description: 当月活跃写作天数
        type: integer
      month:
        type: integer
      new_documents:
        description: 当月新增文档
        type: integer
      new_versions:
        description: 当月新增版本
        type: integer
      new_word_count:
        description: 写作统计
        type: integer
      tenant_id:
        type: string
      token_cost:
        description: 当月成本
        type: number
      tokens_used:
        description: Token 消耗
        type: integer
      tokens_used_change:
        description: Token 变化百分比
        type: number
      user_id:
        type: string
      word_count_change:
        description: 与上月对比
        type: number
      year:
        type: integer
    type: object
  backend_internal_analytics.RecentActivity:
    properties:
      activity_type:
        description: ai_call, file_create, file_update
        type: string
      agent_name:
        type: string
      created_at:
        type: string
      description:
        type: string
      file_name:
        type: string
      id:
        type: string
      model_name:
        type: string
      tokens_used:
        type: integer
      word_count:
        type: integer
    type: object
  backend_internal_analytics.TokenTrend:
    properties:
      call_count:
        description: 调用次数
        type: integer
      cost:
        description: 成本
        type: number
      date:
        description: 日期 YYYY-MM-DD
        type: string
      tokens:
        description: Token 数
        type: integer
    type: object
  backend_internal_analytics.WeekdayActivity:
    properties:
      activities:
        description: 活动次数
        type: integer
      weekday:
        description: 0=周日, 1=周一...
        type: integer
      weekday_name:
        description: 周几名称
        type: string
      word_count:
        description: 字数
        type: integer
    type: object
  backend_internal_analytics.WeeklyWordCount:
    properties:
      documents:
        description: 文档数
        type: integer
      week_end:
        description: 周结束日期
        type: string
      week_start:
        description: 周起始日期
        type: string
      word_count:
        description: 字数
        type: integer
    type: object
  backend_internal_analytics.WritingEfficiency:
    properties:
      avg_daily_word_count:
        description: 日均产出
        type: number
      avg_weekly_word_count:
        description: 周均字数
        type: number
      daily_output:
        description: 每日产出趋势
        items:
          $ref: '#/definitions/backend_internal_analytics.DailyWordCount'
        type: array
      tenant_id:
        type: string
      user_id:
        type: string
      weekly_output:
        description: 周产出趋势
        items:
          $ref: '#/definitions/backend_internal_analytics.WeeklyWordCount'
        type: array
    type: object
  backend_internal_analytics.WritingHabits:
    properties:
      avg_writing_speed:
        description: 平均写作速度（字/分钟，基于会话时长估算）
        type: number
      hourly_distribution:
        description: 高产时段分析（按小时统计）
        items:
          $ref: '#/definitions/backend_internal_analytics.HourlyActivity'
        type: array
      peak_hours:
        description: 高产时段（前3名）
        items:
          type: integer
        type: array
      tenant_id:
        type: string
      user_id:
        type: string
      weekday_distribution:
        description: 每周分布
        items:
          $ref: '#/definitions/backend_internal_analytics.WeekdayActivity'
        type: array
    type: object
  backend_internal_auth.CreateAPIKeyRequest:
    properties:
      allowedIps:
        items:
          type: string
        type: array
      expiresIn:
        description: 有效期（天），0 表示永久
        type: integer
      name:
        type: string
      rateLimitPerMinute:
        type: integer
      scopes:
        items:
          type: string
        type: array
      tenantId:
        type: string
      userId:
        type: string
    required:
    - name
    type: object
  backend_internal_auth.TokenPair:
    properties:
      access_token:
        type: string
      expires_in:
        description: 秒
        type: integer
      refresh_token:
        type: string
      token_type:
        type: string
    type: object
  backend_internal_billing.AlertTriggerEvent:
    properties:
      alertId:
        type: string
      alertName:
        type: string
      alertType:
        type: string
      currentValue:
        type: number
      message:
        type: string
      tenantId:
        type: string
      threshold:
        type: number
      triggeredAt:
        type: string
    type: object
  backend_internal_billing.BillingAuditQuery:
    properties:
      endTime:
        type: string
      maxCost:
        type: number
      minCost:
        type: number
      model:
        type: string
      page:
        type: integer
      pageSize:
        type: integer
      provider:
        type: string
      startTime:
        type: string
      status:
        type: string
      tenantId:
        type: string
      userId:
        type: string
    required:
    - tenantId
    type: object
  backend_internal_billing.CostAlert:
    properties:
      alertType:
        description: daily, weekly, monthly, threshold
        type: string
      createdAt:
        type: string
      currentValue:
        type: number
      id:
        type: string
      isEnabled:
        type: boolean
      lastTriggered:
        type: string
      modelName:
        description: 针对特定模型
        type: string
      name:
        type: string
      notifyEmail:
        type: string
      notifyWebhook:
        type: string
      tenantId:
        type: string
      threshold:
        description: 成本阈值
        type: number
      triggerCount:
        type: integer
      updatedAt:
        type: string
      userId:
        description: 针对特定用户
        type: string
    type: object
  backend_internal_billing.CostEstimate:
    properties:
      currency:
        description: 货币单位
        type: string
      inputCost:
        description: 输入成本
        type: number
      inputTokens:
        type: integer
      model:
        type: string
      outputCost:
        description: 输出成本
        type: number
      outputTokens:
        type: integer
      pricePerKInput:
        description: 每1K输入价格
        type: number
      pricePerKOutput:
        description: 每1K输出价格
        type: number
      provider:
        type: string
      totalCost:
        description: 总成本（积分）
        type: integer
    type: object
  backend_internal_billing.CostEstimateRequest:
    properties:
      inputTokens:
        minimum: 0
        type: integer
      model:
        type: string
      outputTokens:
        minimum: 0
        type: integer
      provider:
        type: string
      tenantId:
        type: string
    required:
    - inputTokens
    - model
    - provider
    - tenantId
    type: object
  backend_internal_billing.CostReport:
    properties:
      averageCostPerCall:
        type: number
      byModel:
        items:
          $ref: '#/definitions/backend_internal_billing.ModelCostItem'
        type: array
      byProvider:
        items:
          $ref: '#/definitions/backend_internal_billing.ProviderCostItem'
        type: array
      byUser:
        items:
          $ref: '#/definitions/backend_internal_billing.UserCostItem'
        type: array
      dailyCost:
        type: number
      dailyTrend:
        items:
          $ref: '#/definitions/backend_internal_billing.DailyCostItem'
        type: array
      endDate:
        type: string
      generatedAt:
        type: string
      projectedMonthly:
        type: number
      startDate:
        type: string
      tenantId:
        type: string
      totalCalls:
        type: integer
      totalCost:
        type: number
      totalTokens:
        type: integer
    type: object
  backend_internal_billing.CostReportRequest:
    properties:
      endDate:
        type: string
      groupBy:
        description: day, week, month, model, user
        type: string
      modelName:
        type: string
      startDate:
        type: string
      tenantId:
        type: string
      userId:
        type: string
    required:
    - tenantId
    type: object
  backend_internal_billing.CreateAlertRequest:
    properties:
      alertType:
        type: string
      modelName:
        type: string
      name:
        type: string
      notifyEmail:
        type: string
      notifyWebhook:
        type: string
      tenantId:
        type: string
      threshold:
        type: number
      userId:
        type: string
    required:
    - alertType
    - name
    - tenantId
    - threshold
    type: object
  backend_internal_billing.CreatePricingRequest:
    properties:
      currency:
        type: string
      inputPrice:
        minimum: 0
        type: number
      model:
        type: string
      outputPrice:
        minimum: 0
        type: number
      provider:
        type: string
      remark:
        type: string
      tenantId:
        type: string
    required:
    - inputPrice
    - model
    - outputPrice
    - provider
    - tenantId
    type: object
  backend_internal_billing.DailyCostItem:
    properties:
      callCount:
        type: integer
      cost:
        type: number
      date:
        type: string
      tokens:
        type: integer
    type: object
  backend_internal_billing.ModelCostItem:
    properties:
      callCount:
        type: integer
      model:
        type: string
      percentage:
        type: number
      provider:
        type: string
      totalCost:
        type: number
      totalTokens:
        type: integer
    type: object
  backend_internal_billing.ModelPricing:
    properties:
      createdAt:
        type: string
      currency:
        description: credits, usd
        type: string
      id:
        type: string
      inputPrice:
        description: 每1K token输入价格（积分）
        type: number
      isActive:
        type: boolean
      model:
        description: gpt-4, claude-3-opus, etc.
        type: string
      outputPrice:
        description: 每1K token输出价格（积分）
        type: number
      priority:
        description: 优先级，用于多租户定价覆盖
        type: integer
      provider:
        description: openai, anthropic, deepseek, etc.
        type: string
      remark:
        type: string
      tenantId:
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_billing.PricingRule:
    properties:
      fixedCost:
        description: 固定费用
        type: number
      maxTokens:
        description: 最大token数
        type: integer
      minTokens:
        description: 最小token数
        type: integer
      multiplier:
        description: 价格倍率
        type: number
    type: object
  backend_internal_billing.PricingStrategy:
    properties:
      createdAt:
        type: string
      description:
        type: string
      id:
        type: string
      isActive:
        type: boolean
      isDefault:
        type: boolean
      name:
        type: string
      rules:
        description: 计算规则（JSON存储）
        items:
          $ref: '#/definitions/backend_internal_billing.PricingRule'
        type: array
      strategyType:
        description: flat, tiered, volume
        type: string
      tenantId:
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_billing.ProviderCostItem:
    properties:
      callCount:
        type: integer
      percentage:
        type: number
      provider:
        type: string
      totalCost:
        type: number
    type: object
  backend_internal_billing.TokenCalculatorRequest:
    properties:
      model:
        type: string
      provider:
        type: string
      tenantId:
        type: string
      text:
        description: 文本内容（可选，自动计算token）
        type: string
      tokens:
        description: 直接指定token数
        type: integer
      type:
        description: input, output, both
        type: string
    required:
    - model
    - provider
    type: object
  backend_internal_billing.TokenCalculatorResult:
    properties:
      creditCost:
        description: 积分
        type: integer
      currency:
        type: string
      estimatedCost:
        description: 美元
        type: number
      model:
        type: string
      pricePerKToken:
        type: number
      provider:
        type: string
      tokens:
        type: integer
    type: object
  backend_internal_billing.UpdateAlertRequest:
    properties:
      isEnabled:
        type: boolean
      name:
        type: string
      notifyEmail:
        type: string
      notifyWebhook:
        type: string
      threshold:
        type: number
    type: object
  backend_internal_billing.UpdatePricingRequest:
    properties:
      inputPrice:
        type: number
      isActive:
        type: boolean
      outputPrice:
        type: number
      remark:
        type: string
    type: object
  backend_internal_billing.UserCostItem:
    properties:
      callCount:
        type: integer
      percentage:
        type: number
      totalCost:
        type: number
      userId:
        type: string
      username:
        type: string
    type: object
  backend_internal_bookparser.AnalysisDimension:
    enum:
    - style
    - plot
    - character
    - emotion
    - meme
    - outline
    - all
    type: string
    x-enum-comments:
      DimensionAll: 全部维度
      DimensionCharacter: 人物塑造
      DimensionEmotion: 读者情绪
      DimensionMeme: 热梗搞笑
      DimensionOutline: 章节大纲
      DimensionPlot: 情节设计
      DimensionStyle: 文风叙事
    x-enum-descriptions:
    - 文风叙事
    - 情节设计
    - 人物塑造
    - 读者情绪
    - 热梗搞笑
    - 章节大纲
    - 全部维度
    x-enum-varnames:
    - DimensionStyle
    - DimensionPlot
    - DimensionCharacter
    - DimensionEmotion
    - DimensionMeme
    - DimensionOutline
    - DimensionAll
  backend_internal_bookparser.AnalysisResult:
    properties:
      knowledge:
        items:
          $ref: '#/definitions/backend_internal_bookparser.BookKnowledge'
        type: array
      results:
        additionalProperties: {}
        type: object
      status:
        $ref: '#/definitions/backend_internal_bookparser.TaskStatus'
      summary:
        type: string
      task_id:
        type: string
      title:
        type: string
    type: object
  backend_internal_bookparser.BookKnowledge:
    properties:
      category:
        description: 子分类
        type: string
      content:
        type: string
      created_at:
        type: string
      dimension:
        allOf:
        - $ref: '#/definitions/backend_internal_bookparser.AnalysisDimension'
        description: 知识分类
      example:
        description: 示例
        type: string
      id:
        type: string
      is_vectorized:
        description: 向量化状态
        type: boolean
      rating:
        type: number
      source_title:
        type: string
      tags:
        description: 标签
        items:
          type: integer
        type: array
      task_id:
        type: string
      technique:
        description: 可复用技法
        type: string
      tenant_id:
        type: string
      title:
        description: 知识内容
        type: string
      updated_at:
        type: string
      use_count:
        description: 使用统计
        type: integer
      vector_id:
        type: string
    type: object
  backend_internal_bookparser.BookParserTask:
    properties:
      completed_at:
        type: string
      content:
        type: string
      content_hash:
        type: string
      created_at:
        type: string
      dimensions:
        description: 分析配置
        items:
          type: integer
        type: array
      done_chunks:
        type: integer
      error_msg:
        type: string
      id:
        type: string
      model_id:
        type: string
      progress:
        description: 0-100
        type: integer
      source_type:
        description: upload, url, text
        type: string
      source_url:
        type: string
      started_at:
        description: 时间
        type: string
      status:
        allOf:
        - $ref: '#/definitions/backend_internal_bookparser.TaskStatus'
        description: 任务状态
      tenant_id:
        type: string
      title:
        description: 任务信息
        type: string
      tokens_used:
        type: integer
      total_chunks:
        description: 统计信息
        type: integer
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  backend_internal_bookparser.CreateTaskRequest:
    properties:
      content:
        type: string
      dimensions:
        description: 为空则分析全部维度
        items:
          $ref: '#/definitions/backend_internal_bookparser.AnalysisDimension'
        type: array
      model_id:
        type: string
      source_type:
        enum:
        - upload
        - url
        - text
        type: string
      source_url:
        type: string
      title:
        type: string
    required:
    - source_type
    - title
    type: object
  backend_internal_bookparser.SearchKnowledgeRequest:
    properties:
      category:
        type: string
      dimension:
        $ref: '#/definitions/backend_internal_bookparser.AnalysisDimension'
      limit:
        type: integer
      query:
        type: string
      tags:
        items:
          type: string
        type: array
    required:
    - query
    type: object
  backend_internal_bookparser.TaskProgress:
    properties:
      done_chunks:
        type: integer
      error_msg:
        type: string
      progress:
        type: integer
      status:
        $ref: '#/definitions/backend_internal_bookparser.TaskStatus'
      task_id:
        type: string
      tokens_used:
        type: integer
      total_chunks:
        type: integer
    type: object
  backend_internal_bookparser.TaskStatus:
    enum:
    - pending
    - running
    - completed
    - failed
    - cancelled
    type: string
    x-enum-varnames:
    - TaskStatusPending
    - TaskStatusRunning
    - TaskStatusCompleted
    - TaskStatusFailed
    - TaskStatusCancelled
  backend_internal_codesearch.CodeReference:
    properties:
      column:
        type: integer
      context:
        type: string
      file_path:
        type: string
      line:
        type: integer
      reference_type:
        description: definition, usage, import, type
        type: string
      symbol:
        type: string
    type: object
  backend_internal_codesearch.CodeSymbol:
    properties:
      column:
        type: integer
      context:
        type: string
      end_column:
        type: integer
      end_line:
        type: integer
      file_path:
        type: string
      language:
        type: string
      line:
        type: integer
      name:
        type: string
      signature:
        type: string
      type:
        $ref: '#/definitions/backend_internal_codesearch.CodeSymbolType'
    type: object
  backend_internal_codesearch.CodeSymbolType:
    enum:
    - function
    - class
    - method
    - variable
    - constant
    - interface
    - type
    - enum
    - import
    - export
    - struct
    type: string
    x-enum-varnames:
    - SymbolFunction
    - SymbolClass
    - SymbolMethod
    - SymbolVariable
    - SymbolConstant
    - SymbolInterface
    - SymbolType
    - SymbolEnum
    - SymbolImport
    - SymbolExport
    - SymbolStruct
  backend_internal_codesearch.FileOutline:
    properties:
      file_path:
        type: string
      language:
        type: string
      symbols:
        items:
          $ref: '#/definitions/backend_internal_codesearch.CodeSymbol'
        type: array
    type: object
  backend_internal_codesearch.SearchResult:
    properties:
      column:
        type: integer
      content:
        type: string
      file_path:
        type: string
      line:
        type: integer
      similarity:
        type: number
    type: object
  backend_internal_codesearch.SemanticSearchResult:
    properties:
      query:
        type: string
      references:
        items:
          $ref: '#/definitions/backend_internal_codesearch.CodeReference'
        type: array
      search_time_ms:
        type: integer
      symbols:
        items:
          $ref: '#/definitions/backend_internal_codesearch.CodeSymbol'
        type: array
      total_results:
        type: integer
    type: object
  backend_internal_compliance.AgeRating:
    enum:
    - all
    - teen
    - mature
    - adult
    type: string
    x-enum-comments:
      RatingAdult: 仅成人
      RatingAll: 全年龄
      RatingMature: 18+
      RatingTeen: 13+
    x-enum-descriptions:
    - 全年龄
    - 13+
    - 18+
    - 仅成人
    x-enum-varnames:
    - RatingAll
    - RatingTeen
    - RatingMature
    - RatingAdult
  backend_internal_compliance.ReviewVerificationRequest:
    properties:
      action:
        description: approve, reject
        type: string
      rejectReason:
        type: string
      reviewerId:
        type: string
      verificationId:
        type: string
    required:
    - action
    - verificationId
    type: object
  backend_internal_compliance.RunComplianceCheckRequest:
    properties:
      checkType:
        description: text, image, copyright, all
        type: string
      content:
        description: 要检查的内容
        type: string
      contentId:
        type: string
      contentType:
        type: string
      tenantId:
        type: string
    required:
    - checkType
    - contentId
    - contentType
    type: object
  backend_internal_compliance.SetContentRatingRequest:
    properties:
      contentId:
        type: string
      contentType:
        type: string
      hasDrug:
        type: boolean
      hasGambling:
        type: boolean
      hasHorror:
        type: boolean
      hasPolitical:
        type: boolean
      hasSexual:
        type: boolean
      hasViolence:
        type: boolean
      rating:
        $ref: '#/definitions/backend_internal_compliance.AgeRating'
      ratingReason:
        type: string
      tenantId:
        type: string
    required:
    - contentId
    - contentType
    - rating
    type: object
  backend_internal_compliance.SubmitVerificationRequest:
    properties:
      birthday:
        type: string
      businessLicense:
        type: string
      companyName:
        description: 企业认证
        type: string
      faceImage:
        type: string
      gender:
        type: string
      idBackImage:
        type: string
      idFrontImage:
        type: string
      idNumber:
        type: string
      realName:
        type: string
      tenantId:
        type: string
      userId:
        type: string
      verifyType:
        type: string
    required:
    - idNumber
    - realName
    - verifyType
    type: object
  backend_internal_content.CreateCategoryRequest:
    properties:
      code:
        type: string
      coverImage:
        type: string
      description:
        type: string
      icon:
        type: string
      name:
        type: string
      parentId:
        type: string
      tenantId:
        type: string
    required:
    - name
    type: object
  backend_internal_content.CreateReportRequest:
    properties:
      evidence:
        type: string
      reason:
        type: string
      reportType:
        type: string
      reporterId:
        type: string
      tenantId:
        type: string
      workId:
        type: string
    required:
    - reason
    - reportType
    - workId
    type: object
  backend_internal_content.HandleReportRequest:
    properties:
      action:
        description: ignore, warn, offline, ban
        type: string
      handleNote:
        type: string
      handlerId:
        type: string
      reportId:
        type: string
    required:
    - action
    - reportId
    type: object
  backend_internal_content.PublishStatus:
    enum:
    - draft
    - pending
    - published
    - rejected
    - offline
    type: string
    x-enum-comments:
      PublishStatusDraft: 草稿
      PublishStatusOffline: 已下架
      PublishStatusPending: 待审核
      PublishStatusPublished: 已发布
      PublishStatusRejected: 已拒绝
    x-enum-descriptions:
    - 草稿
    - 待审核
    - 已发布
    - 已拒绝
    - 已下架
    x-enum-varnames:
    - PublishStatusDraft
    - PublishStatusPending
    - PublishStatusPublished
    - PublishStatusRejected
    - PublishStatusOffline
  backend_internal_content.PublishWorkRequest:
    properties:
      allowComment:
        type: boolean
      categoryId:
        type: string
      content:
        type: string
      coverImage:
        type: string
      fileId:
        type: string
      summary:
        type: string
      tags:
        items:
          type: string
        type: array
      tenantId:
        type: string
      title:
        type: string
      userId:
        type: string
      workspaceId:
        type: string
    required:
    - title
    type: object
  backend_internal_content.RecommendWorkRequest:
    properties:
      isFeatured:
        type: boolean
      isRecommend:
        type: boolean
      sortWeight:
        type: integer
      workId:
        type: string
    required:
    - workId
    type: object
  backend_internal_content.ReviewWorkRequest:
    properties:
      action:
        description: approve, reject
        type: string
      rejectReason:
        type: string
      reviewerId:
        type: string
      workId:
        type: string
    required:
    - action
    - workId
    type: object
  backend_internal_content.SearchWorksRequest:
    properties:
      categoryIds:
        description: 分类ID列表（OR关系）
        items:
          type: string
        type: array
      isFeatured:
        description: 是否精选
        type: boolean
      isRecommend:
        description: 是否推荐
        type: boolean
      keyword:
        description: 关键词搜索（支持标题、摘要、内容全文搜索）
        type: string
      maxWordCount:
        description: 最大字数
        type: integer
      minLikeCount:
        description: 最小点赞数
        type: integer
      minViewCount:
        description: 统计筛选
        type: integer
      minWordCount:
        description: 最小字数
        type: integer
      page:
        type: integer
      pageSize:
        type: integer
      publishedAfter:
        description: 日期范围
        type: string
      publishedBefore:
        description: 发布时间结束
        type: string
      sortBy:
        description: 排序和分页
        type: string
      sortDesc:
        description: 是否降序，默认true
        type: boolean
      status:
        allOf:
        - $ref: '#/definitions/backend_internal_content.PublishStatus'
        description: 发布状态
      tags:
        description: 标签列表（AND关系）
        items:
          type: string
        type: array
      tenantId:
        type: string
      userId:
        description: 高级筛选
        type: string
    type: object
  backend_internal_content.UpdateWorkRequest:
    properties:
      allowComment:
        type: boolean
      categoryId:
        type: string
      content:
        type: string
      coverImage:
        type: string
      summary:
        type: string
      tags:
        items:
          type: string
        type: array
      title:
        type: string
    type: object
  backend_internal_fragment.BatchOperationRequest:
    properties:
      ids:
        items:
          type: string
        minItems: 1
        type: array
      operation:
        enum:
        - complete
        - archive
        - delete
        - change_status
        type: string
      status:
        allOf:
        - $ref: '#/definitions/backend_internal_fragment.FragmentStatus'
        description: 用于 change_status
    required:
    - ids
    - operation
    type: object
  backend_internal_fragment.CreateFragmentRequest:
    properties:
      chapter_id:
        type: string
      content:
        type: string
      due_date:
        type: string
      metadata:
        type: string
      priority:
        type: integer
      tags:
        items:
          type: string
        type: array
      title:
        maxLength: 200
        type: string
      type:
        allOf:
        - $ref: '#/definitions/backend_internal_fragment.FragmentType'
        enum:
        - inspiration
        - material
        - todo
        - note
        - reference
      work_id:
        type: string
      workspace_id:
        type: string
    required:
    - content
    - title
    - type
    type: object
  backend_internal_fragment.Fragment:
    properties:
      chapter_id:
        description: 关联章节
        type: string
      completed_at:
        description: 完成时间
        type: string
      content:
        description: 内容
        type: string
      created_at:
        type: string
      due_date:
        description: 截止日期
        type: string
      id:
        type: string
      metadata:
        description: 元数据（JSON）
        type: string
      priority:
        description: 优先级（0-5）
        type: integer
      sort_order:
        description: 排序
        type: integer
      status:
        allOf:
        - $ref: '#/definitions/backend_internal_fragment.FragmentStatus'
        description: 片段状态
      tags:
        description: 标签（逗号分隔）
        type: string
      tenant_id:
        type: string
      title:
        description: 标题
        type: string
      type:
        allOf:
        - $ref: '#/definitions/backend_internal_fragment.FragmentType'
        description: 片段类型
      updated_at:
        type: string
      user_id:
        type: string
      work_id:
        description: 关联作品
        type: string
      workspace_id:
        description: 关联工作空间
        type: string
    type: object
  backend_internal_fragment.FragmentStatsResponse:
    properties:
      by_status:
        additionalProperties:
          type: integer
        type: object
      by_type:
        additionalProperties:
          type: integer
        type: object
      completed_today:
        type: integer
      overdue_todos:
        type: integer
      pending_todos:
        type: integer
      total_count:
        type: integer
    type: object
  backend_internal_fragment.FragmentStatus:
    enum:
    - pending
    - completed
    - archived
    type: string
    x-enum-comments:
      FragmentStatusArchived: 已归档
      FragmentStatusCompleted: 已完成
      FragmentStatusPending: 待处理
    x-enum-descriptions:
    - 待处理
    - 已完成
    - 已归档
    x-enum-varnames:
    - FragmentStatusPending
    - FragmentStatusCompleted
    - FragmentStatusArchived
  backend_internal_fragment.FragmentType:
    enum:
    - inspiration
    - material
    - todo
    - note
    - reference
    type: string
    x-enum-comments:
      FragmentTypeInspiration: 灵感片段
      FragmentTypeMaterial: 素材片段
      FragmentTypeNote: 笔记
      FragmentTypeReference: 参考资料
      FragmentTypeTodo: 待办事项
    x-enum-descriptions:
    - 灵感片段
    - 素材片段
    - 待办事项
    - 笔记
    - 参考资料
    x-enum-varnames:
    - FragmentTypeInspiration
    - FragmentTypeMaterial
    - FragmentTypeTodo
    - FragmentTypeNote
    - FragmentTypeReference
  backend_internal_fragment.UpdateFragmentRequest:
    properties:
      content:
        type: string
      due_date:
        type: string
      metadata:
        type: string
      priority:
        type: integer
      status:
        $ref: '#/definitions/backend_internal_fragment.FragmentStatus'
      tags:
        items:
          type: string
        type: array
      title:
        type: string
    type: object
  backend_internal_memo.CreateMemoRequest:
    properties:
      category:
        type: string
      color:
        type: string
      content:
        type: string
      due_date:
        type: string
      metadata:
        additionalProperties: {}
        type: object
      priority:
        $ref: '#/definitions/backend_internal_memo.MemoPriority'
      reminder:
        type: string
      tags:
        items:
          type: string
        type: array
      title:
        type: string
    required:
    - title
    type: object
  backend_internal_memo.MemoPriority:
    enum:
    - low
    - normal
    - high
    - urgent
    type: string
    x-enum-varnames:
    - PriorityLow
    - PriorityNormal
    - PriorityHigh
    - PriorityUrgent
  backend_internal_memo.MemoStatus:
    enum:
    - active
    - completed
    - archived
    type: string
    x-enum-varnames:
    - StatusActive
    - StatusCompleted
    - StatusArchived
  backend_internal_memo.SearchRequest:
    properties:
      category:
        type: string
      limit:
        type: integer
      offset:
        type: integer
      priority:
        $ref: '#/definitions/backend_internal_memo.MemoPriority'
      query:
        type: string
      status:
        $ref: '#/definitions/backend_internal_memo.MemoStatus'
      tags:
        items:
          type: string
        type: array
    required:
    - query
    type: object
  backend_internal_memo.UpdateMemoRequest:
    properties:
      category:
        type: string
      color:
        type: string
      content:
        type: string
      due_date:
        type: string
      metadata:
        additionalProperties: {}
        type: object
      priority:
        $ref: '#/definitions/backend_internal_memo.MemoPriority'
      reminder:
        type: string
      tags:
        items:
          type: string
        type: array
      title:
        type: string
    type: object
  backend_internal_metrics.ModelCallLogsRequest:
    properties:
      agentID:
        type: string
      endTime:
        type: string
      modelID:
        type: string
      page:
        description: 页码，从1开始
        minimum: 1
        type: integer
      page_size:
        description: 每页数量
        minimum: 1
        type: integer
      provider:
        type: string
      startTime:
        type: string
      status:
        type: string
      tenantID:
        type: string
      userID:
        type: string
      workflowID:
        type: string
    type: object
  backend_internal_metrics.WorkflowExecutionLogsRequest:
    properties:
      endTime:
        type: string
      page:
        description: 页码，从1开始
        minimum: 1
        type: integer
      page_size:
        description: 每页数量
        minimum: 1
        type: integer
      startTime:
        type: string
      status:
        type: string
      tenantID:
        type: string
      userID:
        type: string
      workflowID:
        type: string
    type: object
  backend_internal_models.AuditLog:
    properties:
      created_at:
        type: string
      description:
        type: string
      event_category:
        type: string
      event_level:
        type: string
      event_type:
        type: string
      id:
        type: string
      ip_address:
        type: string
      metadata:
        additionalProperties: true
        type: object
      request_method:
        type: string
      request_path:
        type: string
      status_code:
        type: integer
      tenant_id:
        type: string
      user_agent:
        type: string
      user_id:
        type: string
    type: object
  backend_internal_models.CreateModelRequest:
    properties:
      allowedTiers:
        description: 会员等级权限
        items:
          type: string
        type: array
      apiformat:
        description: openai, claude, gemini, deepseek, custom
        type: string
      apiversion:
        type: string
      baseURL:
        description: API 配置
        type: string
      capabilities:
        additionalProperties: {}
        description: 能力配置
        type: object
      category:
        description: chat, image, audio, video, embedding, rerank
        type: string
      contextWindow:
        type: integer
      defaultCredentialID:
        description: 凭证配置
        type: string
      description:
        type: string
      features:
        $ref: '#/definitions/backend_internal_models.ModelFeatures'
      inputCostPer1K:
        description: 成本配置
        format: float64
        type: number
      isActive:
        type: boolean
      isBuiltin:
        type: boolean
      latencySloMs:
        type: integer
      maxTokens:
        description: 限制配置
        type: integer
      metadata:
        additionalProperties: {}
        description: 元数据
        type: object
      modelIdentifier:
        type: string
      name:
        type: string
      outputCostPer1K:
        format: float64
        type: number
      provider:
        type: string
      rateLimitPerMin:
        type: integer
      region:
        type: string
      status:
        description: 状态配置
        type: string
      supportedLanguages:
        description: 语言支持
        items:
          type: string
        type: array
      supportsFunctionCalling:
        type: boolean
      supportsStreaming:
        type: boolean
      tenantID:
        type: string
      type:
        type: string
    type: object
  backend_internal_models.Document:
    properties:
      char_count:
        description: 字符数
        type: integer
      chunk_count:
        description: 分块数量
        type: integer
      content:
        type: string
      content_type:
        description: text/plain, text/markdown, application/pdf, etc.
        type: string
      created_at:
        type: string
      created_by:
        type: string
      error_message:
        description: 错误信息
        type: string
      file_size:
        description: 文件大小（字节）
        type: integer
      id:
        type: string
      knowledge_base_id:
        type: string
      metadata:
        allOf:
        - $ref: '#/definitions/backend_pkg_types.JSONMap'
        description: 元数据（作者、创建时间等）
      source:
        description: 来源（URL、文件路径等）
        type: string
      source_type:
        description: file, url, manual
        type: string
      status:
        description: pending, processing, completed, failed
        type: string
      tenant_id:
        type: string
      title:
        type: string
      updated_at:
        type: string
      word_count:
        description: 词数
        type: integer
    type: object
  backend_internal_models.KnowledgeBase:
    properties:
      chunk_count:
        description: 分块数量
        type: integer
      config:
        allOf:
        - $ref: '#/definitions/backend_pkg_types.JSONMap'
        description: 配置信息（如分块大小、重叠等）
      created_at:
        type: string
      created_by:
        type: string
      description:
        type: string
      doc_count:
        description: 文档数量
        type: integer
      id:
        type: string
      metadata:
        allOf:
        - $ref: '#/definitions/backend_pkg_types.JSONMap'
        description: 元数据
      name:
        type: string
      status:
        description: active, inactive
        type: string
      tenant_id:
        type: string
      type:
        description: document, url, api, database
        type: string
      updated_at:
        type: string
      updated_by:
        type: string
    type: object
  backend_internal_models.ModelCredential:
    properties:
      baseUrl:
        type: string
      ciphertext:
        items:
          type: integer
        type: array
      createdAt:
        type: string
      createdBy:
        type: string
      extraHeaders:
        additionalProperties: {}
        type: object
      id:
        type: string
      modelId:
        type: string
      name:
        type: string
      provider:
        type: string
      status:
        type: string
      tenantId:
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_models.ModelFeatures:
    properties:
      cache:
        type: boolean
      functionCalling:
        type: boolean
      jsonMode:
        type: boolean
      streaming:
        type: boolean
      vision:
        type: boolean
    type: object
  backend_internal_models.UpdateDocumentRequest:
    properties:
      content:
        type: string
      metadata:
        additionalProperties:
          type: string
        type: object
      status:
        type: string
      title:
        type: string
    type: object
  backend_internal_models.UpdateModelRequest:
    properties:
      allowedTiers:
        description: 会员等级权限
        items:
          type: string
        type: array
      apiformat:
        type: string
      apiversion:
        type: string
      baseURL:
        description: API 配置
        type: string
      capabilities:
        additionalProperties: {}
        description: 能力配置
        type: object
      category:
        type: string
      contextWindow:
        type: integer
      defaultCredentialID:
        description: 凭证配置
        type: string
      description:
        type: string
      features:
        $ref: '#/definitions/backend_internal_models.ModelFeatures'
      inputCostPer1K:
        description: 成本配置
        format: float64
        type: number
      isActive:
        type: boolean
      latencySloMs:
        type: integer
      maxTokens:
        description: 限制配置
        type: integer
      metadata:
        additionalProperties: {}
        description: 元数据
        type: object
      name:
        type: string
      outputCostPer1K:
        format: float64
        type: number
      rateLimitPerMin:
        type: integer
      region:
        type: string
      status:
        description: 状态配置
        type: string
      supportedLanguages:
        description: 语言支持
        items:
          type: string
        type: array
      supportsFunctionCalling:
        type: boolean
      supportsStreaming:
        type: boolean
    type: object
  backend_internal_moderation.AIFinding:
    properties:
      category:
        description: 问题类别
        type: string
      confidence:
        description: 置信度
        type: number
      description:
        description: 问题描述
        type: string
      position:
        description: 问题位置
        type: string
      severity:
        description: 严重程度
        type: string
      suggestion:
        description: 修改建议
        type: string
    type: object
  backend_internal_moderation.BatchWordRequest:
    properties:
      action:
        type: string
      category:
        type: string
      level:
        type: string
      words:
        items:
          type: string
        type: array
    required:
    - category
    - words
    type: object
  backend_internal_moderation.FilterResult:
    properties:
      filtered:
        description: 过滤后内容
        type: string
      hasSensitive:
        description: 是否包含敏感词
        type: boolean
      matches:
        description: 匹配的敏感词
        items:
          $ref: '#/definitions/backend_internal_moderation.MatchedWord'
        type: array
      original:
        description: 原始内容
        type: string
    type: object
  backend_internal_moderation.MatchedWord:
    properties:
      action:
        type: string
      category:
        type: string
      level:
        type: string
      position:
        type: integer
      word:
        type: string
    type: object
  backend_internal_moderation.ModerationRecord:
    properties:
      action:
        allOf:
        - $ref: '#/definitions/backend_internal_moderation.ReviewAction'
        description: 审核结果
      comment:
        description: 审核意见
        type: string
      decision:
        description: 决定：approve, reject, revision, escalate
        type: string
      id:
        type: string
      level:
        description: 审核级别
        type: integer
      punishment:
        description: 处理措施
        type: string
      reason:
        description: 拒绝/修改原因
        type: string
      reviewedAt:
        description: 时间
        type: string
      reviewerId:
        description: 审核员信息
        type: string
      reviewerName:
        type: string
      tags:
        description: 问题标签
        items:
          type: string
        type: array
      taskId:
        type: string
      tenantId:
        type: string
      violationLevel:
        description: 违规级别
        type: string
      violationType:
        description: 违规信息
        type: string
    type: object
  backend_internal_moderation.ModerationRule:
    properties:
      action:
        description: flag, block, auto_reject
        type: string
      aiEnabled:
        description: AI 审核配置
        type: boolean
      aiThreshold:
        description: AI 风险阈值
        type: number
      condition:
        description: 规则条件
        type: string
      contentType:
        description: 适用内容类型
        type: string
      createdAt:
        type: string
      description:
        type: string
      id:
        type: string
      isActive:
        type: boolean
      name:
        type: string
      priority:
        type: integer
      requireLevels:
        description: 多级审核配置
        type: integer
      ruleType:
        description: 规则配置
        type: string
      tenantId:
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_moderation.ModerationStats:
    properties:
      aiReviewRate:
        description: AI 预审率
        type: number
      approvedTasks:
        type: integer
      avgReviewTime:
        description: 平均审核时间（小时）
        type: number
      byContentType:
        additionalProperties:
          format: int64
          type: integer
        type: object
      byRiskLevel:
        additionalProperties:
          format: int64
          type: integer
        type: object
      endDate:
        type: string
      escalationRate:
        description: 升级率
        type: number
      pendingTasks:
        type: integer
      period:
        description: daily, weekly, monthly
        type: string
      rejectedTasks:
        type: integer
      startDate:
        type: string
      tenantId:
        type: string
      totalTasks:
        type: integer
    type: object
  backend_internal_moderation.ModerationTask:
    properties:
      aiFindings:
        items:
          $ref: '#/definitions/backend_internal_moderation.AIFinding'
        type: array
      aiReviewed:
        description: AI 预审结果
        type: boolean
      aiRiskLevel:
        description: safe, low, medium, high
        type: string
      aiRiskScore:
        description: 0-100
        type: number
      assignedAt:
        type: string
      assignedTo:
        description: 分配信息
        type: string
      content:
        description: 待审核内容
        type: string
      contentId:
        description: 关联的内容ID
        type: string
      contentMeta:
        additionalProperties: {}
        description: 内容元信息
        type: object
      contentType:
        description: 内容信息
        type: string
      createdAt:
        description: 时间戳
        type: string
      currentLevel:
        description: 当前审核级别
        type: integer
      deadline:
        description: 截止时间
        type: string
      id:
        type: string
      maxLevel:
        description: 最大审核级别
        type: integer
      priority:
        description: 优先级：0-低，1-中，2-高
        type: integer
      status:
        allOf:
        - $ref: '#/definitions/backend_internal_moderation.TaskStatus'
        description: 审核状态
      submitterId:
        description: 提交者信息
        type: string
      submitterName:
        type: string
      tenantId:
        type: string
      title:
        description: 内容标题
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_moderation.ReviewAction:
    enum:
    - approve
    - reject
    - revision
    - escalate
    - reassign
    type: string
    x-enum-comments:
      ActionApprove: 通过
      ActionEscalate: 升级到上级
      ActionReassign: 重新分配
      ActionReject: 拒绝
      ActionRevision: 要求修改
    x-enum-descriptions:
    - 通过
    - 拒绝
    - 要求修改
    - 升级到上级
    - 重新分配
    x-enum-varnames:
    - ActionApprove
    - ActionReject
    - ActionRevision
    - ActionEscalate
    - ActionReassign
  backend_internal_moderation.ReviewRequest:
    properties:
      action:
        $ref: '#/definitions/backend_internal_moderation.ReviewAction'
      comment:
        type: string
      punishment:
        type: string
      reason:
        type: string
      tags:
        items:
          type: string
        type: array
      taskId:
        type: string
    required:
    - action
    - taskId
    type: object
  backend_internal_moderation.SensitiveWord:
    properties:
      action:
        description: 动作：flag, replace, block
        type: string
      category:
        description: 类别：politics, porn, violence, etc.
        type: string
      createdAt:
        type: string
      createdBy:
        type: string
      id:
        type: string
      isActive:
        type: boolean
      level:
        description: 级别：low, medium, high
        type: string
      replace:
        description: 替换词
        type: string
      tenantId:
        type: string
      updatedAt:
        type: string
      word:
        type: string
    type: object
  backend_internal_moderation.SubmitContentRequest:
    properties:
      content:
        type: string
      contentId:
        type: string
      contentMeta:
        additionalProperties: {}
        type: object
      contentType:
        type: string
      priority:
        type: integer
      title:
        type: string
    required:
    - content
    - contentId
    - contentType
    type: object
  backend_internal_moderation.TaskStatus:
    enum:
    - pending
    - reviewing
    - approved
    - rejected
    - revision
    - escalated
    type: string
    x-enum-comments:
      TaskStatusApproved: 已通过
      TaskStatusEscalated: 已升级
      TaskStatusPending: 待审核
      TaskStatusRejected: 已拒绝
      TaskStatusReviewing: 审核中
      TaskStatusRevision: 需修改
    x-enum-descriptions:
    - 待审核
    - 审核中
    - 已通过
    - 已拒绝
    - 需修改
    - 已升级
    x-enum-varnames:
    - TaskStatusPending
    - TaskStatusReviewing
    - TaskStatusApproved
    - TaskStatusRejected
    - TaskStatusRevision
    - TaskStatusEscalated
  backend_internal_multimodel.DrawHistory:
    properties:
      agent_type:
        type: string
      best_model_id:
        type: string
      created_at:
        type: string
      id:
        type: string
      input_prompt:
        description: 输入提示词
        type: string
      model_ids:
        description: JSON数组
        type: string
      results:
        description: JSON结果数组
        type: string
      success_rate:
        type: number
      tenant_id:
        type: string
      total_time_ms:
        type: integer
      user_id:
        type: string
    type: object
  backend_internal_multimodel.DrawRequest:
    properties:
      agent_type:
        description: Agent类型（plot, writer等）
        type: string
      content:
        description: 输入内容
        type: string
      extra_params:
        additionalProperties: {}
        description: 额外参数
        type: object
      max_tokens:
        description: 最大token（可选）
        type: integer
      model_ids:
        description: 要调用的模型ID列表（2-5个）
        items:
          type: string
        maxItems: 5
        minItems: 2
        type: array
      temperature:
        description: 温度（可选）
        type: number
    required:
    - agent_type
    - content
    - model_ids
    type: object
  backend_internal_multimodel.DrawResponse:
    properties:
      best_model_id:
        description: 最佳模型ID
        type: string
      draw_id:
        description: 抽卡ID
        type: string
      results:
        description: 各模型结果
        items:
          $ref: '#/definitions/backend_internal_multimodel.DrawResult'
        type: array
      success_rate:
        description: 成功率
        type: number
      total_time_ms:
        description: 总耗时
        type: integer
    type: object
  backend_internal_multimodel.DrawResult:
    properties:
      content:
        description: 生成内容
        type: string
      error:
        description: 错误信息
        type: string
      latency_ms:
        description: 延迟（毫秒）
        type: integer
      metadata:
        additionalProperties: {}
        description: 元数据
        type: object
      model_id:
        description: 模型ID
        type: string
      model_name:
        description: 模型名称
        type: string
      provider:
        description: 提供商
        type: string
      score:
        description: 质量评分（0-100）
        type: number
      success:
        description: 是否成功
        type: boolean
      token_usage:
        allOf:
        - $ref: '#/definitions/backend_internal_multimodel.TokenUsage'
        description: Token使用情况
    type: object
  backend_internal_multimodel.RegenerateRequest:
    properties:
      draw_id:
        description: 抽卡ID
        type: string
      model_id:
        description: 要重新生成的模型ID
        type: string
    required:
    - draw_id
    - model_id
    type: object
  backend_internal_multimodel.TokenUsage:
    properties:
      completion_tokens:
        type: integer
      prompt_tokens:
        type: integer
      total_tokens:
        type: integer
    type: object
  backend_internal_notification.MessagePriority:
    enum:
    - low
    - normal
    - high
    - urgent
    type: string
    x-enum-varnames:
    - MessagePriorityLow
    - MessagePriorityNormal
    - MessagePriorityHigh
    - MessagePriorityUrgent
  backend_internal_notification.MessageStats:
    properties:
      by_category:
        additionalProperties:
          format: int64
          type: integer
        type: object
      by_priority:
        additionalProperties:
          format: int64
          type: integer
        type: object
      read_count:
        type: integer
      today_count:
        type: integer
      total_count:
        type: integer
      unread_count:
        type: integer
    type: object
  backend_internal_notification.MessageStatus:
    enum:
    - unread
    - read
    type: string
    x-enum-varnames:
    - MessageStatusUnread
    - MessageStatusRead
  backend_internal_notification.NotificationCategory:
    enum:
    - approval
    - workflow
    - system
    - security
    - agent
    - quota
    type: string
    x-enum-comments:
      CategoryAgent: Agent通知
      CategoryApproval: 审批通知
      CategoryQuota: 配额通知
      CategorySecurity: 安全通知
      CategorySystem: 系统通知
      CategoryWorkflow: 工作流通知
    x-enum-descriptions:
    - 审批通知
    - 工作流通知
    - 系统通知
    - 安全通知
    - Agent通知
    - 配额通知
    x-enum-varnames:
    - CategoryApproval
    - CategoryWorkflow
    - CategorySystem
    - CategorySecurity
    - CategoryAgent
    - CategoryQuota
  backend_internal_notification.UserMessage:
    properties:
      action_url:
        type: string
      category:
        $ref: '#/definitions/backend_internal_notification.NotificationCategory'
      content:
        type: string
      created_at:
        type: string
      expires_at:
        description: 过期时间（可选）
        type: string
      id:
        type: string
      metadata:
        description: 元数据
        type: string
      priority:
        $ref: '#/definitions/backend_internal_notification.MessagePriority'
      read_at:
        type: string
      related_id:
        type: string
      related_type:
        description: 关联信息
        type: string
      sender_id:
        description: 发送者
        type: string
      sender_name:
        type: string
      status:
        allOf:
        - $ref: '#/definitions/backend_internal_notification.MessageStatus'
        description: 状态
      tenant_id:
        type: string
      title:
        description: 消息内容
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  backend_internal_notification.WebhookDelivery:
    properties:
      created_at:
        type: string
      duration:
        $ref: '#/definitions/time.Duration'
      endpoint_id:
        type: string
      error:
        type: string
      event_id:
        type: string
      event_type:
        type: string
      id:
        type: string
      request_body:
        type: string
      response_body:
        type: string
      response_code:
        type: integer
      success:
        type: boolean
      url:
        type: string
    type: object
  backend_internal_notification.WebhookEndpoint:
    properties:
      active:
        type: boolean
      created_at:
        type: string
      events:
        description: 订阅的事件类型
        items:
          type: string
        type: array
      headers:
        additionalProperties:
          type: string
        type: object
      id:
        type: string
      name:
        type: string
      secret:
        description: HMAC 签名密钥
        type: string
      updated_at:
        type: string
      url:
        type: string
    type: object
  backend_internal_plot.ApplyPlotRequest:
    properties:
      append_content:
        description: 是否追加到现有内容（否则替换）
        type: boolean
      branch_index:
        minimum: 0
        type: integer
      chapter_id:
        type: string
      plot_id:
        type: string
    required:
    - chapter_id
    - plot_id
    type: object
  backend_internal_plot.CreatePlotRequest:
    properties:
      chapter_id:
        type: string
      character_info:
        type: string
      current_plot:
        type: string
      model_id:
        type: string
      num_branches:
        maximum: 10
        minimum: 1
        type: integer
      title:
        maxLength: 200
        type: string
      work_id:
        type: string
      workspace_id:
        type: string
      world_setting:
        type: string
    required:
    - current_plot
    - model_id
    - title
    type: object
  backend_internal_plot.PlotBranch:
    properties:
      difficulty:
        type: integer
      emotional_tone:
        type: string
      hook:
        type: string
      id:
        type: integer
      key_events:
        items:
          type: string
        type: array
      summary:
        type: string
      title:
        type: string
    type: object
  backend_internal_plot.PlotRecommendationResponse:
    properties:
      agent_id:
        description: 使用的Agent ID
        type: string
      applied:
        description: 是否已应用到章节
        type: boolean
      applied_at:
        description: 应用时间
        type: string
      branches:
        description: 生成的分支（JSON数组）
        type: string
      chapter_id:
        type: string
      character_info:
        description: 角色信息
        type: string
      created_at:
        type: string
      current_plot:
        description: 当前剧情
        type: string
      id:
        type: string
      metadata:
        description: 元数据
        type: string
      model_id:
        description: 使用的模型ID
        type: string
      parsed_branches:
        items:
          $ref: '#/definitions/backend_internal_plot.PlotBranch'
        type: array
      selected_branch:
        description: 已选择的分支索引
        type: integer
      tenant_id:
        type: string
      title:
        description: 推演标题
        type: string
      updated_at:
        type: string
      user_id:
        type: string
      work_id:
        type: string
      workspace_id:
        type: string
      world_setting:
        description: 世界观设定
        type: string
    type: object
  backend_internal_plot.UpdatePlotRequest:
    properties:
      selected_branch:
        type: integer
      title:
        type: string
    type: object
  backend_internal_rag.CreateShareRequest:
    properties:
      created_by:
        type: string
      description:
        type: string
      expires_in:
        $ref: '#/definitions/time.Duration'
      knowledge_base_id:
        type: string
      max_accesses:
        type: integer
      max_queries:
        type: integer
      name:
        type: string
      owner_tenant_id:
        type: string
      permission:
        $ref: '#/definitions/backend_internal_rag.SharePermission'
      scope:
        $ref: '#/definitions/backend_internal_rag.ShareScope'
      share_type:
        $ref: '#/definitions/backend_internal_rag.ShareType'
      target_tenant_id:
        type: string
      target_tenant_ids:
        items:
          type: string
        type: array
    type: object
  backend_internal_rag.SharePermission:
    enum:
    - read
    - write
    - collaborate
    type: string
    x-enum-comments:
      SharePermissionCollaborate: 协作（编辑文档）
      SharePermissionRead: 只读（仅查询）
      SharePermissionWrite: 可写（添加文档）
    x-enum-descriptions:
    - 只读（仅查询）
    - 可写（添加文档）
    - 协作（编辑文档）
    x-enum-varnames:
    - SharePermissionRead
    - SharePermissionWrite
    - SharePermissionCollaborate
  backend_internal_rag.ShareScope:
    properties:
      doc_ids:
        items:
          type: string
        type: array
      doc_types:
        items:
          type: string
        type: array
      exclude_ids:
        items:
          type: string
        type: array
      folders:
        items:
          type: string
        type: array
      max_results:
        type: integer
      tags:
        items:
          type: string
        type: array
    type: object
  backend_internal_rag.ShareType:
    enum:
    - link
    - tenant
    - public
    type: string
    x-enum-comments:
      ShareTypeLink: 公开链接
      ShareTypePublic: 完全公开
      ShareTypeTenant: 定向租户
    x-enum-descriptions:
    - 公开链接
    - 定向租户
    - 完全公开
    x-enum-varnames:
    - ShareTypeLink
    - ShareTypeTenant
    - ShareTypePublic
  backend_internal_subscription.BillingCycle:
    enum:
    - monthly
    - yearly
    - lifetime
    type: string
    x-enum-varnames:
    - BillingCycleMonthly
    - BillingCycleYearly
    - BillingCycleLifetime
  backend_internal_subscription.CancelRequest:
    properties:
      feedback:
        type: string
      immediate:
        description: 立即取消还是到期取消
        type: boolean
      reason:
        type: string
      subscriptionId:
        type: string
      tenantId:
        type: string
      userId:
        type: string
    type: object
  backend_internal_subscription.CreatePlanRequest:
    properties:
      code:
        type: string
      currency:
        type: string
      description:
        type: string
      features:
        $ref: '#/definitions/backend_internal_subscription.PlanFeatures'
      isDefault:
        type: boolean
      name:
        type: string
      permissions:
        items:
          type: string
        type: array
      priceMonthly:
        type: number
      priceYearly:
        type: number
      tier:
        $ref: '#/definitions/backend_internal_subscription.PlanTier'
      trialCredits:
        type: integer
      trialDays:
        type: integer
    required:
    - code
    - name
    - tier
    type: object
  backend_internal_subscription.PlanFeatures:
    properties:
      enableAPIAccess:
        type: boolean
      enableCustomModel:
        type: boolean
      enableMultiAgent:
        type: boolean
      enablePriorityQueue:
        description: 优先队列
        type: boolean
      enableRAG:
        description: 功能开关
        type: boolean
      enableWorkflow:
        type: boolean
      maxAPICallsPerDay:
        type: integer
      maxCreditsPerMonth:
        type: integer
      maxKnowledgeBases:
        type: integer
      maxStorageMB:
        type: integer
      maxTokensPerMonth:
        type: integer
      maxUsers:
        type: integer
      maxWorkflows:
        type: integer
    type: object
  backend_internal_subscription.PlanTier:
    enum:
    - free
    - basic
    - pro
    - enterprise
    type: string
    x-enum-varnames:
    - PlanTierFree
    - PlanTierBasic
    - PlanTierPro
    - PlanTierEnterprise
  backend_internal_subscription.SubscribeRequest:
    properties:
      autoRenew:
        type: boolean
      billingCycle:
        $ref: '#/definitions/backend_internal_subscription.BillingCycle'
      planId:
        type: string
      startTrial:
        description: 是否开始试用
        type: boolean
      tenantId:
        type: string
      userId:
        type: string
    required:
    - planId
    type: object
  backend_internal_template.CreateTemplateRequest:
    properties:
      category:
        type: string
      createdBy:
        type: string
      description:
        type: string
      name:
        type: string
      tenantID:
        type: string
      visibility:
        type: string
    type: object
  backend_internal_template.CreateVersionRequest:
    properties:
      changeLog:
        type: string
      content:
        type: string
      createdBy:
        type: string
      templateID:
        type: string
      variables:
        additionalProperties: {}
        type: object
      version:
        type: string
    type: object
  backend_internal_template.RenderTemplateRequest:
    properties:
      templateID:
        type: string
      variables:
        additionalProperties: {}
        type: object
    type: object
  backend_internal_template.UpdateTemplateRequest:
    properties:
      description:
        type: string
      name:
        type: string
      visibility:
        type: string
    type: object
  backend_internal_tenant.ApprovalSettings:
    properties:
      channelFallbackOrder:
        items:
          type: string
        type: array
      defaultChannels:
        items:
          type: string
        type: array
      notificationTargets:
        additionalProperties:
          items:
            type: string
          type: array
        type: object
      offlineBufferSize:
        type: integer
      offlineTtlSeconds:
        type: integer
      resendLimit:
        type: integer
    type: object
  backend_internal_tenant.Role:
    properties:
      code:
        type: string
      createdAt:
        description: 时间戳
        type: string
      deletedAt:
        type: string
      description:
        type: string
      id:
        type: string
      isDefault:
        type: boolean
      isSystem:
        description: 角色属性
        type: boolean
      name:
        type: string
      priority:
        type: integer
      tenantId:
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_tenant.Tenant:
    properties:
      companySize:
        type: string
      contactEmail:
        description: 联系信息
        type: string
      contactPerson:
        type: string
      contactPhone:
        type: string
      country:
        type: string
      createdAt:
        description: 时间戳
        type: string
      deletedAt:
        type: string
      deletedBy:
        type: string
      id:
        type: string
      industry:
        description: 公司信息
        type: string
      name:
        type: string
      slug:
        type: string
      status:
        type: string
      subscriptionEndsAt:
        type: string
      tier:
        description: 套餐信息
        type: string
      trialEndsAt:
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_tenant.TenantConfig:
    properties:
      approvalSettings:
        allOf:
        - $ref: '#/definitions/backend_internal_tenant.ApprovalSettings'
        description: 审批设置
      createdAt:
        description: 时间戳
        type: string
      defaultEmbeddingModel:
        description: RAG 配置
        type: string
      defaultModel:
        description: AI 配置
        type: string
      description:
        type: string
      displayName:
        description: 品牌信息
        type: string
      extraConfig:
        additionalProperties: {}
        description: 扩展配置（JSON）
        type: object
      featureFlags:
        additionalProperties:
          type: boolean
        description: 功能开关
        type: object
      id:
        type: string
      language:
        description: 语言和时区
        type: string
      logoUrl:
        type: string
      maxConcurrentWorkflows:
        description: 工作流配置
        type: integer
      maxTokensPerRequest:
        type: integer
      temperature:
        type: number
      tenantId:
        type: string
      timezone:
        type: string
      updatedAt:
        type: string
      vectorSearchThreshold:
        type: number
      vectorSearchTopK:
        type: integer
      workflowTimeoutSeconds:
        type: integer
    type: object
  backend_internal_tenant.User:
    properties:
      avatarUrl:
        type: string
      createdAt:
        description: 时间戳
        type: string
      deletedAt:
        type: string
      deletedBy:
        type: string
      email:
        description: 认证信息
        type: string
      emailVerified:
        type: boolean
      fullName:
        description: 个人信息
        type: string
      id:
        type: string
      lastLoginAt:
        description: 安全相关
        type: string
      lastLoginIp:
        type: string
      locale:
        description: 偏好设置
        type: string
      lockedUntil:
        type: string
      phone:
        type: string
      status:
        description: 状态管理
        type: string
      tenantId:
        type: string
      timezone:
        type: string
      updatedAt:
        type: string
      username:
        type: string
    type: object
  backend_internal_tools.AuthConfig:
    properties:
      apiKey:
        description: API Key
        type: string
      header:
        description: API Key 头部名称
        type: string
      token:
        description: Bearer Token
        type: string
      type:
        description: bearer, api_key, basic
        type: string
    type: object
  backend_internal_tools.CodeToolConfig:
    properties:
      allowImport:
        description: 允许导入的库
        items:
          type: string
        type: array
      language:
        description: python, javascript
        type: string
      sandbox:
        description: 是否沙箱执行
        type: boolean
    type: object
  backend_internal_tools.HTTPToolConfig:
    properties:
      auth:
        allOf:
        - $ref: '#/definitions/backend_internal_tools.AuthConfig'
        description: 认证配置
      headers:
        additionalProperties:
          type: string
        description: HTTP 头部
        type: object
      method:
        description: GET, POST, PUT, DELETE
        type: string
      url:
        description: API 端点 URL
        type: string
    type: object
  backend_internal_tools.ToolDefinition:
    properties:
      category:
        description: search, data_analysis, document, calculation
        type: string
      codeConfig:
        allOf:
        - $ref: '#/definitions/backend_internal_tools.CodeToolConfig'
        description: 代码解释器配置（仅 type=code_interpreter 时使用）
      createdAt:
        description: 时间戳
        type: string
      deletedAt:
        type: string
      description:
        type: string
      displayName:
        type: string
      httpConfig:
        allOf:
        - $ref: '#/definitions/backend_internal_tools.HTTPToolConfig'
        description: HTTP API 配置（仅 type=http_api 时使用）
      id:
        type: string
      maxRetries:
        description: 最大重试次数
        type: integer
      name:
        description: 基本信息
        type: string
      parameters:
        additionalProperties: {}
        description: 参数定义（JSON Schema）
        type: object
      requireAuth:
        description: 权限控制
        type: boolean
      scopes:
        description: 权限范围
        items:
          type: string
        type: array
      status:
        description: 状态
        type: string
      tenantId:
        type: string
      timeout:
        description: 执行配置
        type: integer
      type:
        description: 工具类型
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_tools.ToolExecution:
    properties:
      agentId:
        description: 执行上下文
        type: string
      completedAt:
        type: string
      createdAt:
        description: 时间戳
        type: string
      duration:
        description: 执行时长（毫秒）
        type: integer
      errorMessage:
        type: string
      executionId:
        type: string
      id:
        type: string
      input:
        additionalProperties: {}
        description: 输入输出
        type: object
      output:
        additionalProperties: {}
        type: object
      startedAt:
        type: string
      status:
        description: 执行状态
        type: string
      tenantId:
        type: string
      toolId:
        description: 工具信息
        type: string
      toolName:
        type: string
      workflowId:
        type: string
    type: object
  backend_internal_user.AIPrefs:
    properties:
      auto_suggest:
        type: boolean
      default_model:
        type: string
      max_tokens:
        type: integer
      show_token_count:
        type: boolean
      stream_response:
        type: boolean
      temperature:
        type: number
    type: object
  backend_internal_user.EditorPrefs:
    properties:
      auto_save:
        type: boolean
      font_family:
        type: string
      font_size:
        type: integer
      line_height:
        type: number
      spell_check:
        type: boolean
      tab_size:
        type: integer
      vim_mode:
        type: boolean
      word_wrap:
        type: boolean
    type: object
  backend_internal_user.NotificationPrefs:
    properties:
      agent_done:
        description: Agent 完成通知
        type: boolean
      digest:
        description: 每日摘要
        type: boolean
      email:
        type: boolean
      in_app:
        type: boolean
      marketing:
        description: 营销通知
        type: boolean
      push:
        type: boolean
      workflow_err:
        description: 工作流错误通知
        type: boolean
    type: object
  backend_internal_user.PrivacyPrefs:
    properties:
      analytics_cookie:
        type: boolean
      data_collection:
        type: boolean
      profile_public:
        type: boolean
      show_activity:
        type: boolean
      show_email:
        type: boolean
    type: object
  backend_internal_user.SocialLinks:
    properties:
      github:
        type: string
      linkedin:
        type: string
      twitter:
        type: string
      wechat:
        type: string
    type: object
  backend_internal_user.UserPreferences:
    properties:
      ai:
        $ref: '#/definitions/backend_internal_user.AIPrefs'
      date_format:
        description: YYYY-MM-DD
        type: string
      editor:
        $ref: '#/definitions/backend_internal_user.EditorPrefs'
      extra:
        additionalProperties: {}
        type: object
      language:
        description: zh-CN / en-US
        type: string
      notify:
        $ref: '#/definitions/backend_internal_user.NotificationPrefs'
      privacy:
        $ref: '#/definitions/backend_internal_user.PrivacyPrefs'
      theme:
        description: light / dark / system
        type: string
      time_format:
        description: 24h / 12h
        type: string
      timezone:
        description: Asia/Shanghai
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  backend_internal_user.UserProfile:
    properties:
      avatar:
        type: string
      bio:
        type: string
      company:
        type: string
      created_at:
        type: string
      extra:
        additionalProperties: {}
        type: object
      job_title:
        type: string
      location:
        type: string
      nickname:
        type: string
      phone:
        type: string
      social:
        $ref: '#/definitions/backend_internal_user.SocialLinks'
      updated_at:
        type: string
      user_id:
        type: string
      website:
        type: string
    type: object
  backend_internal_workflow.Condition:
    properties:
      expression:
        description: 表达式，如 "score > 80"
        type: string
      id:
        type: string
      label:
        description: 分支名称
        type: string
      targetNode:
        description: 满足条件时流向的节点 ID (逻辑上，实际上由 Edge 决定)
        type: string
    type: object
  backend_internal_workflow.CreateWorkflowRequest:
    properties:
      category:
        description: 分类
        type: string
      createdBy:
        type: string
      definition:
        $ref: '#/definitions/backend_internal_workflow.WorkflowDefinition'
      description:
        type: string
      metadata:
        additionalProperties: {}
        description: 元数据
        type: object
      name:
        type: string
      nextRunAt:
        type: string
      schedule:
        description: 调度配置
        type: string
      status:
        description: 状态
        type: string
      tenantID:
        type: string
      variables:
        additionalProperties: {}
        description: 变量
        type: object
      version:
        type: string
      visibility:
        type: string
    type: object
  backend_internal_workflow.Edge:
    properties:
      animated:
        type: boolean
      conditionId:
        description: 逻辑属性
        type: string
      id:
        type: string
      label:
        type: string
      source:
        type: string
      sourceHandle:
        description: 连接源锚点 ID
        type: string
      target:
        type: string
      targetHandle:
        description: 连接目标锚点 ID
        type: string
      type:
        description: default, smoothstep
        type: string
    type: object
  backend_internal_workflow.ListWorkflowsResponse:
    properties:
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
      total_pages:
        type: integer
      workflows:
        items:
          $ref: '#/definitions/backend_internal_workflow.Workflow'
        type: array
    type: object
  backend_internal_workflow.Node:
    properties:
      data:
        $ref: '#/definitions/backend_internal_workflow.NodeData'
      height:
        type: integer
      id:
        type: string
      position:
        $ref: '#/definitions/backend_internal_workflow.Position'
      selected:
        type: boolean
      type:
        allOf:
        - $ref: '#/definitions/backend_internal_workflow.NodeType'
        description: start, end, agent, tool, router, approval
      width:
        description: UI 相关属性
        type: integer
    type: object
  backend_internal_workflow.NodeData:
    properties:
      agentConfig:
        additionalProperties: {}
        description: 覆盖 Agent 默认配置
        type: object
      agentId:
        description: Agent 节点配置
        type: string
      approvers:
        description: Approval 节点配置
        items:
          type: string
        type: array
      conditions:
        description: Router 节点配置
        items:
          $ref: '#/definitions/backend_internal_workflow.Condition'
        type: array
      description:
        description: 通用配置
        type: string
      inputs:
        additionalProperties:
          type: string
        description: |-
          输入变量映射 (Input Mapping)
          key: 当前节点所需的变量名
          value: 来源变量表达式，如 "{{step_1.output.summary}}"
        type: object
      label:
        type: string
      promptTemplate:
        type: string
      timeout:
        description: 超时时间(秒)
        type: integer
      toolId:
        description: Tool 节点配置
        type: string
      toolParams:
        additionalProperties: {}
        type: object
    type: object
  backend_internal_workflow.NodeType:
    enum:
    - start
    - end
    - agent
    - tool
    - router
    - approval
    type: string
    x-enum-comments:
      NodeTypeApproval: 人工审批
      NodeTypeRouter: 路由/条件分支
    x-enum-descriptions:
    - ""
    - ""
    - ""
    - ""
    - 路由/条件分支
    - 人工审批
    x-enum-varnames:
    - NodeTypeStart
    - NodeTypeEnd
    - NodeTypeAgent
    - NodeTypeTool
    - NodeTypeRouter
    - NodeTypeApproval
  backend_internal_workflow.Position:
    properties:
      x:
        type: number
      "y":
        type: number
    type: object
  backend_internal_workflow.UpdateWorkflowRequest:
    properties:
      category:
        type: string
      definition:
        $ref: '#/definitions/backend_internal_workflow.WorkflowDefinition'
      description:
        type: string
      metadata:
        additionalProperties: {}
        description: 元数据
        type: object
      name:
        type: string
      nextRunAt:
        type: string
      schedule:
        description: 调度配置
        type: string
      status:
        description: 状态
        type: string
      variables:
        additionalProperties: {}
        type: object
      version:
        type: string
      visibility:
        type: string
    type: object
  backend_internal_workflow.Viewport:
    properties:
      x:
        type: number
      "y":
        type: number
      zoom:
        type: number
    type: object
  backend_internal_workflow.Workflow:
    properties:
      category:
        description: 分类
        type: string
      createdAt:
        description: 时间戳
        type: string
      createdBy:
        description: 创建人
        type: string
      definition:
        allOf:
        - $ref: '#/definitions/backend_internal_workflow.WorkflowDefinition'
        description: 定义（结构化）
      deletedAt:
        type: string
      deletedBy:
        type: string
      description:
        type: string
      failedExecutions:
        type: integer
      id:
        type: string
      metadata:
        additionalProperties: {}
        description: 元数据
        type: object
      name:
        description: 工作流信息
        type: string
      nextRunAt:
        description: 下次执行时间
        type: string
      ownerUserId:
        type: string
      schedule:
        description: 调度配置
        type: string
      status:
        description: 状态
        type: string
      successExecutions:
        type: integer
      tenantId:
        type: string
      totalExecutions:
        description: 统计（通过触发器自动维护）
        type: integer
      updatedAt:
        type: string
      variables:
        additionalProperties: {}
        description: 变量
        type: object
      version:
        description: 版本
        type: string
      visibility:
        description: 可见性
        type: string
    type: object
  backend_internal_workflow.WorkflowDefinition:
    properties:
      automation_config:
        additionalProperties: {}
        type: object
      description:
        type: string
      edges:
        items:
          $ref: '#/definitions/backend_internal_workflow.Edge'
        type: array
      metadata:
        additionalProperties: {}
        type: object
      name:
        description: 新版自动化工作流定义字段
        type: string
      nodes:
        items:
          $ref: '#/definitions/backend_internal_workflow.Node'
        type: array
      steps:
        items:
          additionalProperties: {}
          type: object
        type: array
      version:
        type: string
      viewport:
        allOf:
        - $ref: '#/definitions/backend_internal_workflow.Viewport'
        description: 前端视图状态
    type: object
  backend_internal_workflow.WorkflowExecution:
    properties:
      completedAt:
        type: string
      createdAt:
        description: 时间戳
        type: string
      errorMessage:
        type: string
      id:
        type: string
      input:
        additionalProperties: {}
        description: 输入输出
        type: object
      output:
        additionalProperties: {}
        type: object
      startedAt:
        description: 时间
        type: string
      status:
        description: 状态
        type: string
      tenantId:
        type: string
      traceId:
        description: 追踪
        type: string
      userId:
        type: string
      workflowId:
        type: string
    type: object
  backend_internal_workflow.WorkflowTask:
    properties:
      agentType:
        type: string
      completedAt:
        type: string
      createdAt:
        description: 时间戳
        type: string
      errorMessage:
        type: string
      executionId:
        type: string
      id:
        type: string
      input:
        additionalProperties: {}
        description: 输入输出
        type: object
      output:
        additionalProperties: {}
        type: object
      retryCount:
        description: 重试
        type: integer
      startedAt:
        description: 时间
        type: string
      status:
        description: 状态
        type: string
      stepId:
        description: 任务信息
        type: string
    type: object
  backend_internal_workflow_template.AgentRoleCapability:
    properties:
      description:
        type: string
      input_fields:
        items:
          type: string
        type: array
      name:
        type: string
      output_fields:
        items:
          type: string
        type: array
      recommended_config:
        additionalProperties: {}
        type: object
      role:
        type: string
      system_prompt:
        type: string
    type: object
  backend_internal_workspace.ApplyTemplateRequest:
    properties:
      parent_id:
        description: 创建在哪个目录下
        type: string
      template_id:
        type: string
      variables:
        additionalProperties:
          type: string
        description: 模板变量值
        type: object
    required:
    - template_id
    type: object
  backend_internal_workspace.CreateTemplateRequest:
    properties:
      description:
        type: string
      is_public:
        type: boolean
      name:
        maxLength: 100
        type: string
      preview_url:
        type: string
      structure:
        $ref: '#/definitions/backend_internal_workspace.TemplateStructure'
      tags:
        items:
          type: string
        type: array
      type:
        $ref: '#/definitions/backend_internal_workspace.WorkspaceTemplateType'
    required:
    - name
    - structure
    - type
    type: object
  backend_internal_workspace.SortOrderUpdate:
    properties:
      nodeId:
        type: string
      sortOrder:
        type: integer
    type: object
  backend_internal_workspace.TemplateNode:
    properties:
      children:
        items:
          $ref: '#/definitions/backend_internal_workspace.TemplateNode'
        type: array
      content:
        description: 文件初始内容
        type: string
      name:
        type: string
      placeholder:
        description: 占位符变量 如 {{title}}
        type: string
      type:
        description: folder, file
        type: string
    type: object
  backend_internal_workspace.TemplateStructure:
    properties:
      nodes:
        description: 子节点
        items:
          $ref: '#/definitions/backend_internal_workspace.TemplateNode'
        type: array
      root_name:
        description: 根节点名称
        type: string
      variables:
        description: 模板变量
        items:
          $ref: '#/definitions/backend_internal_workspace.TemplateVar'
        type: array
    type: object
  backend_internal_workspace.TemplateVar:
    properties:
      default_value:
        description: 默认值
        type: string
      label:
        description: 显示标签
        type: string
      name:
        description: 变量名
        type: string
      options:
        description: select类型的选项（逗号分隔）
        type: string
      required:
        description: 是否必填
        type: boolean
      type:
        description: text, number, date, select
        type: string
    type: object
  backend_internal_workspace.WorkspaceNode:
    properties:
      category:
        type: string
      created_at:
        type: string
      created_by:
        type: string
      id:
        type: string
      metadata:
        type: string
      name:
        type: string
      node_path:
        type: string
      parent_id:
        type: string
      slug:
        type: string
      sort_order:
        type: integer
      tenant_id:
        type: string
      type:
        type: string
      updated_at:
        type: string
      updated_by:
        type: string
    type: object
  backend_internal_workspace.WorkspaceTemplate:
    properties:
      created_at:
        type: string
      created_by:
        type: string
      description:
        type: string
      id:
        type: string
      is_builtin:
        description: 是否内置模板
        type: boolean
      is_public:
        description: 是否公开
        type: boolean
      name:
        type: string
      preview_url:
        description: 模板预览图（可选）
        type: string
      structure:
        description: 模板结构（JSON）
        type: string
      tags:
        description: 元数据
        type: string
      tenant_id:
        description: 空表示系统模板
        type: string
      type:
        $ref: '#/definitions/backend_internal_workspace.WorkspaceTemplateType'
      updated_at:
        type: string
      use_count:
        description: 使用次数
        type: integer
    type: object
  backend_internal_workspace.WorkspaceTemplateType:
    enum:
    - novel
    - script
    - article
    - project
    - custom
    type: string
    x-enum-comments:
      TemplateTypeArticle: 文章
      TemplateTypeCustom: 自定义
      TemplateTypeNovel: 小说
      TemplateTypeProject: 项目
      TemplateTypeScript: 剧本
    x-enum-descriptions:
    - 小说
    - 剧本
    - 文章
    - 项目
    - 自定义
    x-enum-varnames:
    - TemplateTypeNovel
    - TemplateTypeScript
    - TemplateTypeArticle
    - TemplateTypeProject
    - TemplateTypeCustom
  backend_internal_worldbuilder.CreateEntityRequest:
    properties:
      attributes:
        additionalProperties: {}
        type: object
      category:
        type: string
      description:
        type: string
      name:
        type: string
      parentId:
        type: string
      settingId:
        type: string
      tags:
        items:
          type: string
        type: array
      type:
        type: string
    required:
    - name
    - settingId
    - type
    type: object
  backend_internal_worldbuilder.CreateRelationRequest:
    properties:
      description:
        type: string
      settingId:
        type: string
      sourceId:
        type: string
      strength:
        type: integer
      targetId:
        type: string
      type:
        type: string
    required:
    - settingId
    - sourceId
    - targetId
    - type
    type: object
  backend_internal_worldbuilder.CreateSettingRequest:
    properties:
      description:
        type: string
      genre:
        type: string
      name:
        type: string
      workId:
        type: string
    required:
    - name
    type: object
  backend_internal_worldbuilder.DiffItem:
    properties:
      newValue:
        type: string
      oldValue:
        type: string
      path:
        description: 变更路径
        type: string
      type:
        description: add, remove, modify
        type: string
    type: object
  backend_internal_worldbuilder.EntityRelation:
    properties:
      createdAt:
        type: string
      description:
        description: 关系描述
        type: string
      direction:
        description: both, forward, backward
        type: string
      dynamic:
        description: 动态状态
        type: string
      id:
        type: string
      settingId:
        type: string
      sourceId:
        description: 关系两端
        type: string
      strength:
        description: 关系强度 1-5
        type: integer
      targetId:
        type: string
      tenantId:
        type: string
      type:
        description: 关系信息
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_worldbuilder.EntitySummary:
    properties:
      category:
        type: string
      description:
        type: string
      id:
        type: string
      name:
        type: string
      type:
        type: string
    type: object
  backend_internal_worldbuilder.GenerateSettingRequest:
    properties:
      constraints:
        description: 约束条件
        type: string
      coreIdea:
        description: 核心创意
        type: string
      focus:
        description: 重点生成：world, characters, factions, etc.
        items:
          type: string
        type: array
      genre:
        description: 类型
        type: string
      scale:
        description: 规模：small, medium, large
        type: string
      settingId:
        description: 空则创建新设定
        type: string
      templateId:
        description: 使用的模板
        type: string
    required:
    - coreIdea
    type: object
  backend_internal_worldbuilder.GraphEdge:
    properties:
      description:
        type: string
      id:
        type: string
      source:
        type: string
      strength:
        type: integer
      target:
        type: string
      type:
        type: string
    type: object
  backend_internal_worldbuilder.GraphNode:
    properties:
      category:
        type: string
      data:
        additionalProperties: {}
        type: object
      id:
        type: string
      name:
        type: string
      type:
        type: string
    type: object
  backend_internal_worldbuilder.ModifySettingRequest:
    properties:
      context:
        description: 上下文
        type: string
      entityId:
        description: 空则修改整体设定
        type: string
      instruction:
        description: 修改指令
        type: string
      settingId:
        type: string
    required:
    - instruction
    - settingId
    type: object
  backend_internal_worldbuilder.RelationGraph:
    properties:
      edges:
        items:
          $ref: '#/definitions/backend_internal_worldbuilder.GraphEdge'
        type: array
      nodes:
        items:
          $ref: '#/definitions/backend_internal_worldbuilder.GraphNode'
        type: array
    type: object
  backend_internal_worldbuilder.SettingEntity:
    properties:
      attributes:
        additionalProperties: {}
        description: 详细属性（JSON格式，根据类型不同结构不同）
        type: object
      category:
        description: 子类别
        type: string
      createdAt:
        type: string
      createdBy:
        type: string
      description:
        type: string
      id:
        type: string
      imageUrl:
        description: 图片
        type: string
      name:
        description: 实体信息
        type: string
      parentId:
        description: 父实体（支持层级）
        type: string
      settingId:
        type: string
      sortOrder:
        description: 排序
        type: integer
      tags:
        description: 标签
        items:
          type: string
        type: array
      tenantId:
        type: string
      type:
        description: character, location, item, faction, event, concept
        type: string
      updatedAt:
        type: string
    type: object
  backend_internal_worldbuilder.SettingStats:
    properties:
      byCategory:
        additionalProperties:
          type: integer
        type: object
      byType:
        additionalProperties:
          type: integer
        type: object
      lastUpdated:
        type: string
      settingId:
        type: string
      totalEntities:
        type: integer
      totalRelations:
        type: integer
      totalVersions:
        type: integer
    type: object
  backend_internal_worldbuilder.SettingTemplate:
    properties:
      createdAt:
        type: string
      description:
        type: string
      example:
        description: 示例
        type: string
      genre:
        type: string
      id:
        type: string
      isActive:
        type: boolean
      isBuiltin:
        description: 是否系统内置
        type: boolean
      name:
        type: string
      prompt:
        description: 生成提示词
        type: string
      structure:
        additionalProperties: {}
        description: 模板内容（JSON格式的结构定义）
        type: object
      tenantId:
        description: nil 表示系统模板
        type: string
      updatedAt:
        type: string
      usageCount:
        description: 使用统计
        type: integer
    type: object
  backend_internal_worldbuilder.SettingVersion:
    properties:
      changeDesc:
        description: 变更描述
        type: string
      changeType:
        description: 变更信息
        type: string
      content:
        description: 快照内容
        type: string
      createdAt:
        type: string
      createdBy:
        type: string
      id:
        type: string
      settingId:
        type: string
      summary:
        description: 版本说明
        type: string
      tenantId:
        type: string
      versionNum:
        description: 版本号
        type: integer
    type: object
  backend_internal_worldbuilder.VersionDiff:
    properties:
      baseVersion:
        $ref: '#/definitions/backend_internal_worldbuilder.VersionMeta'
      changes:
        items:
          $ref: '#/definitions/backend_internal_worldbuilder.DiffItem'
        type: array
      targetVersion:
        $ref: '#/definitions/backend_internal_worldbuilder.VersionMeta'
    type: object
  backend_internal_worldbuilder.VersionMeta:
    properties:
      createdAt:
        type: string
      createdBy:
        type: string
      id:
        type: string
      summary:
        type: string
      versionNum:
        type: integer
    type: object
  backend_internal_worldbuilder.WorkSettingsSummary:
    properties:
      entities:
        items:
          $ref: '#/definitions/backend_internal_worldbuilder.EntitySummary'
        type: array
      setting_id:
        type: string
      setting_name:
        type: string
      work_id:
        type: string
    type: object
  backend_internal_worldbuilder.WorldSetting:
    properties:
      content:
        description: 设定内容（JSON格式）
        type: string
      createdAt:
        type: string
      createdBy:
        description: 创建信息
        type: string
      description:
        type: string
      entityCount:
        description: 统计
        type: integer
      genre:
        description: 类型：fantasy, scifi, wuxia, modern, etc.
        type: string
      id:
        type: string
      isLocked:
        type: boolean
      latestVersionId:
        description: 版本管理
        type: string
      name:
        description: 基本信息
        type: string
      relationCount:
        description: 关系数量
        type: integer
      status:
        description: 状态
        type: string
      tenantId:
        type: string
      updatedAt:
        type: string
      updatedBy:
        type: string
      versionCount:
        type: integer
      workId:
        description: 关联的作品ID
        type: string
    type: object
  backend_pkg_types.JSONMap:
    additionalProperties: true
    type: object
  internal_tools_marketplace.MarketplaceStats:
    properties:
      categoryStats:
        additionalProperties:
          format: int64
          type: integer
        type: object
      recentPackages:
        items:
          $ref: '#/definitions/internal_tools_marketplace.ToolPackage'
        type: array
      topPackages:
        items:
          $ref: '#/definitions/internal_tools_marketplace.ToolPackage'
        type: array
      totalDownloads:
        type: integer
      totalInstalls:
        type: integer
      totalPackages:
        type: integer
    type: object
  internal_tools_marketplace.PackageDetailResponse:
    properties:
      isInstalled:
        type: boolean
      latestVersion:
        $ref: '#/definitions/internal_tools_marketplace.ToolVersion'
      package:
        $ref: '#/definitions/internal_tools_marketplace.ToolPackage'
      ratings:
        items:
          $ref: '#/definitions/internal_tools_marketplace.ToolRating'
        type: array
      userRating:
        $ref: '#/definitions/internal_tools_marketplace.ToolRating'
      versions:
        items:
          $ref: '#/definitions/internal_tools_marketplace.ToolVersion'
        type: array
    type: object
  internal_tools_marketplace.PackageListResponse:
    properties:
      packages:
        items:
          $ref: '#/definitions/internal_tools_marketplace.ToolPackage'
        type: array
      page:
        type: integer
      pageSize:
        type: integer
      total:
        type: integer
      totalPages:
        type: integer
    type: object
  internal_tools_marketplace.PublishRequest:
    properties:
      category:
        type: string
      changelog:
        type: string
      definition:
        additionalProperties: {}
        type: object
      description:
        type: string
      displayName:
        type: string
      homepage:
        type: string
      icon:
        type: string
      name:
        type: string
      repository:
        type: string
      tags:
        items:
          type: string
        type: array
      version:
        type: string
      visibility:
        type: string
    required:
    - category
    - definition
    - displayName
    - name
    - version
    type: object
  internal_tools_marketplace.PublishVersionRequest:
    properties:
      changelog:
        type: string
      definition:
        additionalProperties: {}
        type: object
      minVersion:
        type: string
      version:
        type: string
    required:
    - definition
    - version
    type: object
  internal_tools_marketplace.RatingRequest:
    properties:
      rating:
        maximum: 5
        minimum: 1
        type: integer
      review:
        type: string
      version:
        type: string
    required:
    - rating
    type: object
  internal_tools_marketplace.SearchRequest:
    properties:
      category:
        type: string
      page:
        type: integer
      pageSize:
        type: integer
      query:
        type: string
      sortBy:
        description: downloads, stars, rating, created, updated
        type: string
      sortOrder:
        description: asc, desc
        type: string
      status:
        description: 仅管理员可用
        type: string
      tags:
        items:
          type: string
        type: array
      visibility:
        description: 仅管理员可用
        type: string
    type: object
  internal_tools_marketplace.ToolPackage:
    properties:
      authorId:
        type: string
      authorName:
        type: string
      category:
        description: search, data_analysis, document, ai, utility
        type: string
      createdAt:
        description: 时间戳
        type: string
      deletedAt:
        type: string
      description:
        type: string
      displayName:
        type: string
      downloads:
        description: 统计
        type: integer
      homepage:
        description: 主页 URL
        type: string
      icon:
        description: 图标 URL
        type: string
      id:
        type: string
      name:
        description: 基本信息
        type: string
      publishedAt:
        type: string
      ratingAvg:
        type: number
      ratingCount:
        type: integer
      repository:
        description: 仓库 URL
        type: string
      stars:
        type: integer
      status:
        description: 状态
        type: string
      tags:
        items:
          type: string
        type: array
      tenantId:
        type: string
      updatedAt:
        type: string
      visibility:
        description: public, private, unlisted
        type: string
    type: object
  internal_tools_marketplace.ToolRating:
    properties:
      createdAt:
        description: 时间戳
        type: string
      id:
        type: string
      packageId:
        type: string
      rating:
        description: 评分信息
        type: integer
      review:
        description: 评价内容
        type: string
      tenantId:
        type: string
      updatedAt:
        type: string
      userId:
        type: string
      version:
        description: 评价时的版本
        type: string
    type: object
  internal_tools_marketplace.ToolVersion:
    properties:
      changelog:
        description: 更新日志
        type: string
      createdAt:
        description: 时间戳
        type: string
      definition:
        additionalProperties: {}
        description: 工具定义（JSON）
        type: object
      downloads:
        description: 统计
        type: integer
      id:
        type: string
      isLatest:
        type: boolean
      minVersion:
        description: 最低兼容版本
        type: string
      packageId:
        type: string
      publishedAt:
        type: string
      status:
        description: 状态
        type: string
      tenantId:
        type: string
      version:
        description: 版本信息
        type: string
    type: object
  internal_tools_marketplace.UpdatePackageRequest:
    properties:
      category:
        type: string
      description:
        type: string
      displayName:
        type: string
      homepage:
        type: string
      icon:
        type: string
      repository:
        type: string
      tags:
        items:
          type: string
        type: array
      visibility:
        type: string
    type: object
  time.Duration:
    enum:
    - -9223372036854775808
    - 9223372036854775807
    - 1
    - 1000
    - 1000000
    - 1000000000
    - 60000000000
    - 3600000000000
    format: int64
    type: integer
    x-enum-varnames:
    - minDuration
    - maxDuration
    - Nanosecond
    - Microsecond
    - Millisecond
    - Second
    - Minute
    - Hour
host: localhost:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: 多 Agent 协作创作平台 API
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: AgentFlowCreativeHub API
  version: "1.0"
paths:
  /api/agents:
    get:
      parameters:
      - description: Agent 类型
        in: query
        name: agent_type
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_agent.ListAgentConfigsResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询 Agent 配置列表
      tags:
      - Agents
    post:
      consumes:
      - application/json
      parameters:
      - description: Agent 配置
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_agents.createAgentConfigRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_agent.AgentConfig'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建 Agent 配置
      tags:
      - Agents
  /api/agents/{id}:
    delete:
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除 Agent 配置
      tags:
      - Agents
    get:
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_agent.AgentConfig'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询 Agent 配置详情
      tags:
      - Agents
    put:
      consumes:
      - application/json
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      - description: Agent 配置
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_agents.updateAgentConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_agent.AgentConfig'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新 Agent 配置
      tags:
      - Agents
  /api/agents/{id}/execute:
    post:
      consumes:
      - application/json
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      - description: 执行请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_agents.ExecuteAgentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_handlers_agents.AgentExecuteResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 执行 Agent（同步）
      tags:
      - Agents
  /api/agents/{id}/execute-stream:
    post:
      consumes:
      - application/json
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      - description: 执行请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_agents.ExecuteAgentRequest'
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE Stream
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 执行 Agent（流式）
      tags:
      - Agents
  /api/agents/{id}/executions:
    get:
      description: 查询指定Agent的所有执行记录（支持分页）
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: '状态筛选: pending, running, completed, failed'
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 执行历史列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取Agent执行历史
      tags:
      - Agents
  /api/agents/{id}/run:
    post:
      consumes:
      - application/json
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      - description: 执行请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_agents.ExecuteAgentRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/api_handlers_agents.AgentAsyncResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 执行 Agent（异步）
      tags:
      - Agents
  /api/agents/capabilities:
    get:
      parameters:
      - description: Agent 类型
        in: query
        name: agent_type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取 Agent 能力目录
      tags:
      - Agents
  /api/agents/capabilities/{agent_type}/{role}:
    get:
      parameters:
      - description: Agent 类型
        in: path
        name: agent_type
        required: true
        type: string
      - description: 角色标识
        in: path
        name: role
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_workflow_template.AgentRoleCapability'
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 获取 Agent 角色能力详情
      tags:
      - Agents
  /api/agents/performance/comparison:
    get:
      parameters:
      - description: 开始时间 (RFC3339)
        in: query
        name: start_time
        type: string
      - description: 结束时间 (RFC3339)
        in: query
        name: end_time
        type: string
      - description: 最近天数 (默认7)
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_agent.AgentComparisonStats'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取多Agent性能对比
      tags:
      - Agent Performance
  /api/agents/performance/failed:
    get:
      parameters:
      - description: Agent ID
        in: query
        name: agent_id
        type: string
      - description: 返回数量 (默认10)
        in: query
        name: limit
        type: integer
      - description: 开始时间 (RFC3339)
        in: query
        name: start_time
        type: string
      - description: 结束时间 (RFC3339)
        in: query
        name: end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取失败的执行记录
      tags:
      - Agent Performance
  /api/agents/performance/slowest:
    get:
      parameters:
      - description: Agent ID
        in: query
        name: agent_id
        type: string
      - description: 返回数量 (默认10)
        in: query
        name: limit
        type: integer
      - description: 开始时间 (RFC3339)
        in: query
        name: start_time
        type: string
      - description: 结束时间 (RFC3339)
        in: query
        name: end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取最慢的执行记录
      tags:
      - Agent Performance
  /api/agents/performance/stats:
    get:
      parameters:
      - description: Agent ID
        in: query
        name: agent_id
        type: string
      - description: 开始时间 (RFC3339)
        in: query
        name: start_time
        type: string
      - description: 结束时间 (RFC3339)
        in: query
        name: end_time
        type: string
      - description: 最近天数 (默认7)
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_agent.AgentPerformanceStats'
              type: object
      security:
      - BearerAuth: []
      summary: 获取Agent性能统计
      tags:
      - Agent Performance
  /api/agents/performance/summary:
    get:
      parameters:
      - description: Agent ID
        in: query
        name: agent_id
        type: string
      - description: 开始时间 (RFC3339)
        in: query
        name: start_time
        type: string
      - description: 结束时间 (RFC3339)
        in: query
        name: end_time
        type: string
      - description: 最近天数 (默认7)
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_agent.PerformanceSummary'
              type: object
      security:
      - BearerAuth: []
      summary: 获取Agent性能概览
      tags:
      - Agent Performance
  /api/agents/performance/tokens:
    get:
      parameters:
      - description: Agent ID
        in: query
        name: agent_id
        type: string
      - description: 开始时间 (RFC3339)
        in: query
        name: start_time
        type: string
      - description: 结束时间 (RFC3339)
        in: query
        name: end_time
        type: string
      - description: 最近天数 (默认7)
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取Token使用趋势
      tags:
      - Agent Performance
  /api/agents/performance/top:
    get:
      parameters:
      - description: 返回数量 (默认10)
        in: query
        name: limit
        type: integer
      - description: 开始时间 (RFC3339)
        in: query
        name: start_time
        type: string
      - description: 结束时间 (RFC3339)
        in: query
        name: end_time
        type: string
      - description: 最近天数 (默认7)
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_agent.AgentComparisonStats'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取调用量最多的Agent
      tags:
      - Agent Performance
  /api/agents/performance/trend:
    get:
      parameters:
      - description: Agent ID
        in: query
        name: agent_id
        type: string
      - description: 开始时间 (RFC3339)
        in: query
        name: start_time
        type: string
      - description: 结束时间 (RFC3339)
        in: query
        name: end_time
        type: string
      - description: 最近天数 (默认7)
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_agent.AgentDailyStats'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取Agent每日执行趋势
      tags:
      - Agent Performance
  /api/agents/seed:
    post:
      parameters:
      - description: 默认模型 ID
        in: query
        name: default_model_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 初始化预置 Agent
      tags:
      - Agents
  /api/agents/types/{type}:
    get:
      parameters:
      - description: Agent 类型
        in: path
        name: type
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_agent.AgentConfig'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 根据类型获取 Agent 配置
      tags:
      - Agents
  /api/agents/types/{type}/execute:
    post:
      consumes:
      - application/json
      parameters:
      - description: Agent 类型
        in: path
        name: type
        required: true
        type: string
      - description: 执行请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_agents.ExecuteAgentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_handlers_agents.AgentExecuteResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 根据类型执行 Agent（同步）
      tags:
      - Agents
  /api/agents/types/{type}/execute-stream:
    post:
      consumes:
      - application/json
      parameters:
      - description: Agent 类型
        in: path
        name: type
        required: true
        type: string
      - description: 执行请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_agents.ExecuteAgentRequest'
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE Stream
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 根据类型执行 Agent（流式）
      tags:
      - Agents
  /api/analytics/dashboard:
    get:
      parameters:
      - description: 统计天数（默认30）
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_analytics.AuthorDashboard'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取作者仪表盘数据
      tags:
      - Analytics
  /api/analytics/feature-usage:
    get:
      parameters:
      - description: 统计天数（默认30）
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/backend_internal_analytics.FeatureUsage'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取 AI 功能使用分布
      tags:
      - Analytics
  /api/analytics/model-preference:
    get:
      parameters:
      - description: 统计天数（默认30）
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/backend_internal_analytics.ModelPreference'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取 AI 模型使用偏好
      tags:
      - Analytics
  /api/analytics/monthly-report:
    get:
      parameters:
      - description: 年份（默认当前年）
        in: query
        name: year
        type: integer
      - description: 月份（默认当前月）
        in: query
        name: month
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_analytics.MonthlyReport'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取月度写作报告
      tags:
      - Analytics
  /api/analytics/recent-activities:
    get:
      parameters:
      - description: 返回条数（默认20）
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/backend_internal_analytics.RecentActivity'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取近期 AI 调用和创作记录
      tags:
      - Analytics
  /api/analytics/reports/export:
    post:
      consumes:
      - application/json
      parameters:
      - description: 导出请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_analytics.ExportReportRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 导出分析报告
      tags:
      - Analytics
  /api/analytics/token-trend:
    get:
      parameters:
      - description: 统计天数（默认30）
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/backend_internal_analytics.TokenTrend'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取 Token 消耗趋势图数据
      tags:
      - Analytics
  /api/analytics/writing-efficiency:
    get:
      parameters:
      - description: 统计天数（默认30）
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_analytics.WritingEfficiency'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取写作效率统计
      tags:
      - Analytics
  /api/analytics/writing-habits:
    get:
      parameters:
      - description: 统计天数（默认30）
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_analytics.WritingHabits'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取写作习惯统计
      tags:
      - Analytics
  /api/apikeys:
    get:
      description: 获取用户的 API Key 列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 列出 API Keys
      tags:
      - APIKey
    post:
      consumes:
      - application/json
      description: 创建新的 API Key
      parameters:
      - description: API Key 信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_auth.CreateAPIKeyRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建 API Key
      tags:
      - APIKey
  /api/apikeys/{id}:
    delete:
      description: 永久删除指定的 API Key
      parameters:
      - description: API Key ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除 API Key
      tags:
      - APIKey
  /api/apikeys/{id}/revoke:
    post:
      description: 撤销指定的 API Key（禁用但不删除）
      parameters:
      - description: API Key ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 撤销 API Key
      tags:
      - APIKey
  /api/audit/logs/{id}:
    get:
      parameters:
      - description: 日志 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_models.AuditLog'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取审计日志详情
      tags:
      - Audit
  /api/audit/logs/query:
    post:
      consumes:
      - application/json
      parameters:
      - description: 查询条件
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_audit.QueryLogsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询审计日志
      tags:
      - Audit
  /api/audit/my-activity:
    get:
      parameters:
      - description: 返回条数
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取当前用户活动摘要
      tags:
      - Audit
  /api/audit/users/{userID}/activity:
    get:
      parameters:
      - description: 用户 ID
        in: path
        name: userID
        required: true
        type: string
      - description: 统计天数
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取指定用户活动摘要
      tags:
      - Audit
  /api/auth/forgot-password:
    post:
      consumes:
      - application/json
      description: 发送密码重置邮件（当前版本生成重置令牌并返回）
      parameters:
      - description: 忘记密码请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_auth.ForgotPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 重置令牌已生成
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 用户不存在
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 忘记密码
      tags:
      - Auth
  /api/auth/login:
    post:
      consumes:
      - application/json
      description: 使用邮箱和密码登录，获取访问令牌和刷新令牌
      parameters:
      - description: 登录请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_auth.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_handlers_auth.LoginResponse'
        "400":
          description: 参数错误
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 认证失败
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服务器内部错误
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 用户登录
      tags:
      - Auth
  /api/auth/logout:
    post:
      consumes:
      - application/json
      description: 撤销当前会话或指定刷新令牌，并将当前访问令牌加入黑名单
      parameters:
      - description: 可选：指定要撤销的刷新令牌
        in: body
        name: request
        schema:
          properties:
            refresh_token:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 登出成功
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 用户登出
      tags:
      - Auth
  /api/auth/oauth/{provider}:
    get:
      description: 获取指定提供商（如 google, github）的 OAuth2 授权跳转 URL
      parameters:
      - description: OAuth2 提供商 (google, github)
        in: path
        name: provider
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 包含 auth_url 和 state
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 错误信息
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取 OAuth2 授权 URL
      tags:
      - Auth
  /api/auth/oauth/{provider}/callback:
    post:
      description: 处理 OAuth2 提供商的回调，交换令牌并登录/注册用户
      parameters:
      - description: OAuth2 提供商 (google, github)
        in: path
        name: provider
        required: true
        type: string
      - description: 授权码
        in: query
        name: code
        required: true
        type: string
      - description: 状态码
        in: query
        name: state
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_handlers_auth.LoginResponse'
        "400":
          description: 参数或验证错误
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服务器内部错误
          schema:
            additionalProperties:
              type: string
            type: object
      summary: OAuth2 回调处理
      tags:
      - Auth
  /api/auth/refresh:
    post:
      consumes:
      - application/json
      description: 使用刷新令牌获取新的访问令牌
      parameters:
      - description: 刷新令牌请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_auth.RefreshRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_auth.TokenPair'
        "400":
          description: 参数错误
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 无效的刷新令牌
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 刷新访问令牌
      tags:
      - Auth
  /api/auth/register:
    post:
      consumes:
      - application/json
      description: 注册新用户账号
      parameters:
      - description: 注册请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_auth.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_handlers_auth.LoginResponse'
        "400":
          description: 参数错误
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: 用户已存在
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服务器内部错误
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 用户注册
      tags:
      - Auth
  /api/auth/reset-password:
    post:
      consumes:
      - application/json
      description: 使用重置令牌重置密码
      parameters:
      - description: 重置密码请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_auth.ResetPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 密码重置成功
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误或令牌无效
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 重置密码
      tags:
      - Auth
  /api/billing/alerts:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_billing.CostAlert'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取成本告警列表
      tags:
      - Billing
    post:
      consumes:
      - application/json
      parameters:
      - description: 告警配置
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_billing.CreateAlertRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_billing.CostAlert'
              type: object
      security:
      - BearerAuth: []
      summary: 创建成本告警
      tags:
      - Billing
  /api/billing/alerts/{id}:
    delete:
      parameters:
      - description: 告警ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 删除成本告警
      tags:
      - Billing
    get:
      parameters:
      - description: 告警ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_billing.CostAlert'
              type: object
      security:
      - BearerAuth: []
      summary: 获取成本告警详情
      tags:
      - Billing
    put:
      consumes:
      - application/json
      parameters:
      - description: 告警ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_billing.UpdateAlertRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 更新成本告警
      tags:
      - Billing
  /api/billing/alerts/check:
    post:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_billing.AlertTriggerEvent'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 检查成本告警（手动触发）
      tags:
      - Billing
  /api/billing/audit:
    post:
      consumes:
      - application/json
      parameters:
      - description: 查询条件
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_billing.BillingAuditQuery'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 查询计费审计记录
      tags:
      - Billing
  /api/billing/calculator:
    post:
      consumes:
      - application/json
      parameters:
      - description: 计算请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_billing.TokenCalculatorRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_billing.TokenCalculatorResult'
              type: object
      security:
      - BearerAuth: []
      summary: Token 计价器
      tags:
      - Billing
  /api/billing/estimate:
    post:
      consumes:
      - application/json
      parameters:
      - description: 预估请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_billing.CostEstimateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_billing.CostEstimate'
              type: object
      security:
      - BearerAuth: []
      summary: 预估调用成本
      tags:
      - Billing
  /api/billing/pricings:
    get:
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.ListResponse'
            - properties:
                items:
                  items:
                    $ref: '#/definitions/backend_internal_billing.ModelPricing'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取模型定价列表
      tags:
      - Billing
    post:
      consumes:
      - application/json
      parameters:
      - description: 定价信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_billing.CreatePricingRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_billing.ModelPricing'
              type: object
      security:
      - BearerAuth: []
      summary: 创建模型定价
      tags:
      - Billing
  /api/billing/pricings/{id}:
    delete:
      parameters:
      - description: 定价ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 删除模型定价
      tags:
      - Billing
    put:
      consumes:
      - application/json
      parameters:
      - description: 定价ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_billing.UpdatePricingRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 更新模型定价
      tags:
      - Billing
  /api/billing/pricings/query:
    get:
      parameters:
      - description: 提供商
        in: query
        name: provider
        required: true
        type: string
      - description: 模型名称
        in: query
        name: model
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_billing.ModelPricing'
              type: object
      security:
      - BearerAuth: []
      summary: 获取模型定价详情
      tags:
      - Billing
  /api/billing/reports:
    post:
      consumes:
      - application/json
      parameters:
      - description: 报表请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_billing.CostReportRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_billing.CostReport'
              type: object
      security:
      - BearerAuth: []
      summary: 生成成本报表
      tags:
      - Billing
  /api/billing/strategies:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_billing.PricingStrategy'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取定价策略列表
      tags:
      - Billing
    post:
      consumes:
      - application/json
      parameters:
      - description: 策略配置
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_billing.PricingStrategy'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 创建定价策略
      tags:
      - Billing
  /api/billing/strategies/{id}:
    delete:
      parameters:
      - description: 策略ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 删除定价策略
      tags:
      - Billing
    put:
      consumes:
      - application/json
      parameters:
      - description: 策略ID
        in: path
        name: id
        required: true
        type: string
      - description: 策略配置
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_billing.PricingStrategy'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 更新定价策略
      tags:
      - Billing
  /api/billing/trend:
    get:
      parameters:
      - default: 30
        description: 天数
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_billing.DailyCostItem'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取成本趋势
      tags:
      - Billing
  /api/bookparser/dimensions:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取支持的分析维度列表
      tags:
      - BookParser
  /api/bookparser/knowledge/search:
    post:
      consumes:
      - application/json
      parameters:
      - description: 搜索请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_bookparser.SearchKnowledgeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_bookparser.BookKnowledge'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 搜索拆书知识库
      tags:
      - BookParser
  /api/bookparser/tasks:
    get:
      parameters:
      - description: 任务状态
        in: query
        name: status
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.ListResponse'
            - properties:
                items:
                  items:
                    $ref: '#/definitions/backend_internal_bookparser.BookParserTask'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 列出拆书任务
      tags:
      - BookParser
    post:
      consumes:
      - application/json
      parameters:
      - description: 任务请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_bookparser.CreateTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_bookparser.BookParserTask'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建拆书任务
      tags:
      - BookParser
  /api/bookparser/tasks/{id}:
    get:
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_bookparser.BookParserTask'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取拆书任务详情
      tags:
      - BookParser
  /api/bookparser/tasks/{id}/cancel:
    post:
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 取消拆书任务
      tags:
      - BookParser
  /api/bookparser/tasks/{id}/progress:
    get:
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_bookparser.TaskProgress'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取拆书任务进度
      tags:
      - BookParser
  /api/bookparser/tasks/{id}/results:
    get:
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_bookparser.AnalysisResult'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取拆书分析结果
      tags:
      - BookParser
  /api/codesearch/config/base-path:
    put:
      consumes:
      - application/json
      description: 设置代码搜索的基础目录路径
      parameters:
      - description: 路径配置
        in: body
        name: request
        required: true
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 设置搜索基础路径
      tags:
      - CodeSearch
  /api/codesearch/definition:
    post:
      consumes:
      - application/json
      description: 跳转到符号定义位置
      parameters:
      - description: 查找请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_codesearch.FindDefinitionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_codesearch.CodeSymbol'
              type: object
      security:
      - BearerAuth: []
      summary: 查找符号定义
      tags:
      - CodeSearch
  /api/codesearch/index:
    post:
      consumes:
      - application/json
      description: 重新构建代码符号索引
      parameters:
      - description: 构建请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_codesearch.BuildIndexRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 构建代码索引
      tags:
      - CodeSearch
  /api/codesearch/index/status:
    get:
      description: 获取代码索引的当前状态
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取索引状态
      tags:
      - CodeSearch
  /api/codesearch/outline:
    get:
      description: 获取文件的符号结构（函数、类、方法等）
      parameters:
      - description: 文件路径
        in: query
        name: file_path
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_codesearch.FileOutline'
              type: object
      security:
      - BearerAuth: []
      summary: 获取文件大纲
      tags:
      - CodeSearch
  /api/codesearch/references:
    post:
      consumes:
      - application/json
      description: 查找符号的所有引用位置
      parameters:
      - description: 查找请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_codesearch.FindReferencesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_codesearch.CodeReference'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 查找所有引用
      tags:
      - CodeSearch
  /api/codesearch/semantic:
    post:
      consumes:
      - application/json
      description: 基于 Embedding 的语义代码搜索
      parameters:
      - description: 搜索请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_codesearch.SemanticSearchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_codesearch.SearchResult'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 语义代码搜索
      tags:
      - CodeSearch
  /api/codesearch/symbols:
    post:
      consumes:
      - application/json
      description: 搜索函数、类、接口、方法等代码符号
      parameters:
      - description: 搜索请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_codesearch.SymbolSearchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_codesearch.SemanticSearchResult'
              type: object
      security:
      - BearerAuth: []
      summary: 搜索代码符号
      tags:
      - CodeSearch
  /api/codesearch/text:
    post:
      consumes:
      - application/json
      description: 在代码库中搜索文本（支持正则表达式）
      parameters:
      - description: 搜索请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_codesearch.TextSearchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_codesearch.SearchResult'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 文本搜索
      tags:
      - CodeSearch
  /api/commands:
    get:
      description: 获取命令执行历史列表
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 状态过滤
        in: query
        name: status
        type: string
      - description: Agent过滤
        in: query
        name: agentId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取命令列表
      tags:
      - Commands
    post:
      consumes:
      - application/json
      description: 提交AI命令执行请求
      parameters:
      - description: 命令信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_commands.executeCommandDTO'
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 执行命令
      tags:
      - Commands
  /api/commands/{id}:
    get:
      description: 查询命令执行状态和结果
      parameters:
      - description: 命令ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取命令详情
      tags:
      - Commands
  /api/compliance/alerts:
    get:
      description: 获取合规风险提示列表
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 仅未解决
        in: query
        name: unresolvedOnly
        type: boolean
      - description: 查看全部
        in: query
        name: all
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取风险提示列表
      tags:
      - Compliance
  /api/compliance/alerts/{id}/resolve:
    post:
      description: 标记风险提示为已解决
      parameters:
      - description: 提示ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 解决风险提示
      tags:
      - Compliance
  /api/compliance/checks:
    get:
      description: 获取合规检查记录列表
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 状态过滤
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取检查列表
      tags:
      - Compliance
    post:
      consumes:
      - application/json
      description: 执行内容合规检查
      parameters:
      - description: 检查请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_compliance.RunComplianceCheckRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 执行合规检查
      tags:
      - Compliance
  /api/compliance/copyrights:
    post:
      consumes:
      - application/json
      description: 登记内容版权信息
      parameters:
      - description: 版权信息
        in: body
        name: request
        required: true
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 登记版权
      tags:
      - Compliance
  /api/compliance/copyrights/{contentId}:
    get:
      description: 获取内容版权登记信息
      parameters:
      - description: 内容ID
        in: path
        name: contentId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取版权记录
      tags:
      - Compliance
  /api/compliance/ratings:
    post:
      consumes:
      - application/json
      description: 设置内容的年龄分级
      parameters:
      - description: 分级信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_compliance.SetContentRatingRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 设置内容分级
      tags:
      - Compliance
  /api/compliance/ratings/{contentId}:
    get:
      description: 获取内容的年龄分级信息
      parameters:
      - description: 内容ID
        in: path
        name: contentId
        required: true
        type: string
      - description: 内容类型
        in: query
        name: contentType
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取内容分级
      tags:
      - Compliance
  /api/compliance/reports:
    get:
      description: 获取合规报告列表
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取报告列表
      tags:
      - Compliance
    post:
      consumes:
      - application/json
      description: 生成合规统计报告
      parameters:
      - description: 报告参数
        in: body
        name: request
        required: true
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 生成合规报告
      tags:
      - Compliance
  /api/compliance/reports/{id}:
    get:
      description: 获取合规报告详情
      parameters:
      - description: 报告ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取报告详情
      tags:
      - Compliance
  /api/compliance/stats:
    get:
      description: 获取合规统计数据
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取合规统计
      tags:
      - Compliance
  /api/compliance/verifications:
    get:
      description: 获取实名认证列表（管理员）
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 状态过滤
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取认证列表
      tags:
      - Compliance
    post:
      consumes:
      - application/json
      description: 提交用户实名认证申请
      parameters:
      - description: 认证信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_compliance.SubmitVerificationRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: Conflict
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 提交实名认证
      tags:
      - Compliance
  /api/compliance/verifications/{id}/review:
    post:
      consumes:
      - application/json
      description: 审核用户实名认证（管理员）
      parameters:
      - description: 认证ID
        in: path
        name: id
        required: true
        type: string
      - description: 审核信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_compliance.ReviewVerificationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 审核实名认证
      tags:
      - Compliance
  /api/compliance/verifications/me:
    get:
      description: 获取当前用户的实名认证状态
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取我的认证状态
      tags:
      - Compliance
  /api/content/categories:
    get:
      description: 获取内容分类列表
      parameters:
      - description: 父分类ID
        in: query
        name: parentId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取分类列表
      tags:
      - Content
    post:
      consumes:
      - application/json
      description: 创建内容分类（管理员）
      parameters:
      - description: 分类信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_content.CreateCategoryRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建分类
      tags:
      - Content
  /api/content/categories/{id}:
    delete:
      description: 删除内容分类（管理员）
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除分类
      tags:
      - Content
    put:
      consumes:
      - application/json
      description: 更新内容分类（管理员）
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新字段
        in: body
        name: request
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新分类
      tags:
      - Content
  /api/content/reports:
    get:
      description: 获取举报列表（管理员）
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 状态过滤
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取举报列表
      tags:
      - Content
    post:
      consumes:
      - application/json
      description: 举报内容
      parameters:
      - description: 举报信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_content.CreateReportRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: Conflict
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建举报
      tags:
      - Content
  /api/content/reports/{id}/handle:
    post:
      consumes:
      - application/json
      description: 处理举报（管理员）
      parameters:
      - description: 举报ID
        in: path
        name: id
        required: true
        type: string
      - description: 处理信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_content.HandleReportRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 处理举报
      tags:
      - Content
  /api/content/stats:
    get:
      description: 获取内容统计数据（管理员）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取内容统计
      tags:
      - Content
  /api/content/tags:
    get:
      description: 获取内容标签列表
      parameters:
      - description: 仅热门标签
        in: query
        name: hotOnly
        type: boolean
      - description: 数量限制
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取标签列表
      tags:
      - Content
  /api/content/tags/{id}/hot:
    put:
      consumes:
      - application/json
      description: 设置标签热门状态（管理员）
      parameters:
      - description: 标签ID
        in: path
        name: id
        required: true
        type: string
      - description: 热门状态
        in: body
        name: request
        required: true
        schema:
          additionalProperties:
            type: boolean
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 设置热门标签
      tags:
      - Content
  /api/content/works:
    get:
      description: 获取作品列表，支持分页和筛选
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 用户ID
        in: query
        name: userId
        type: string
      - description: 分类ID
        in: query
        name: categoryId
        type: string
      - description: 标签
        in: query
        name: tag
        type: string
      - description: 状态
        in: query
        name: status
        type: string
      - description: 关键词
        in: query
        name: keyword
        type: string
      - description: 排序方式
        in: query
        name: sortBy
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取作品列表
      tags:
      - Content
    post:
      consumes:
      - application/json
      description: 发布新的公开作品
      parameters:
      - description: 作品信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_content.PublishWorkRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 发布作品
      tags:
      - Content
  /api/content/works/{id}:
    delete:
      description: 删除指定作品
      parameters:
      - description: 作品ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除作品
      tags:
      - Content
    get:
      description: 根据ID获取作品详细信息
      parameters:
      - description: 作品ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取作品详情
      tags:
      - Content
    put:
      consumes:
      - application/json
      description: 更新指定作品信息
      parameters:
      - description: 作品ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_content.UpdateWorkRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新作品
      tags:
      - Content
  /api/content/works/{id}/offline:
    post:
      consumes:
      - application/json
      description: 下架指定作品（管理员）
      parameters:
      - description: 作品ID
        in: path
        name: id
        required: true
        type: string
      - description: 下架原因
        in: body
        name: request
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 下架作品
      tags:
      - Content
  /api/content/works/{id}/recommend:
    post:
      consumes:
      - application/json
      description: 设置作品推荐状态（管理员）
      parameters:
      - description: 作品ID
        in: path
        name: id
        required: true
        type: string
      - description: 推荐信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_content.RecommendWorkRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 设置推荐
      tags:
      - Content
  /api/content/works/{id}/review:
    post:
      consumes:
      - application/json
      description: 审核指定作品（管理员）
      parameters:
      - description: 作品ID
        in: path
        name: id
        required: true
        type: string
      - description: 审核信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_content.ReviewWorkRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 审核作品
      tags:
      - Content
  /api/content/works/recommend:
    get:
      description: 获取推荐作品列表
      parameters:
      - description: 数量限制
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取推荐作品
      tags:
      - Content
  /api/content/works/search:
    post:
      consumes:
      - application/json
      description: 搜索作品，支持全文搜索和高级筛选
      parameters:
      - description: 搜索条件
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_content.SearchWorksRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 搜索作品
      tags:
      - Content
  /api/credits/balance:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取积分余额
      tags:
      - Credits
  /api/credits/export:
    get:
      parameters:
      - description: 用户ID
        in: query
        name: userId
        type: string
      - description: 交易类型
        in: query
        name: type
        type: string
      - description: 开始时间
        in: query
        name: startTime
        type: string
      - description: 结束时间
        in: query
        name: endTime
        type: string
      produces:
      - text/csv
      responses:
        "200":
          description: CSV内容
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: 导出积分流水为CSV
      tags:
      - Credits
  /api/credits/gift:
    post:
      consumes:
      - application/json
      parameters:
      - description: 赠送请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_credits.giftDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 赠送积分给用户
      tags:
      - Credits
  /api/credits/recharge:
    post:
      consumes:
      - application/json
      parameters:
      - description: 充值请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_credits.rechargeDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 为用户充值积分
      tags:
      - Credits
  /api/credits/stats:
    get:
      parameters:
      - description: 统计周期 (daily/weekly/monthly)
        in: query
        name: period
        type: string
      - description: 用户ID
        in: query
        name: userId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取积分统计
      tags:
      - Credits
  /api/credits/transactions:
    get:
      parameters:
      - description: 用户ID
        in: query
        name: userId
        type: string
      - description: 交易类型
        in: query
        name: type
        type: string
      - description: 开始时间
        in: query
        name: startTime
        type: string
      - description: 结束时间
        in: query
        name: endTime
        type: string
      - description: 每页数量
        in: query
        name: limit
        type: integer
      - description: 偏移量
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 查询积分流水
      tags:
      - Credits
  /api/credits/users:
    get:
      parameters:
      - description: 每页数量
        in: query
        name: limit
        type: integer
      - description: 偏移量
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取所有用户积分摘要
      tags:
      - Credits
  /api/credits/users/{userId}/balance:
    get:
      parameters:
      - description: 用户ID
        in: path
        name: userId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取指定用户积分余额
      tags:
      - Credits
  /api/credits/warn-threshold:
    put:
      consumes:
      - application/json
      parameters:
      - description: 阈值
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_credits.updateThresholdDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 更新积分预警阈值
      tags:
      - Credits
  /api/documents/{id}:
    delete:
      parameters:
      - description: 文档 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除文档
      tags:
      - KnowledgeBase
    get:
      parameters:
      - description: 文档 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_models.Document'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 文档详情
      tags:
      - KnowledgeBase
    put:
      consumes:
      - application/json
      parameters:
      - description: 文档 ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新文档请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_models.UpdateDocumentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_models.Document'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新文档
      tags:
      - KnowledgeBase
  /api/documents/{id}/chunks:
    get:
      parameters:
      - description: 文档 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 文档分块列表
      tags:
      - KnowledgeBase
  /api/executions/{id}:
    get:
      parameters:
      - description: 执行 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_handlers_workflows.WorkflowExecutionDetailResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询执行详情
      tags:
      - Workflows
  /api/files:
    patch:
      consumes:
      - application/json
      description: 重命名或移动文件到新位置
      parameters:
      - description: 更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_files.patchFileDTO'
      - description: 版本校验
        in: header
        name: If-Match
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 重命名或移动文件
      tags:
      - Files
    post:
      consumes:
      - application/json
      description: 新建文件或保存已有文件内容
      parameters:
      - description: 文件信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_files.saveFileDTO'
      - description: 版本校验（更新时必填）
        in: header
        name: If-Match
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: Conflict
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建或保存文件
      tags:
      - Files
  /api/files/{id}:
    delete:
      description: 删除指定文件
      parameters:
      - description: 文件ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除文件
      tags:
      - Files
  /api/files/content:
    get:
      description: 获取指定文件的内容
      parameters:
      - description: 节点ID
        in: query
        name: nodeId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取文件内容
      tags:
      - Files
  /api/files/diff:
    get:
      description: 比对两个版本之间的差异
      parameters:
      - description: 版本A
        in: query
        name: versionA
        required: true
        type: string
      - description: 版本B
        in: query
        name: versionB
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 版本差异比对
      tags:
      - Files
  /api/files/download/{nodeId}:
    get:
      description: 下载指定文件
      parameters:
      - description: 节点ID
        in: path
        name: nodeId
        required: true
        type: string
      produces:
      - application/octet-stream
      responses:
        "200":
          description: OK
          schema:
            type: file
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 下载文件
      tags:
      - Files
  /api/files/history/{nodeId}:
    get:
      description: 获取文件的版本变更记录
      parameters:
      - description: 节点ID
        in: path
        name: nodeId
        required: true
        type: string
      - description: 数量限制
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取文件版本历史
      tags:
      - Files
  /api/files/preview/{nodeId}:
    get:
      description: 获取文件预览信息
      parameters:
      - description: 节点ID
        in: path
        name: nodeId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取文件预览
      tags:
      - Files
  /api/files/revert:
    post:
      consumes:
      - application/json
      description: 将文件恢复到指定版本
      parameters:
      - description: 恢复信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_files.revertFileDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 恢复文件版本
      tags:
      - Files
  /api/files/search:
    post:
      consumes:
      - application/json
      description: 搜索文件内容
      parameters:
      - description: 搜索条件
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_files.searchFileDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 搜索文件
      tags:
      - Files
  /api/files/tree:
    get:
      description: 获取工作区文件树结构
      parameters:
      - description: 深度限制
        in: query
        name: depth
        type: integer
      - description: 游标
        in: query
        name: cursor
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取文件树
      tags:
      - Files
  /api/files/upload:
    post:
      consumes:
      - multipart/form-data
      description: 上传小文件（非分片）
      parameters:
      - description: 文件
        in: formData
        name: file
        required: true
        type: file
      - description: 父目录ID
        in: formData
        name: parentId
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 单文件上传
      tags:
      - Files
  /api/files/upload/{uploadId}/chunk:
    post:
      consumes:
      - multipart/form-data
      description: 上传文件分片数据
      parameters:
      - description: 上传ID
        in: path
        name: uploadId
        required: true
        type: string
      - description: 分片索引
        in: formData
        name: chunkIndex
        required: true
        type: integer
      - description: 分片数据
        in: formData
        name: chunk
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 上传分片
      tags:
      - Files
  /api/files/upload/{uploadId}/complete:
    post:
      consumes:
      - application/json
      description: 完成分片上传合并文件
      parameters:
      - description: 上传ID
        in: path
        name: uploadId
        required: true
        type: string
      - description: 完成信息
        in: body
        name: request
        schema:
          $ref: '#/definitions/api_handlers_files.completeUploadDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 完成上传
      tags:
      - Files
  /api/files/upload/initiate:
    post:
      consumes:
      - application/json
      description: 初始化大文件分片上传
      parameters:
      - description: 上传信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_files.initiateUploadDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 初始化分片上传
      tags:
      - Files
  /api/files/uploads:
    get:
      description: 获取上传记录列表
      parameters:
      - description: 数量限制
        in: query
        name: limit
        type: integer
      - description: 偏移量
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 列出上传记录
      tags:
      - Files
  /api/files/uploads/{uploadId}:
    delete:
      description: 删除指定的上传文件
      parameters:
      - description: 上传ID
        in: path
        name: uploadId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除上传文件
      tags:
      - Files
  /api/fragments:
    get:
      description: 根据条件查询片段列表（支持分页、过滤、排序）
      parameters:
      - description: 片段类型
        enum:
        - inspiration
        - material
        - todo
        - note
        - reference
        in: query
        name: type
        type: string
      - description: 片段状态
        enum:
        - pending
        - completed
        - archived
        in: query
        name: status
        type: string
      - description: 工作空间ID
        in: query
        name: workspace_id
        type: string
      - description: 作品ID
        in: query
        name: work_id
        type: string
      - description: 章节ID
        in: query
        name: chapter_id
        type: string
      - description: 标签（逗号分隔）
        in: query
        name: tags
        type: string
      - description: 关键词搜索
        in: query
        name: keyword
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 排序字段
        enum:
        - created_at
        - priority
        - due_date
        in: query
        name: sort_by
        type: string
      - description: 排序方向
        enum:
        - asc
        - desc
        in: query
        name: sort_order
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.PagedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_fragment.Fragment'
                  type: array
              type: object
      summary: 查询片段列表
      tags:
      - Fragment
    post:
      consumes:
      - application/json
      description: 创建灵感片段、素材、待办事项等
      parameters:
      - description: 创建请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_fragment.CreateFragmentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_fragment.Fragment'
              type: object
      summary: 创建片段
      tags:
      - Fragment
  /api/fragments/{id}:
    delete:
      description: 删除片段（软删除）
      parameters:
      - description: 片段ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 删除片段
      tags:
      - Fragment
    get:
      description: 根据ID获取片段详情
      parameters:
      - description: 片段ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_fragment.Fragment'
              type: object
      summary: 获取片段详情
      tags:
      - Fragment
    put:
      consumes:
      - application/json
      description: 更新片段信息
      parameters:
      - description: 片段ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_fragment.UpdateFragmentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_fragment.Fragment'
              type: object
      summary: 更新片段
      tags:
      - Fragment
  /api/fragments/{id}/complete:
    post:
      description: 标记片段为已完成（主要用于待办事项）
      parameters:
      - description: 片段ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 完成片段
      tags:
      - Fragment
  /api/fragments/batch:
    post:
      consumes:
      - application/json
      description: 批量完成、归档、删除或更改状态
      parameters:
      - description: 批量操作请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_fragment.BatchOperationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 批量操作
      tags:
      - Fragment
  /api/fragments/stats:
    get:
      description: 获取片段统计信息（按类型、状态分组）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_fragment.FragmentStatsResponse'
              type: object
      summary: 获取片段统计
      tags:
      - Fragment
  /api/knowledge-bases:
    get:
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 知识库列表
      tags:
      - KnowledgeBase
    post:
      consumes:
      - application/json
      parameters:
      - description: 知识库信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_knowledge.CreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_models.KnowledgeBase'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建知识库
      tags:
      - KnowledgeBase
  /api/knowledge-bases/{id}:
    delete:
      parameters:
      - description: 知识库 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除知识库
      tags:
      - KnowledgeBase
    get:
      parameters:
      - description: 知识库 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_models.KnowledgeBase'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 知识库详情
      tags:
      - KnowledgeBase
    put:
      consumes:
      - application/json
      parameters:
      - description: 知识库 ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_knowledge.UpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_models.KnowledgeBase'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新知识库
      tags:
      - KnowledgeBase
  /api/knowledge-bases/{id}/context:
    post:
      consumes:
      - application/json
      parameters:
      - description: 知识库 ID
        in: path
        name: id
        required: true
        type: string
      - description: 上下文请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_knowledge.GetContextRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取检索上下文
      tags:
      - KnowledgeBase
  /api/knowledge-bases/{id}/documents:
    get:
      parameters:
      - description: 知识库 ID
        in: path
        name: id
        required: true
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 列出知识库文档
      tags:
      - KnowledgeBase
    post:
      consumes:
      - multipart/form-data
      parameters:
      - description: 知识库 ID
        in: path
        name: id
        required: true
        type: string
      - description: 文档文件
        in: formData
        name: file
        required: true
        type: file
      - description: 文档标题
        in: formData
        name: title
        type: string
      - description: 来源
        in: formData
        name: source
        type: string
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传知识库文档
      tags:
      - KnowledgeBase
  /api/knowledge-bases/{id}/documents/text:
    post:
      consumes:
      - application/json
      parameters:
      - description: 知识库 ID
        in: path
        name: id
        required: true
        type: string
      - description: 文档内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_knowledge.CreateTextDocumentRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建知识库文本文档
      tags:
      - KnowledgeBase
  /api/knowledge-bases/{id}/search:
    post:
      consumes:
      - application/json
      parameters:
      - description: 知识库 ID
        in: path
        name: id
        required: true
        type: string
      - description: 检索请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_knowledge.SearchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 语义检索
      tags:
      - KnowledgeBase
  /api/knowledge-bases/{id}/sharing:
    get:
      description: 获取知识库的所有共享
      parameters:
      - description: 知识库ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 列出知识库共享
      tags:
      - KBSharing
    post:
      consumes:
      - application/json
      description: 创建知识库共享链接
      parameters:
      - description: 知识库ID
        in: path
        name: id
        required: true
        type: string
      - description: 共享信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_rag.CreateShareRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建知识库共享
      tags:
      - KBSharing
  /api/knowledge-bases/{id}/sharing/{shareId}:
    delete:
      description: 删除知识库共享
      parameters:
      - description: 知识库ID
        in: path
        name: id
        required: true
        type: string
      - description: 共享ID
        in: path
        name: shareId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除共享
      tags:
      - KBSharing
    get:
      description: 获取共享详细信息
      parameters:
      - description: 知识库ID
        in: path
        name: id
        required: true
        type: string
      - description: 共享ID
        in: path
        name: shareId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取共享详情
      tags:
      - KBSharing
    put:
      consumes:
      - application/json
      description: 更新共享配置
      parameters:
      - description: 知识库ID
        in: path
        name: id
        required: true
        type: string
      - description: 共享ID
        in: path
        name: shareId
        required: true
        type: string
      - description: 更新字段
        in: body
        name: request
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新共享
      tags:
      - KBSharing
  /api/knowledge-bases/{id}/sharing/{shareId}/accept:
    delete:
      description: 取消接受共享/离开共享
      parameters:
      - description: 知识库ID
        in: path
        name: id
        required: true
        type: string
      - description: 共享ID
        in: path
        name: shareId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 撤销共享接受
      tags:
      - KBSharing
    post:
      consumes:
      - application/json
      description: 接受知识库共享邀请
      parameters:
      - description: 知识库ID
        in: path
        name: id
        required: true
        type: string
      - description: 共享ID
        in: path
        name: shareId
        required: true
        type: string
      - description: 别名设置
        in: body
        name: request
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 接受共享
      tags:
      - KBSharing
  /api/knowledge-bases/{id}/sharing/{shareId}/logs:
    get:
      description: 获取共享的访问记录
      parameters:
      - description: 知识库ID
        in: path
        name: id
        required: true
        type: string
      - description: 共享ID
        in: path
        name: shareId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取共享访问日志
      tags:
      - KBSharing
  /api/marketplace/admin/packages/{id}/approve:
    post:
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 审核通过工具包
      tags:
      - Marketplace Admin
  /api/marketplace/admin/packages/{id}/deprecate:
    post:
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 废弃工具包
      tags:
      - Marketplace Admin
  /api/marketplace/admin/packages/{id}/reject:
    post:
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 审核拒绝工具包
      tags:
      - Marketplace Admin
  /api/marketplace/admin/pending:
    get:
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_tools_marketplace.PackageListResponse'
      security:
      - BearerAuth: []
      summary: 获取待审核的工具包列表
      tags:
      - Marketplace Admin
  /api/marketplace/installed:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取已安装的工具列表
      tags:
      - Marketplace
  /api/marketplace/packages:
    get:
      parameters:
      - description: 分类
        in: query
        name: category
        type: string
      - description: 排序字段
        in: query
        name: sort_by
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_tools_marketplace.PackageListResponse'
      summary: 获取工具列表
      tags:
      - Marketplace
  /api/marketplace/packages/{id}:
    delete:
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 删除工具包
      tags:
      - Marketplace
    get:
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_tools_marketplace.PackageDetailResponse'
      security:
      - BearerAuth: []
      summary: 获取工具详情
      tags:
      - Marketplace
    put:
      consumes:
      - application/json
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_tools_marketplace.UpdatePackageRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 更新工具包信息
      tags:
      - Marketplace
  /api/marketplace/packages/{id}/install:
    post:
      consumes:
      - application/json
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      - description: 版本号（默认最新）
        in: query
        name: version
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 安装工具
      tags:
      - Marketplace
  /api/marketplace/packages/{id}/rate:
    post:
      consumes:
      - application/json
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      - description: 评分请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_tools_marketplace.RatingRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 评价工具
      tags:
      - Marketplace
  /api/marketplace/packages/{id}/ratings:
    get:
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      summary: 获取工具评分列表
      tags:
      - Marketplace
  /api/marketplace/packages/{id}/uninstall:
    post:
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 卸载工具
      tags:
      - Marketplace
  /api/marketplace/packages/{id}/versions:
    get:
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      summary: 获取工具版本列表
      tags:
      - Marketplace
    post:
      consumes:
      - application/json
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      - description: 版本请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_tools_marketplace.PublishVersionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 发布工具新版本
      tags:
      - Marketplace
  /api/marketplace/packages/{id}/versions/{version}:
    get:
      parameters:
      - description: 工具包ID
        in: path
        name: id
        required: true
        type: string
      - description: 版本号
        in: path
        name: version
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      summary: 获取版本详情
      tags:
      - Marketplace
  /api/marketplace/publish:
    post:
      consumes:
      - application/json
      parameters:
      - description: 发布请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_tools_marketplace.PublishRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 发布工具到市场
      tags:
      - Marketplace
  /api/marketplace/search:
    post:
      consumes:
      - application/json
      parameters:
      - description: 搜索请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_tools_marketplace.SearchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_tools_marketplace.PackageListResponse'
      summary: 搜索工具市场
      tags:
      - Marketplace
  /api/marketplace/stats:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_tools_marketplace.MarketplaceStats'
      summary: 获取市场统计
      tags:
      - Marketplace
  /api/memos:
    get:
      description: 获取用户的备忘录列表
      parameters:
      - description: 分类过滤
        in: query
        name: category
        type: string
      - description: 状态过滤
        in: query
        name: status
        type: string
      - description: 优先级过滤
        in: query
        name: priority
        type: string
      - description: 是否置顶
        in: query
        name: pinned
        type: boolean
      - description: 是否已归档
        in: query
        name: archived
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 列出备忘录
      tags:
      - Memo
    post:
      consumes:
      - application/json
      description: 创建新的备忘录
      parameters:
      - description: 备忘录信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_memo.CreateMemoRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建备忘录
      tags:
      - Memo
  /api/memos/{id}:
    delete:
      description: 删除指定备忘录
      parameters:
      - description: 备忘录ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除备忘录
      tags:
      - Memo
    get:
      description: 根据ID获取备忘录详情
      parameters:
      - description: 备忘录ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取备忘录详情
      tags:
      - Memo
    put:
      consumes:
      - application/json
      description: 更新指定备忘录
      parameters:
      - description: 备忘录ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_memo.UpdateMemoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新备忘录
      tags:
      - Memo
  /api/memos/{id}/archive:
    post:
      description: 将备忘录归档
      parameters:
      - description: 备忘录ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 归档备忘录
      tags:
      - Memo
  /api/memos/{id}/complete:
    post:
      description: 标记备忘录为已完成
      parameters:
      - description: 备忘录ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 完成备忘录
      tags:
      - Memo
  /api/memos/{id}/pin:
    post:
      description: 切换备忘录的置顶状态
      parameters:
      - description: 备忘录ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 切换置顶状态
      tags:
      - Memo
  /api/memos/categories:
    get:
      description: 获取用户的备忘录分类列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 列出分类
      tags:
      - Memo
  /api/memos/search:
    post:
      consumes:
      - application/json
      description: 搜索用户的备忘录
      parameters:
      - description: 搜索条件
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_memo.SearchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 搜索备忘录
      tags:
      - Memo
  /api/memos/tags:
    get:
      description: 获取用户的备忘录标签列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 列出标签
      tags:
      - Memo
  /api/messages:
    get:
      description: 查询用户的消息列表（支持过滤和分页）
      parameters:
      - description: 消息状态
        enum:
        - unread
        - read
        in: query
        name: status
        type: string
      - description: 消息分类
        in: query
        name: category
        type: string
      - description: 优先级
        enum:
        - low
        - normal
        - high
        - urgent
        in: query
        name: priority
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.PagedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_notification.UserMessage'
                  type: array
              type: object
      summary: 查询消息列表
      tags:
      - Messages
  /api/messages/{id}:
    delete:
      description: 删除指定消息（软删除）
      parameters:
      - description: 消息ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 删除消息
      tags:
      - Messages
    get:
      description: 根据ID获取消息详情
      parameters:
      - description: 消息ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_notification.UserMessage'
              type: object
      summary: 获取消息详情
      tags:
      - Messages
  /api/messages/{id}/read:
    post:
      description: 将指定消息标记为已读状态
      parameters:
      - description: 消息ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 标记消息为已读
      tags:
      - Messages
  /api/messages/{id}/unread:
    post:
      description: 将指定消息标记为未读状态
      parameters:
      - description: 消息ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 标记消息为未读
      tags:
      - Messages
  /api/messages/batch-delete:
    post:
      consumes:
      - application/json
      description: 批量删除指定消息
      parameters:
      - description: 批量删除请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_notifications.BatchDeleteMessagesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 批量删除消息
      tags:
      - Messages
  /api/messages/batch-read:
    post:
      consumes:
      - application/json
      description: 批量将指定消息标记为已读
      parameters:
      - description: 批量标记请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_notifications.BatchMarkAsReadRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 批量标记消息为已读
      tags:
      - Messages
  /api/messages/read-all:
    post:
      consumes:
      - application/json
      description: 将用户所有消息（或指定分类）标记为已读
      parameters:
      - description: 请求参数
        in: body
        name: request
        schema:
          $ref: '#/definitions/api_handlers_notifications.MarkAllAsReadRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 标记所有消息为已读
      tags:
      - Messages
  /api/messages/stats:
    get:
      description: 获取用户的消息统计信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_notification.MessageStats'
              type: object
      summary: 获取消息统计
      tags:
      - Messages
  /api/messages/unread-count:
    get:
      description: 获取用户的未读消息总数
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  format: int64
                  type: integer
              type: object
      summary: 获取未读消息数量
      tags:
      - Messages
  /api/messages/unread-count/by-category:
    get:
      description: 获取用户各分类的未读消息数量
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  additionalProperties:
                    format: int64
                    type: integer
                  type: object
              type: object
      summary: 按分类获取未读消息数量
      tags:
      - Messages
  /api/metrics/cost:
    get:
      description: 获取当前用户的成本分析数据
      parameters:
      - description: 时间范围(day/week/month)
        in: query
        name: range
        type: string
      - description: 开始时间(RFC3339)
        in: query
        name: start
        type: string
      - description: 结束时间(RFC3339)
        in: query
        name: end
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取成本统计
      tags:
      - Metrics
  /api/metrics/cost/trend:
    get:
      description: 获取每日成本趋势数据（管理员）
      parameters:
      - description: 天数
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取成本趋势
      tags:
      - Metrics
  /api/metrics/model-calls/query:
    post:
      consumes:
      - application/json
      description: 查询模型调用日志（管理员）
      parameters:
      - description: 查询条件
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_metrics.ModelCallLogsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 查询模型调用日志
      tags:
      - Metrics
  /api/metrics/models/stats:
    get:
      description: 获取模型使用统计数据（管理员）
      parameters:
      - description: 时间范围(day/week/month)
        in: query
        name: range
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取模型统计
      tags:
      - Metrics
  /api/metrics/models/top-cost:
    get:
      description: 获取成本排名前N的模型（管理员）
      parameters:
      - description: 时间范围(day/week/month)
        in: query
        name: range
        type: string
      - description: 返回数量
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取成本最高的模型
      tags:
      - Metrics
  /api/metrics/tenant/cost:
    get:
      description: 获取租户的成本分析数据（管理员）
      parameters:
      - description: 时间范围(day/week/month)
        in: query
        name: range
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取租户成本分析
      tags:
      - Metrics
  /api/metrics/tenant/usage:
    get:
      description: 获取租户的使用统计数据（管理员）
      parameters:
      - description: 时间范围(day/week/month)
        in: query
        name: range
        type: string
      - description: 开始时间(RFC3339)
        in: query
        name: start
        type: string
      - description: 结束时间(RFC3339)
        in: query
        name: end
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取租户使用统计
      tags:
      - Metrics
  /api/metrics/usage:
    get:
      description: 获取当前用户的使用统计数据
      parameters:
      - description: 时间范围(day/week/month)
        in: query
        name: range
        type: string
      - description: 开始时间(RFC3339)
        in: query
        name: start
        type: string
      - description: 结束时间(RFC3339)
        in: query
        name: end
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取使用统计
      tags:
      - Metrics
  /api/metrics/workflow-executions/query:
    post:
      consumes:
      - application/json
      description: 查询工作流执行日志（管理员）
      parameters:
      - description: 查询条件
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_metrics.WorkflowExecutionLogsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 查询工作流执行日志
      tags:
      - Metrics
  /api/models:
    get:
      description: 获取AI模型列表，支持按提供商、类型、状态筛选
      parameters:
      - description: 提供商过滤
        in: query
        name: provider
        type: string
      - description: 模型类型过滤
        in: query
        name: type
        type: string
      - description: 状态过滤
        in: query
        name: status
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 查询模型列表
      tags:
      - Models
    post:
      consumes:
      - application/json
      description: 创建新的AI模型配置
      parameters:
      - description: 创建模型请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_models.CreateModelRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建AI模型
      tags:
      - Models
  /api/models/{id}:
    delete:
      description: 删除指定的AI模型
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除AI模型
      tags:
      - Models
    get:
      description: 根据ID获取AI模型详细信息
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取模型详情
      tags:
      - Models
    put:
      consumes:
      - application/json
      description: 更新AI模型配置信息
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新模型请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_models.UpdateModelRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新AI模型
      tags:
      - Models
  /api/models/{id}/credentials:
    get:
      description: 获取指定模型绑定的所有API凭证
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/backend_internal_models.ModelCredential'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 列出模型凭证
      tags:
      - Models
    post:
      consumes:
      - application/json
      description: 为指定模型创建API凭证
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: string
      - description: 凭证信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_models.createCredentialRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_models.ModelCredential'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建模型凭证
      tags:
      - Models
  /api/models/{id}/credentials/{credentialId}:
    delete:
      description: 删除指定的模型API凭证
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: string
      - description: 凭证ID
        in: path
        name: credentialId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除模型凭证
      tags:
      - Models
  /api/models/{id}/stats:
    get:
      description: 获取指定模型的调用统计信息
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: string
      - description: 开始时间 (2006-01-02)
        in: query
        name: start_time
        type: string
      - description: 结束时间 (2006-01-02)
        in: query
        name: end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取模型调用统计
      tags:
      - Models
  /api/models/discover-all:
    post:
      description: 从所有已配置的AI提供商同步可用模型列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 发现所有提供商模型
      tags:
      - Models
  /api/models/discover/{provider}:
    post:
      description: 从指定AI提供商同步可用模型列表
      parameters:
      - description: 提供商名称
        in: path
        name: provider
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 发现提供商模型
      tags:
      - Models
  /api/models/seed:
    post:
      description: 为租户初始化系统预置的AI模型
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 初始化预置模型
      tags:
      - Models
  /api/moderation/filter:
    post:
      consumes:
      - application/json
      parameters:
      - description: 内容
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_moderation.FilterResult'
              type: object
      security:
      - BearerAuth: []
      summary: 过滤内容中的敏感词
      tags:
      - Moderation
  /api/moderation/queue:
    get:
      parameters:
      - description: 数量限制
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_moderation.ModerationTask'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取待审核队列
      tags:
      - Moderation
  /api/moderation/review:
    post:
      consumes:
      - application/json
      parameters:
      - description: 审核信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_moderation.ReviewRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_moderation.ModerationRecord'
              type: object
      security:
      - BearerAuth: []
      summary: 审核任务
      tags:
      - Moderation
  /api/moderation/rules:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_moderation.ModerationRule'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取审核规则列表
      tags:
      - Moderation
    post:
      consumes:
      - application/json
      parameters:
      - description: 规则配置
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_moderation.ModerationRule'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 创建审核规则
      tags:
      - Moderation
  /api/moderation/rules/{id}:
    delete:
      parameters:
      - description: 规则ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 删除审核规则
      tags:
      - Moderation
    put:
      consumes:
      - application/json
      parameters:
      - description: 规则ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新内容
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 更新审核规则
      tags:
      - Moderation
  /api/moderation/stats:
    get:
      parameters:
      - default: monthly
        description: 统计周期
        in: query
        name: period
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_moderation.ModerationStats'
              type: object
      security:
      - BearerAuth: []
      summary: 获取审核统计
      tags:
      - Moderation
  /api/moderation/submit:
    post:
      consumes:
      - application/json
      parameters:
      - description: 审核内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_moderation.SubmitContentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_moderation.ModerationTask'
              type: object
      security:
      - BearerAuth: []
      summary: 提交内容审核
      tags:
      - Moderation
  /api/moderation/tasks:
    get:
      parameters:
      - description: 状态
        in: query
        name: status
        type: string
      - description: 内容类型
        in: query
        name: contentType
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
      security:
      - BearerAuth: []
      summary: 获取审核任务列表
      tags:
      - Moderation
  /api/moderation/tasks/{id}:
    get:
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_moderation.ModerationTask'
              type: object
      security:
      - BearerAuth: []
      summary: 获取审核任务详情
      tags:
      - Moderation
  /api/moderation/tasks/{id}/assign:
    post:
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 分配审核任务
      tags:
      - Moderation
  /api/moderation/tasks/{id}/records:
    get:
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_moderation.ModerationRecord'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取任务审核记录
      tags:
      - Moderation
  /api/moderation/words:
    get:
      parameters:
      - description: 类别
        in: query
        name: category
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
      security:
      - BearerAuth: []
      summary: 获取敏感词列表
      tags:
      - Moderation
    post:
      consumes:
      - application/json
      parameters:
      - description: 敏感词信息
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_moderation.SensitiveWord'
              type: object
      security:
      - BearerAuth: []
      summary: 添加敏感词
      tags:
      - Moderation
  /api/moderation/words/{id}:
    delete:
      parameters:
      - description: 敏感词ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 删除敏感词
      tags:
      - Moderation
  /api/moderation/words/batch:
    post:
      consumes:
      - application/json
      parameters:
      - description: 批量敏感词
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_moderation.BatchWordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 批量添加敏感词
      tags:
      - Moderation
  /api/multimodel/draw:
    post:
      consumes:
      - application/json
      description: 同时调用多个AI模型生成内容并对比结果
      parameters:
      - description: 抽卡请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_multimodel.DrawRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_multimodel.DrawResponse'
              type: object
      summary: 多模型抽卡
      tags:
      - MultiModel
  /api/multimodel/draws:
    get:
      description: 查询用户的抽卡历史记录
      parameters:
      - description: Agent类型
        in: query
        name: agent_type
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.PagedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_multimodel.DrawHistory'
                  type: array
              type: object
      summary: 查询抽卡历史列表
      tags:
      - MultiModel
  /api/multimodel/draws/{id}:
    delete:
      description: 删除指定的抽卡历史记录
      parameters:
      - description: 抽卡ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 删除抽卡历史
      tags:
      - MultiModel
    get:
      description: 根据ID获取抽卡历史详情
      parameters:
      - description: 抽卡ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_multimodel.DrawHistory'
              type: object
      summary: 获取抽卡历史详情
      tags:
      - MultiModel
  /api/multimodel/regenerate:
    post:
      consumes:
      - application/json
      description: 重新调用指定模型生成结果
      parameters:
      - description: 重新生成请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_multimodel.RegenerateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_multimodel.DrawResult'
              type: object
      summary: 重新生成结果
      tags:
      - MultiModel
  /api/multimodel/stats:
    get:
      description: 获取用户的抽卡统计信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
      summary: 获取抽卡统计
      tags:
      - MultiModel
  /api/plot/apply:
    post:
      consumes:
      - application/json
      description: 将选定的剧情分支应用到指定章节
      parameters:
      - description: 应用请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_plot.ApplyPlotRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 应用剧情到章节
      tags:
      - Plot
  /api/plot/recommendations:
    get:
      description: 查询剧情推演历史记录
      parameters:
      - description: 工作空间ID
        in: query
        name: workspace_id
        type: string
      - description: 作品ID
        in: query
        name: work_id
        type: string
      - description: 章节ID
        in: query
        name: chapter_id
        type: string
      - description: 是否已应用
        in: query
        name: applied
        type: boolean
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.PagedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_plot.PlotRecommendationResponse'
                  type: array
              type: object
      summary: 查询剧情推演列表
      tags:
      - Plot
    post:
      consumes:
      - application/json
      description: 基于当前剧情生成多个后续剧情分支
      parameters:
      - description: 推演请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_plot.CreatePlotRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_plot.PlotRecommendationResponse'
              type: object
      summary: 创建剧情推演
      tags:
      - Plot
  /api/plot/recommendations/{id}:
    delete:
      description: 删除剧情推演记录
      parameters:
      - description: 推演ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 删除剧情推演
      tags:
      - Plot
    get:
      description: 根据ID获取剧情推演详情和分支
      parameters:
      - description: 推演ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_plot.PlotRecommendationResponse'
              type: object
      summary: 获取剧情推演详情
      tags:
      - Plot
    put:
      consumes:
      - application/json
      description: 更新剧情推演信息（如选择分支）
      parameters:
      - description: 推演ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_plot.UpdatePlotRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_plot.PlotRecommendationResponse'
              type: object
      summary: 更新剧情推演
      tags:
      - Plot
  /api/plot/stats:
    get:
      description: 获取剧情推演的统计信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
      summary: 获取剧情推演统计
      tags:
      - Plot
  /api/received-shares:
    get:
      description: 获取收到的所有知识库共享
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 列出收到的共享
      tags:
      - KBSharing
  /api/shared-kb/{token}:
    get:
      description: 通过共享token验证并获取知识库
      parameters:
      - description: 共享Token
        in: path
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 通过token获取共享知识库
      tags:
      - KBSharing
  /api/shared-kb/{token}/search:
    post:
      consumes:
      - application/json
      description: 在共享知识库中进行搜索
      parameters:
      - description: 共享Token
        in: path
        name: token
        required: true
        type: string
      - description: 搜索条件
        in: body
        name: request
        required: true
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 搜索共享知识库
      tags:
      - KBSharing
  /api/subscription/cancel:
    post:
      consumes:
      - application/json
      description: 取消当前订阅
      parameters:
      - description: 取消请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_subscription.CancelRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 取消订阅
      tags:
      - Subscription
  /api/subscription/change-plan:
    post:
      consumes:
      - application/json
      description: 更换订阅套餐
      parameters:
      - description: 更换请求
        in: body
        name: request
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更换套餐
      tags:
      - Subscription
  /api/subscription/current:
    get:
      description: 获取当前用户的订阅信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取当前订阅
      tags:
      - Subscription
  /api/subscription/expiring:
    get:
      description: 获取即将到期的订阅列表（管理员）
      parameters:
      - description: 提前天数(3/7/14/30)
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 检查即将到期订阅
      tags:
      - Subscription
  /api/subscription/history:
    get:
      description: 获取用户的订阅历史记录
      parameters:
      - description: 用户ID（可选，默认当前用户）
        in: query
        name: userId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取订阅历史
      tags:
      - Subscription
  /api/subscription/plans:
    get:
      description: 获取所有可用的订阅套餐
      parameters:
      - description: 是否包含全局套餐
        in: query
        name: includeGlobal
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取套餐列表
      tags:
      - Subscription
    post:
      consumes:
      - application/json
      description: 创建新的订阅套餐（管理员）
      parameters:
      - description: 套餐信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_subscription.CreatePlanRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建订阅套餐
      tags:
      - Subscription
  /api/subscription/plans/{id}:
    delete:
      description: 删除订阅套餐（管理员）
      parameters:
      - description: 套餐ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除套餐
      tags:
      - Subscription
    get:
      description: 根据ID获取套餐详细信息
      parameters:
      - description: 套餐ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取套餐详情
      tags:
      - Subscription
    put:
      consumes:
      - application/json
      description: 更新订阅套餐信息（管理员）
      parameters:
      - description: 套餐ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新字段
        in: body
        name: request
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新套餐
      tags:
      - Subscription
  /api/subscription/renew:
    post:
      consumes:
      - application/json
      description: 续订当前订阅
      parameters:
      - description: 续订请求
        in: body
        name: request
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 续订订阅
      tags:
      - Subscription
  /api/subscription/stats:
    get:
      description: 获取租户订阅统计数据（管理员）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取订阅统计
      tags:
      - Subscription
  /api/subscription/subscribe:
    post:
      consumes:
      - application/json
      description: 用户订阅指定套餐
      parameters:
      - description: 订阅请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_subscription.SubscribeRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: Conflict
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 订阅套餐
      tags:
      - Subscription
  /api/subscription/trial/convert:
    post:
      consumes:
      - application/json
      description: 将试用订阅转为正式订阅
      parameters:
      - description: 转正请求
        in: body
        name: request
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 试用转正
      tags:
      - Subscription
  /api/subscription/trial/start:
    post:
      consumes:
      - application/json
      description: 开始套餐试用
      parameters:
      - description: 试用请求
        in: body
        name: request
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: Conflict
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 开始试用
      tags:
      - Subscription
  /api/subscription/users/{userId}:
    get:
      description: 获取指定用户的订阅信息（管理员）
      parameters:
      - description: 用户ID
        in: path
        name: userId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取用户订阅
      tags:
      - Subscription
  /api/templates:
    get:
      description: 获取Prompt模板列表
      parameters:
      - description: 分类
        in: query
        name: category
        type: string
      - description: 可见性
        in: query
        name: visibility
        type: string
      - description: 创建者
        in: query
        name: created_by
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 查询模板列表
      tags:
      - Templates
    post:
      consumes:
      - application/json
      description: 创建新的Prompt模板
      parameters:
      - description: 模板信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_template.CreateTemplateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建模板
      tags:
      - Templates
  /api/templates/{id}:
    delete:
      description: 删除Prompt模板
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除模板
      tags:
      - Templates
    get:
      description: 获取单个Prompt模板
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取模板详情
      tags:
      - Templates
    put:
      consumes:
      - application/json
      description: 更新Prompt模板
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_template.UpdateTemplateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新模板
      tags:
      - Templates
  /api/templates/{id}/render:
    post:
      consumes:
      - application/json
      description: 使用变量渲染模板
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: string
      - description: 变量信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_template.RenderTemplateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 渲染模板
      tags:
      - Templates
  /api/templates/{id}/versions:
    post:
      consumes:
      - application/json
      description: 创建模板新版本
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: string
      - description: 版本信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_template.CreateVersionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建模板版本
      tags:
      - Templates
  /api/templates/{id}/versions/latest:
    get:
      description: 获取模板的最新版本
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取最新版本
      tags:
      - Templates
  /api/tenant/config:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_tenant.TenantConfig'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取租户配置
      tags:
      - Tenants
    put:
      consumes:
      - application/json
      parameters:
      - description: 配置内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tenant.updateConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_tenant.TenantConfig'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新租户配置
      tags:
      - Tenants
  /api/tenant/permissions:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
      security:
      - BearerAuth: []
      summary: 列出权限
      tags:
      - Tenants
  /api/tenant/roles:
    post:
      consumes:
      - application/json
      parameters:
      - description: 角色信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tenant.createRoleRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_tenant.Role'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建角色
      tags:
      - Tenants
    put:
      consumes:
      - application/json
      parameters:
      - description: 角色信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tenant.updateRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_tenant.Role'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新角色
      tags:
      - Tenants
  /api/tenant/users:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
      security:
      - BearerAuth: []
      summary: 列出租户用户
      tags:
      - Tenants
    post:
      consumes:
      - application/json
      parameters:
      - description: 用户信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tenant.createUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_tenant.User'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建租户用户
      tags:
      - Tenants
  /api/tenants:
    get:
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
      security:
      - BearerAuth: []
      summary: 租户列表
      tags:
      - Tenants
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tenant.createTenantRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_tenant.Tenant'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建租户
      tags:
      - Tenants
  /api/tenants/{id}:
    delete:
      parameters:
      - description: 租户 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: 删除成功
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除租户
      tags:
      - Tenants
    get:
      parameters:
      - description: 租户 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_tenant.Tenant'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取租户详情
      tags:
      - Tenants
    put:
      consumes:
      - application/json
      parameters:
      - description: 租户 ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tenant.updateTenantRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_tenant.Tenant'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新租户
      tags:
      - Tenants
  /api/tenants/{id}/roles:
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户 ID
        in: path
        name: id
        required: true
        type: string
      - description: 角色信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tenant.createRoleRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_tenant.Role'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建角色
      tags:
      - Tenants
    put:
      consumes:
      - application/json
      parameters:
      - description: 租户 ID
        in: path
        name: id
        required: true
        type: string
      - description: 角色信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tenant.updateRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_tenant.Role'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新角色
      tags:
      - Tenants
  /api/tenants/{id}/users:
    get:
      parameters:
      - description: 租户 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
      security:
      - BearerAuth: []
      summary: 列出租户用户
      tags:
      - Tenants
    post:
      consumes:
      - application/json
      parameters:
      - description: 租户 ID
        in: path
        name: id
        required: true
        type: string
      - description: 用户信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tenant.createUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_tenant.User'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建租户用户
      tags:
      - Tenants
  /api/tools:
    get:
      parameters:
      - description: 工具分类
        in: query
        name: category
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_tools.ToolDefinition'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 查询工具列表
      tags:
      - Tools
  /api/tools/{name}:
    delete:
      parameters:
      - description: 工具名称
        in: path
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 注销工具
      tags:
      - Tools
    get:
      parameters:
      - description: 工具名称
        in: path
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_tools.ToolDefinition'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取工具详情
      tags:
      - Tools
  /api/tools/{name}/execute:
    post:
      consumes:
      - application/json
      parameters:
      - description: 工具名称
        in: path
        name: name
        required: true
        type: string
      - description: 执行输入
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tools.toolExecuteRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_handlers_tools.toolExecuteResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 执行工具
      tags:
      - Tools
  /api/tools/{name}/executions:
    get:
      parameters:
      - description: 工具名称
        in: path
        name: name
        required: true
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 执行状态
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_handlers_tools.toolsExecutionListResponse'
      security:
      - BearerAuth: []
      summary: 工具执行列表
      tags:
      - Tools
  /api/tools/categories/{category}:
    get:
      parameters:
      - description: 工具分类
        in: path
        name: category
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_tools.ToolDefinition'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 按分类列出工具
      tags:
      - Tools
  /api/tools/executions/{id}:
    get:
      parameters:
      - description: 执行 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_tools.ToolExecution'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 工具执行详情
      tags:
      - Tools
  /api/tools/openai-format:
    get:
      parameters:
      - description: 工具分类
        in: query
        name: category
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: OpenAI 工具列表
      tags:
      - Tools
  /api/tools/register:
    post:
      consumes:
      - application/json
      parameters:
      - description: 工具定义
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_tools.RegisterToolRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 注册自定义工具
      tags:
      - Tools
  /api/user/activity:
    get:
      description: 获取当前用户的活动统计数据
      parameters:
      - description: 统计天数
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取用户活动统计
      tags:
      - User
  /api/user/preferences:
    get:
      description: 获取当前用户的偏好设置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取用户偏好设置
      tags:
      - User
    put:
      consumes:
      - application/json
      description: 更新当前用户的偏好设置
      parameters:
      - description: 偏好设置
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_user.UserPreferences'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新用户偏好设置
      tags:
      - User
  /api/user/profile:
    get:
      description: 获取当前用户的个人资料信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取用户资料
      tags:
      - User
    put:
      consumes:
      - application/json
      description: 更新当前用户的个人资料
      parameters:
      - description: 用户资料
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_user.UserProfile'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新用户资料
      tags:
      - User
  /api/v1/agents/capabilities:
    get:
      parameters:
      - description: Agent 类型
        in: query
        name: agent_type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取 Agent 能力目录
      tags:
      - Agents
  /api/v1/agents/capabilities/{agent_type}/{role}:
    get:
      parameters:
      - description: Agent 类型
        in: path
        name: agent_type
        required: true
        type: string
      - description: 角色标识
        in: path
        name: role
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_workflow_template.AgentRoleCapability'
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 获取 Agent 角色能力详情
      tags:
      - Agents
  /api/v1/cache/clear:
    post:
      description: 清空所有LLM缓存数据
      produces:
      - application/json
      responses:
        "200":
          description: 操作结果
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 权限不足
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: 清空缓存
      tags:
      - 缓存
  /api/v1/cache/health:
    get:
      description: 检查缓存系统是否正常运行
      produces:
      - application/json
      responses:
        "200":
          description: 健康状态
          schema:
            additionalProperties: true
            type: object
      summary: 缓存健康检查
      tags:
      - 缓存
  /api/v1/cache/stats:
    get:
      description: 获取LLM缓存的统计信息，包括命中率、缓存大小等
      produces:
      - application/json
      responses:
        "200":
          description: 缓存统计数据
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      summary: 获取缓存统计
      tags:
      - 缓存
  /api/webhooks:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_notification.WebhookEndpoint'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 列出所有Webhook端点
      tags:
      - Webhook
    post:
      consumes:
      - application/json
      parameters:
      - description: 端点信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_notifications.RegisterEndpointRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_notification.WebhookEndpoint'
              type: object
      security:
      - BearerAuth: []
      summary: 注册Webhook端点
      tags:
      - Webhook
  /api/webhooks/{id}:
    delete:
      parameters:
      - description: 端点ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 删除Webhook端点
      tags:
      - Webhook
    put:
      consumes:
      - application/json
      parameters:
      - description: 端点ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_notifications.UpdateEndpointRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 更新Webhook端点
      tags:
      - Webhook
  /api/webhooks/{id}/active:
    put:
      consumes:
      - application/json
      parameters:
      - description: 端点ID
        in: path
        name: id
        required: true
        type: string
      - description: 是否激活
        in: query
        name: active
        required: true
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 设置Webhook端点活动状态
      tags:
      - Webhook
  /api/webhooks/{id}/test:
    post:
      consumes:
      - application/json
      parameters:
      - description: 端点ID
        in: path
        name: id
        required: true
        type: string
      - description: 测试数据
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_notifications.TestWebhookRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_notification.WebhookDelivery'
              type: object
      security:
      - BearerAuth: []
      summary: 测试Webhook端点
      tags:
      - Webhook
  /api/webhooks/event-types:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取支持的Webhook事件类型
      tags:
      - Webhook
  /api/workflows:
    get:
      consumes:
      - application/json
      description: 根据可见性与创建者筛选当前租户的工作流
      parameters:
      - description: 可见性范围
        in: query
        name: visibility
        type: string
      - description: 创建者 ID
        in: query
        name: created_by
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_workflow.ListWorkflowsResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询工作流列表
      tags:
      - Workflows
    post:
      consumes:
      - application/json
      parameters:
      - description: 工作流创建参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_workflow.CreateWorkflowRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_workflow.Workflow'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建工作流
      tags:
      - Workflows
  /api/workflows/{id}:
    delete:
      parameters:
      - description: 工作流 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除工作流
      tags:
      - Workflows
    get:
      parameters:
      - description: 工作流 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_workflow.Workflow'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询工作流详情
      tags:
      - Workflows
    put:
      consumes:
      - application/json
      parameters:
      - description: 工作流 ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_workflow.UpdateWorkflowRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_workflow.Workflow'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新工作流
      tags:
      - Workflows
  /api/workflows/{id}/execute:
    post:
      consumes:
      - application/json
      parameters:
      - description: 工作流 ID
        in: path
        name: id
        required: true
        type: string
      - description: 执行输入
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workflows.ExecuteWorkflowRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/api_handlers_workflows.WorkflowExecutionResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交工作流执行
      tags:
      - Workflows
  /api/workflows/{id}/executions:
    get:
      parameters:
      - description: 工作流 ID
        in: path
        name: id
        required: true
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 执行状态
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_handlers_workflows.WorkflowExecutionListResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询工作流执行历史
      tags:
      - Workflows
  /api/workflows/{id}/stats:
    get:
      parameters:
      - description: 工作流 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取工作流统计
      tags:
      - Workflows
  /api/workflows/example:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取示例工作流定义
      tags:
      - Workflows
  /api/workflows/validate:
    post:
      consumes:
      - application/json
      parameters:
      - description: 定义内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workflows.workflowValidateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 验证工作流定义
      tags:
      - Workflows
  /api/workspace/agents:
    post:
      consumes:
      - application/json
      parameters:
      - description: 请求体
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workspace.ensureAgentWorkspaceDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 创建或获取智能体工作空间
      tags:
      - AgentWorkspace
  /api/workspace/agents/{agentId}:
    get:
      parameters:
      - description: 智能体ID
        in: path
        name: agentId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取智能体工作空间信息
      tags:
      - AgentWorkspace
  /api/workspace/agents/{agentId}/artifacts:
    get:
      parameters:
      - description: 智能体ID
        in: path
        name: agentId
        required: true
        type: string
      - default: 20
        description: 每页数量
        in: query
        name: limit
        type: integer
      - default: 0
        description: 偏移量
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 列出指定智能体的产出物
      tags:
      - AgentArtifact
  /api/workspace/artifact-types:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取支持的产出物类型列表
      tags:
      - AgentArtifact
  /api/workspace/artifacts:
    post:
      consumes:
      - application/json
      parameters:
      - description: 请求体
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workspace.createArtifactDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 创建智能体产出物
      tags:
      - AgentArtifact
  /api/workspace/autosave:
    post:
      consumes:
      - application/json
      parameters:
      - description: 保存请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workspace.autoSaveDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 自动保存文件内容
      tags:
      - Workspace
  /api/workspace/batch/copy:
    post:
      consumes:
      - application/json
      parameters:
      - description: 复制请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workspace.batchCopyDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 批量复制节点
      tags:
      - Workspace
  /api/workspace/batch/delete:
    post:
      consumes:
      - application/json
      parameters:
      - description: 删除请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workspace.batchDeleteDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 批量删除节点
      tags:
      - Workspace
  /api/workspace/batch/move:
    post:
      consumes:
      - application/json
      parameters:
      - description: 移动请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workspace.batchMoveDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 批量移动节点到新目录
      tags:
      - Workspace
  /api/workspace/batch/sort:
    post:
      consumes:
      - application/json
      parameters:
      - description: 排序更新
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workspace.batchSortDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 批量更新节点排序
      tags:
      - Workspace
  /api/workspace/export:
    post:
      consumes:
      - application/json
      parameters:
      - description: 导出请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workspace.ExportWorkspaceRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 导出工作空间
      tags:
      - Workspace
  /api/workspace/import/text:
    post:
      consumes:
      - application/json
      parameters:
      - description: 导入请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workspace.importTextDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 从TXT文件导入章节
      tags:
      - Workspace
  /api/workspace/outline/{workId}:
    get:
      parameters:
      - description: 作品ID
        in: path
        name: workId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取作品大纲总览
      tags:
      - Workspace
  /api/workspace/sessions:
    post:
      consumes:
      - application/json
      parameters:
      - description: 请求体
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api_handlers_workspace.ensureSessionWorkspaceDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 创建或获取会话工作空间
      tags:
      - SessionWorkspace
  /api/workspace/sessions/{sessionId}/artifacts:
    get:
      parameters:
      - description: 会话ID
        in: path
        name: sessionId
        required: true
        type: string
      - default: 20
        description: 每页数量
        in: query
        name: limit
        type: integer
      - default: 0
        description: 偏移量
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 列出指定会话的产出物
      tags:
      - AgentArtifact
  /api/workspace/templates:
    get:
      description: 查询可用的工作空间模板列表
      parameters:
      - description: 模板类型
        enum:
        - novel
        - script
        - article
        - project
        - custom
        in: query
        name: type
        type: string
      - description: 关键词搜索
        in: query
        name: keyword
        type: string
      - description: 是否内置模板
        in: query
        name: builtin
        type: boolean
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.PagedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_workspace.WorkspaceTemplate'
                  type: array
              type: object
      summary: 查询模板列表
      tags:
      - WorkspaceTemplate
    post:
      consumes:
      - application/json
      description: 创建自定义工作空间模板
      parameters:
      - description: 创建请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_workspace.CreateTemplateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_workspace.WorkspaceTemplate'
              type: object
      summary: 创建工作空间模板
      tags:
      - WorkspaceTemplate
  /api/workspace/templates/{id}:
    delete:
      description: 删除自定义模板（只能删除自己创建的非内置模板）
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.Response'
      summary: 删除模板
      tags:
      - WorkspaceTemplate
    get:
      description: 根据ID获取模板详情
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_workspace.WorkspaceTemplate'
              type: object
      summary: 获取模板详情
      tags:
      - WorkspaceTemplate
    put:
      consumes:
      - application/json
      description: 更新自定义模板（只能更新自己创建的模板）
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_workspace.CreateTemplateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_workspace.WorkspaceTemplate'
              type: object
      summary: 更新模板
      tags:
      - WorkspaceTemplate
  /api/workspace/templates/apply:
    post:
      consumes:
      - application/json
      description: 使用模板创建工作空间目录结构
      parameters:
      - description: 应用请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_workspace.ApplyTemplateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.Response'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_workspace.WorkspaceNode'
              type: object
      summary: 应用模板创建工作空间
      tags:
      - WorkspaceTemplate
  /api/workspace/tree:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 获取工作区树
      tags:
      - Workspace
  /api/worldbuilder/entities:
    get:
      parameters:
      - description: 设定ID
        in: query
        name: settingId
        required: true
        type: string
      - description: 实体类型
        in: query
        name: type
        type: string
      - description: 关键词
        in: query
        name: keyword
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
      security:
      - BearerAuth: []
      summary: 获取设定实体列表
      tags:
      - WorldBuilder
    post:
      consumes:
      - application/json
      parameters:
      - description: 实体信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_worldbuilder.CreateEntityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.SettingEntity'
              type: object
      security:
      - BearerAuth: []
      summary: 创建设定实体
      tags:
      - WorldBuilder
  /api/worldbuilder/entities/{id}:
    delete:
      parameters:
      - description: 实体ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 删除设定实体
      tags:
      - WorldBuilder
    get:
      parameters:
      - description: 实体ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.SettingEntity'
              type: object
      security:
      - BearerAuth: []
      summary: 获取设定实体详情
      tags:
      - WorldBuilder
    put:
      consumes:
      - application/json
      parameters:
      - description: 实体ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新内容
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 更新设定实体
      tags:
      - WorldBuilder
  /api/worldbuilder/generate:
    post:
      consumes:
      - application/json
      parameters:
      - description: 生成请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_worldbuilder.GenerateSettingRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.WorldSetting'
              type: object
      security:
      - BearerAuth: []
      summary: AI生成世界观设定
      tags:
      - WorldBuilder
  /api/worldbuilder/generate/character:
    post:
      consumes:
      - application/json
      parameters:
      - description: 生成请求
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.SettingEntity'
              type: object
      security:
      - BearerAuth: []
      summary: AI生成角色
      tags:
      - WorldBuilder
  /api/worldbuilder/generate/relations:
    post:
      consumes:
      - application/json
      parameters:
      - description: 生成请求
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.RelationGraph'
              type: object
      security:
      - BearerAuth: []
      summary: AI生成关系网络
      tags:
      - WorldBuilder
  /api/worldbuilder/modify:
    post:
      consumes:
      - application/json
      parameters:
      - description: 修改请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_worldbuilder.ModifySettingRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.WorldSetting'
              type: object
      security:
      - BearerAuth: []
      summary: AI增量修改设定
      tags:
      - WorldBuilder
  /api/worldbuilder/relations:
    post:
      consumes:
      - application/json
      parameters:
      - description: 关系信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_worldbuilder.CreateRelationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.EntityRelation'
              type: object
      security:
      - BearerAuth: []
      summary: 创建实体关系
      tags:
      - WorldBuilder
  /api/worldbuilder/relations/{id}:
    delete:
      parameters:
      - description: 关系ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 删除实体关系
      tags:
      - WorldBuilder
  /api/worldbuilder/relations/graph:
    get:
      parameters:
      - description: 设定ID
        in: query
        name: settingId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.RelationGraph'
              type: object
      security:
      - BearerAuth: []
      summary: 获取关系图数据
      tags:
      - WorldBuilder
  /api/worldbuilder/settings:
    get:
      parameters:
      - description: 作品ID
        in: query
        name: workId
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.ListResponse'
      security:
      - BearerAuth: []
      summary: 获取世界观设定列表
      tags:
      - WorldBuilder
    post:
      consumes:
      - application/json
      parameters:
      - description: 设定信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_worldbuilder.CreateSettingRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.WorldSetting'
              type: object
      security:
      - BearerAuth: []
      summary: 创建世界观设定
      tags:
      - WorldBuilder
  /api/worldbuilder/settings/{id}:
    delete:
      parameters:
      - description: 设定ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 删除世界观设定
      tags:
      - WorldBuilder
    get:
      parameters:
      - description: 设定ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.WorldSetting'
              type: object
      security:
      - BearerAuth: []
      summary: 获取世界观设定详情
      tags:
      - WorldBuilder
    put:
      consumes:
      - application/json
      parameters:
      - description: 设定ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新内容
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 更新世界观设定
      tags:
      - WorldBuilder
  /api/worldbuilder/sidebar/search:
    get:
      parameters:
      - description: 作品ID
        in: query
        name: workId
        required: true
        type: string
      - description: 关键词
        in: query
        name: keyword
        type: string
      - description: 实体类型
        in: query
        name: type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_worldbuilder.SettingEntity'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 搜索作品中的设定实体
      tags:
      - WorldBuilder
  /api/worldbuilder/sidebar/summary:
    get:
      parameters:
      - description: 作品ID
        in: query
        name: workId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.WorkSettingsSummary'
              type: object
      security:
      - BearerAuth: []
      summary: 获取作品设定摘要
      tags:
      - WorldBuilder
  /api/worldbuilder/stats:
    get:
      parameters:
      - description: 设定ID
        in: query
        name: settingId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.SettingStats'
              type: object
      security:
      - BearerAuth: []
      summary: 获取设定统计
      tags:
      - WorldBuilder
  /api/worldbuilder/templates:
    get:
      parameters:
      - description: 类型
        in: query
        name: genre
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_worldbuilder.SettingTemplate'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取设定模板列表
      tags:
      - WorldBuilder
    post:
      consumes:
      - application/json
      parameters:
      - description: 模板信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/backend_internal_worldbuilder.SettingTemplate'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_api_handlers_common.APIResponse'
      security:
      - BearerAuth: []
      summary: 创建设定模板
      tags:
      - WorldBuilder
  /api/worldbuilder/versions:
    get:
      parameters:
      - description: 设定ID
        in: query
        name: settingId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/backend_internal_worldbuilder.SettingVersion'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: 获取设定版本历史
      tags:
      - WorldBuilder
  /api/worldbuilder/versions/{id}:
    get:
      parameters:
      - description: 版本ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.SettingVersion'
              type: object
      security:
      - BearerAuth: []
      summary: 获取指定版本详情
      tags:
      - WorldBuilder
  /api/worldbuilder/versions/diff:
    get:
      parameters:
      - description: 版本A ID
        in: query
        name: versionA
        required: true
        type: string
      - description: 版本B ID
        in: query
        name: versionB
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.VersionDiff'
              type: object
      security:
      - BearerAuth: []
      summary: 对比两个版本
      tags:
      - WorldBuilder
  /api/worldbuilder/versions/revert:
    post:
      consumes:
      - application/json
      parameters:
      - description: 恢复请求
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/backend_api_handlers_common.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/backend_internal_worldbuilder.WorldSetting'
              type: object
      security:
      - BearerAuth: []
      summary: 恢复到指定版本
      tags:
      - WorldBuilder
  /health:
    get:
      description: 返回基础健康状态，可供监控探针使用
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.HealthResponse'
      summary: 服务健康检查
      tags:
      - System
  /ready:
    get:
      description: 包含数据库连通性结果，用于判断可接收请求
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.ReadinessResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/api.ReadinessResponse'
      summary: 服务就绪检查
      tags:
      - System
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
