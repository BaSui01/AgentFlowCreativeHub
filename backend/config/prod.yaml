# 生产环境配置

server:
  port: 7000
  mode: release
  read_timeout: 30
  write_timeout: 30

database:
  host: ${DB_HOST}
  port: 5432
  user: ${DB_USER}
  password: ${DB_PASSWORD}
  dbname: ${DB_NAME}
  sslmode: require
  max_open_conns: 100
  max_idle_conns: 10
  conn_max_lifetime: 3600

redis:
  host: ${REDIS_HOST}
  port: 6379
  password: ${REDIS_PASSWORD}
  db: 0

log:
  level: info
  format: json
  output_path: /var/log/agentflow/app.log

ai:
  openai:
    api_key: ${OPENAI_API_KEY}
    base_url: https://api.openai.com/v1
    org_id: ${OPENAI_ORG_ID}
    max_retries: 3

  anthropic:
    api_key: ${ANTHROPIC_API_KEY}
    base_url: https://api.anthropic.com
    max_retries: 3

rag:
  vector_store:
    type: qdrant
    qdrant:
      endpoint: ${QDRANT_ENDPOINT}
      api_key: ${QDRANT_API_KEY}
      collection: agentflow_chunks
      vector_dimension: 1536
      distance: Cosine
      timeout_seconds: 10

# 缓存配置
cache:
  # 硬盘缓存 (L3层)
  disk:
    enabled: true
    db_path: /var/cache/agentflow/llm_cache.db
    max_size_gb: 20
    ttl: 720h # 30天
    cleanup_interval: 1h
